var SV=Object.defineProperty,AV=Object.defineProperties,NV=Object.getOwnPropertyDescriptors,_k=Object.getOwnPropertySymbols,MV=Object.prototype.hasOwnProperty,RV=Object.prototype.propertyIsEnumerable,yk=(et,De,M)=>De in et?SV(et,De,{enumerable:!0,configurable:!0,writable:!0,value:M}):et[De]=M,Ct=(et,De)=>{for(var M in De||(De={}))MV.call(De,M)&&yk(et,M,De[M]);if(_k)for(var M of _k(De))RV.call(De,M)&&yk(et,M,De[M]);return et},Ni=(et,De)=>AV(et,NV(De));(self.webpackChunkLearning_Together=self.webpackChunkLearning_Together||[]).push([[179],{7905:(et,De,M)=>{"use strict";M.d(De,{hO:()=>Ge,xv:()=>ce,Dh:()=>fe,GT:()=>be,cc:()=>Ce,on:()=>G,pX:()=>ue});var d=M(3668),ne=M(7892),P=M(4918);et=M.hmd(et);const ve=["ngOnDestroy"],ue=(ee,ye,Ae,me={})=>new Proxy(ee,{get:(Be,xe)=>Ae.runOutsideAngular(()=>{var Ze;if(ee[xe])return(null===(Ze=null==me?void 0:me.spy)||void 0===Ze?void 0:Ze.get)&&me.spy.get(xe,ee[xe]),ee[xe];if(ve.indexOf(xe)>-1)return()=>{};const Xe=ye.toPromise().then(de=>{const O=de&&de[xe];return"function"==typeof O?O.bind(de):O&&O.then?O.then(L=>Ae.run(()=>L)):Ae.run(()=>O)});return new Proxy(()=>{},{get:(de,O)=>Xe[O],apply:(de,O,L)=>Xe.then(q=>{var Y;const se=q&&q(...L);return(null===(Y=null==me?void 0:me.spy)||void 0===Y?void 0:Y.apply)&&me.spy.apply(xe,L,se),se})})})}),be=(ee,ye)=>{ye.forEach(Ae=>{Object.getOwnPropertyNames(Ae.prototype||Ae).forEach(me=>{Object.defineProperty(ee.prototype,me,Object.getOwnPropertyDescriptor(Ae.prototype||Ae,me))})})};class le{constructor(ye){return ye}}const fe=new d.OlP("angularfire2.app.options"),ce=new d.OlP("angularfire2.app.name");function G(ee,ye,Ae){const Be="object"==typeof Ae&&Ae||{};Be.name=Be.name||"string"==typeof Ae&&Ae||"[DEFAULT]";const Ze=ne.Z.apps.filter(Xe=>Xe&&Xe.name===Be.name)[0]||ye.runOutsideAngular(()=>ne.Z.initializeApp(ee,Be));try{JSON.stringify(ee)!==JSON.stringify(Ze.options)&&W("error",`${Ze.name} Firebase App already initialized with different options${et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Xe){}return new le(Ze)}const W=(ee,...ye)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ee](...ye)},te={provide:le,useFactory:G,deps:[fe,d.R0b,[new d.FiY,ce]]};let Ge=(()=>{class ee{constructor(Ae){ne.Z.registerVersion("angularfire",P.q4.full,"core"),ne.Z.registerVersion("angularfire",P.q4.full,"app-compat"),ne.Z.registerVersion("angular",d.q4F.full,Ae.toString())}static initializeApp(Ae,me){return{ngModule:ee,providers:[{provide:fe,useValue:Ae},{provide:ce,useValue:me}]}}}return ee.\u0275fac=function(Ae){return new(Ae||ee)(d.LFG(d.Lbi))},ee.\u0275mod=d.oAB({type:ee}),ee.\u0275inj=d.cJS({providers:[te]}),ee})();function Ce(ee,ye,Ae,me,Be){const[,xe,Ze]=globalThis.\u0275AngularfireInstanceCache.find(Xe=>Xe[0]===ee)||[];if(xe)return function(ee,ye){try{return ee.toString()===ye.toString()}catch(Ae){return ee===ye}}(Be,Ze)||(ae("error",`${ye} was already initialized on the ${Ae} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),ae("warn",{is:Be,was:Ze})),xe;{const Xe=me();return globalThis.\u0275AngularfireInstanceCache.push([ee,Xe,Be]),Xe}}const Ve=!!et.hot,ae=(ee,...ye)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[ee](...ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4918:(et,De,M)=>{"use strict";M.d(De,{q4:()=>rm,iC:()=>cr,HU:()=>Ia,vb:()=>Vo,JM:()=>im});var d=M(3668),ne=M(7713),P=M(8239),ve=M(1572),ue=M(4213),be=M(1177),le=M(3855);M(8094);const ce="@firebase/remote-config",G="0.3.3",Ce=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class yt{constructor(k,j,ge,Re){this.client=k,this.storage=j,this.storageCache=ge,this.logger=Re}isCachedDataFresh(k,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-j,Re=ge<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${Re}.`),Re}fetch(k){var j=this;return(0,P.Z)(function*(){const[ge,Re]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Re&&j.isCachedDataFresh(k.cacheMaxAgeMillis,ge))return Re;k.eTag=Re&&Re.eTag;const We=yield j.client.fetch(k),rt=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===We.status&&rt.push(j.storage.setLastSuccessfulFetchResponse(We)),yield Promise.all(rt),We})()}}function Zt(B=navigator){return B.languages&&B.languages[0]||B.language}class He{constructor(k,j,ge,Re,We,rt){this.firebaseInstallations=k,this.sdkVersion=j,this.namespace=ge,this.projectId=Re,this.apiKey=We,this.appId=rt}fetch(k){var j=this;return(0,P.Z)(function*(){const[ge,Re]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),rt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},on={sdk_version:j.sdkVersion,app_instance_id:ge,app_instance_id_token:Re,app_id:j.appId,language_code:Zt()},Tt={method:"POST",headers:Rt,body:JSON.stringify(on)},wn=fetch(rt,Tt),$r=new Promise((zs,Wi)=>{k.signal.addEventListener(()=>{const ss=new Error("The operation was aborted.");ss.name="AbortError",Wi(ss)})});let an;try{yield Promise.race([wn,$r]),an=yield wn}catch(zs){let Wi="fetch-client-network";throw"AbortError"===zs.name&&(Wi="fetch-timeout"),Ce.create(Wi,{originalErrorMessage:zs.message})}let Hn=an.status;const Ss=an.headers.get("ETag")||void 0;let _o,Kn;if(200===an.status){let zs;try{zs=yield an.json()}catch(Wi){throw Ce.create("fetch-client-parse",{originalErrorMessage:Wi.message})}_o=zs.entries,Kn=zs.state}if("INSTANCE_STATE_UNSPECIFIED"===Kn?Hn=500:"NO_CHANGE"===Kn?Hn=304:("NO_TEMPLATE"===Kn||"EMPTY_CONFIG"===Kn)&&(_o={}),304!==Hn&&200!==Hn)throw Ce.create("fetch-status",{httpStatus:Hn});return{status:Hn,eTag:Ss,config:_o}})()}}class Vt{constructor(k,j){this.client=k,this.storage=j}fetch(k){var j=this;return(0,P.Z)(function*(){const ge=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(k,ge)})()}attemptFetch(k,{throttleEndTimeMillis:j,backoffCount:ge}){var Re=this;return(0,P.Z)(function*(){yield function(B,k){return new Promise((j,ge)=>{const Re=Math.max(k-Date.now(),0),We=setTimeout(j,Re);B.addEventListener(()=>{clearTimeout(We),ge(Ce.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,j);try{const We=yield Re.client.fetch(k);return yield Re.storage.deleteThrottleMetadata(),We}catch(We){if(!function(B){if(!(B instanceof ue.ZR&&B.customData))return!1;const k=Number(B.customData.httpStatus);return 429===k||500===k||503===k||504===k}(We))throw We;const rt={throttleEndTimeMillis:Date.now()+(0,ue.$s)(ge),backoffCount:ge+1};return yield Re.storage.setThrottleMetadata(rt),Re.attemptFetch(k,rt)}})()}}class Jt{constructor(k,j,ge,Re,We){this.app=k,this._client=j,this._storageCache=ge,this._storage=Re,this._logger=We,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Gt(B,k){const j=B.target.error||void 0;return Ce.create(k,{originalErrorMessage:j&&j.message})}const It="app_namespace_store";class Bn{constructor(k,j,ge,Re=function(){return new Promise((B,k)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ge=>{k(Gt(ge,"storage-open"))},j.onsuccess=ge=>{B(ge.target.result)},j.onupgradeneeded=ge=>{0===ge.oldVersion&&ge.target.result.createObjectStore(It,{keyPath:"compositeKey"})}}catch(j){k(Ce.create("storage-open",{originalErrorMessage:j}))}})}()){this.appId=k,this.appName=j,this.namespace=ge,this.openDbPromise=Re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var j=this;return(0,P.Z)(function*(){const ge=yield j.openDbPromise;return new Promise((Re,We)=>{const Rt=ge.transaction([It],"readonly").objectStore(It),on=j.createCompositeKey(k);try{const Tt=Rt.get(on);Tt.onerror=wn=>{We(Gt(wn,"storage-get"))},Tt.onsuccess=wn=>{const $r=wn.target.result;Re($r?$r.value:void 0)}}catch(Tt){We(Ce.create("storage-get",{originalErrorMessage:Tt&&Tt.message}))}})})()}set(k,j){var ge=this;return(0,P.Z)(function*(){const Re=yield ge.openDbPromise;return new Promise((We,rt)=>{const on=Re.transaction([It],"readwrite").objectStore(It),Tt=ge.createCompositeKey(k);try{const wn=on.put({compositeKey:Tt,value:j});wn.onerror=$r=>{rt(Gt($r,"storage-set"))},wn.onsuccess=()=>{We()}}catch(wn){rt(Ce.create("storage-set",{originalErrorMessage:wn&&wn.message}))}})})()}delete(k){var j=this;return(0,P.Z)(function*(){const ge=yield j.openDbPromise;return new Promise((Re,We)=>{const Rt=ge.transaction([It],"readwrite").objectStore(It),on=j.createCompositeKey(k);try{const Tt=Rt.delete(on);Tt.onerror=wn=>{We(Gt(wn,"storage-delete"))},Tt.onsuccess=()=>{Re()}}catch(Tt){We(Ce.create("storage-delete",{originalErrorMessage:Tt&&Tt.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class ei{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,P.Z)(function*(){const j=k.storage.getLastFetchStatus(),ge=k.storage.getLastSuccessfulFetchTimestampMillis(),Re=k.storage.getActiveConfig(),We=yield j;We&&(k.lastFetchStatus=We);const rt=yield ge;rt&&(k.lastSuccessfulFetchTimestampMillis=rt);const Rt=yield Re;Rt&&(k.activeConfig=Rt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function jr(){return lt.apply(this,arguments)}function lt(){return(lt=(0,P.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(B){return!1}})).apply(this,arguments)}(0,ve._registerComponent)(new be.wA("remote-config",function(k,{instanceIdentifier:j}){const ge=k.getProvider("app").getImmediate(),Re=k.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ce.create("registration-window");if(!(0,ue.hl)())throw Ce.create("indexed-db-unavailable");const{projectId:We,apiKey:rt,appId:Rt}=ge.options;if(!We)throw Ce.create("registration-project-id");if(!rt)throw Ce.create("registration-api-key");if(!Rt)throw Ce.create("registration-app-id");const on=new Bn(Rt,ge.name,j=j||"firebase"),Tt=new ei(on),wn=new le.Yd(ce);wn.logLevel=le.in.ERROR;const $r=new He(Re,ve.SDK_VERSION,j,We,rt,Rt),an=new Vt($r,on),Hn=new yt(an,on,Tt,wn),Ss=new Jt(ge,Hn,Tt,on,wn);return function(B){const k=(0,ue.m9)(B);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(Ss),Ss},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(ce,G),(0,ve.registerVersion)(ce,G,"esm2017");var gn=M(3045);const zn="analytics",ar="firebase_id",Kt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jt="https://www.googletagmanager.com/gtag/js",qt=new le.Yd("@firebase/analytics");function sn(B){return Promise.all(B.map(k=>k.catch(j=>j)))}function Qe(B,k){const j=document.createElement("script");j.src=`${jt}?l=${B}&id=${k}`,j.async=!0,document.head.appendChild(j)}function Sr(B,k,j,ge,Re,We){return ti.apply(this,arguments)}function ti(){return(ti=(0,P.Z)(function*(B,k,j,ge,Re,We){const rt=ge[Re];try{if(rt)yield k[rt];else{const on=(yield sn(j)).find(Tt=>Tt.measurementId===Re);on&&(yield k[on.appId])}}catch(Rt){qt.error(Rt)}B("config",Re,We)})).apply(this,arguments)}function Mr(B,k,j,ge,Re){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,P.Z)(function*(B,k,j,ge,Re){try{let We=[];if(Re&&Re.send_to){let rt=Re.send_to;Array.isArray(rt)||(rt=[rt]);const Rt=yield sn(j);for(const on of rt){const Tt=Rt.find($r=>$r.measurementId===on),wn=Tt&&k[Tt.appId];if(!wn){We=[];break}We.push(wn)}}0===We.length&&(We=Object.values(k)),yield Promise.all(We),B("event",ge,Re||{})}catch(We){qt.error(We)}})).apply(this,arguments)}function z(){const B=window.document.getElementsByTagName("script");for(const k of Object.values(B))if(k.src&&k.src.includes(jt))return k;return null}const Z=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ft=new class{constructor(k={},j=1e3){this.throttleMetadata=k,this.intervalMillis=j}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,j){this.throttleMetadata[k]=j}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function zt(B){return new Headers({Accept:"application/json","x-goog-api-key":B})}function Rn(B){return dn.apply(this,arguments)}function dn(){return(dn=(0,P.Z)(function*(B){var k;const{appId:j,apiKey:ge}=B,Re={method:"GET",headers:zt(ge)},We=Kt.replace("{app-id}",j),rt=yield fetch(We,Re);if(200!==rt.status&&304!==rt.status){let Rt="";try{const on=yield rt.json();(null===(k=on.error)||void 0===k?void 0:k.message)&&(Rt=on.error.message)}catch(on){}throw Z.create("config-fetch-failed",{httpStatus:rt.status,responseMessage:Rt})}return rt.json()})).apply(this,arguments)}function yr(B){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,P.Z)(function*(B,k=ft,j){const{appId:ge,apiKey:Re,measurementId:We}=B.options;if(!ge)throw Z.create("no-app-id");if(!Re){if(We)return{measurementId:We,appId:ge};throw Z.create("no-api-key")}const rt=k.getThrottleMetadata(ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Rt=new Hi;return setTimeout((0,P.Z)(function*(){Rt.abort()}),void 0!==j?j:6e4),Cn({appId:ge,apiKey:Re,measurementId:We},rt,Rt,k)})).apply(this,arguments)}function Cn(B,k,j){return lr.apply(this,arguments)}function lr(){return(lr=(0,P.Z)(function*(B,{throttleEndTimeMillis:k,backoffCount:j},ge,Re=ft){const{appId:We,measurementId:rt}=B;try{yield Mi(ge,k)}catch(Rt){if(rt)return qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${rt} provided in the "measurementId" field in the local Firebase config. [${Rt.message}]`),{appId:We,measurementId:rt};throw Rt}try{const Rt=yield Rn(B);return Re.deleteThrottleMetadata(We),Rt}catch(Rt){if(!Fo(Rt)){if(Re.deleteThrottleMetadata(We),rt)return qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${rt} provided in the "measurementId" field in the local Firebase config. [${Rt.message}]`),{appId:We,measurementId:rt};throw Rt}const on=503===Number(Rt.customData.httpStatus)?(0,ue.$s)(j,Re.intervalMillis,30):(0,ue.$s)(j,Re.intervalMillis),Tt={throttleEndTimeMillis:Date.now()+on,backoffCount:j+1};return Re.setThrottleMetadata(We,Tt),qt.debug(`Calling attemptFetch again in ${on} millis`),Cn(B,Tt,ge,Re)}})).apply(this,arguments)}function Mi(B,k){return new Promise((j,ge)=>{const Re=Math.max(k-Date.now(),0),We=setTimeout(j,Re);B.addEventListener(()=>{clearTimeout(We),ge(Z.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function Fo(B){if(!(B instanceof ue.ZR&&B.customData))return!1;const k=Number(B.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Hi{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}function Ds(){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,P.Z)(function*(){if(!(0,ue.hl)())return qt.warn(Z.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(B){return qt.warn(Z.create("indexeddb-unavailable",{errorInfo:B}).message),!1}return!0})).apply(this,arguments)}function Hr(){return(Hr=(0,P.Z)(function*(B,k,j,ge,Re,We,rt){var Rt;const on=yr(B);on.then(Hn=>{j[Hn.measurementId]=Hn.appId,B.options.measurementId&&Hn.measurementId!==B.options.measurementId&&qt.warn(`The measurement ID in the local Firebase config (${B.options.measurementId}) does not match the measurement ID fetched from the server (${Hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hn=>qt.error(Hn)),k.push(on);const Tt=Ds().then(Hn=>{if(Hn)return ge.getId()}),[wn,$r]=yield Promise.all([on,Tt]);z()||Qe(We,wn.measurementId),Re("js",new Date);const an=null!==(Rt=null==rt?void 0:rt.config)&&void 0!==Rt?Rt:{};return an.origin="firebase",an.update=!0,null!=$r&&(an[ar]=$r),Re("config",wn.measurementId,an),wn.measurementId})).apply(this,arguments)}class Rr{constructor(k){this.app=k}_delete(){return delete ln[this.app.options.appId],Promise.resolve()}}let ln={},vr=[];const Je={};let he,$e,At="dataLayer",qe=!1;function pe(B,k,j){!function(){const B=[];if((0,ue.ru)()&&B.push("This is a browser extension environment."),(0,ue.zI)()||B.push("Cookies are not available."),B.length>0){const k=B.map((ge,Re)=>`(${Re+1}) ${ge}`).join(" "),j=Z.create("invalid-analytics-context",{errorInfo:k});qt.warn(j.message)}}();const ge=B.options.appId;if(!ge)throw Z.create("no-app-id");if(!B.options.apiKey){if(!B.options.measurementId)throw Z.create("no-api-key");qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${B.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ln[ge])throw Z.create("already-exists",{id:ge});if(!qe){!function(B){let k=[];Array.isArray(window[B])?k=window[B]:window[B]=k}(At);const{wrappedGtag:We,gtagCore:rt}=function(B,k,j,ge,Re){let We=function(...rt){window[ge].push(arguments)};return window[Re]&&"function"==typeof window[Re]&&(We=window[Re]),window[Re]=function(B,k,j,ge){function We(){return(We=(0,P.Z)(function*(rt,Rt,on){try{"event"===rt?yield Mr(B,k,j,Rt,on):"config"===rt?yield Sr(B,k,j,ge,Rt,on):B("set",Rt)}catch(Tt){qt.error(Tt)}})).apply(this,arguments)}return function(rt,Rt,on){return We.apply(this,arguments)}}(We,B,k,j),{gtagCore:We,wrappedGtag:window[Re]}}(ln,vr,Je,At,"gtag");$e=We,he=rt,qe=!0}return ln[ge]=function(B,k,j,ge,Re,We,rt){return Hr.apply(this,arguments)}(B,vr,Je,k,he,At,j),new Rr(B)}function Te(){return(Te=(0,P.Z)(function*(B,k,j,ge,Re){if(Re&&Re.global)B("event",j,ge);else{const We=yield k;B("event",j,Object.assign(Object.assign({},ge),{send_to:We}))}})).apply(this,arguments)}function Ws(){return is.apply(this,arguments)}function is(){return(is=(0,P.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(B){return!1}})).apply(this,arguments)}const Cl="@firebase/analytics";(0,ve._registerComponent)(new be.wA(zn,(k,{options:j})=>pe(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),j),"PUBLIC")),(0,ve._registerComponent)(new be.wA("analytics-internal",function(k){try{const j=k.getProvider(zn).getImmediate();return{logEvent:(ge,Re,We)=>function(B,k,j,ge){B=(0,ue.m9)(B),function(B,k,j,ge,Re){return Te.apply(this,arguments)}($e,ln[B.app.options.appId],k,j,ge).catch(Re=>qt.error(Re))}(j,ge,Re,We)}}catch(j){throw Z.create("interop-component-reg-failed",{reason:j})}},"PRIVATE")),(0,ve.registerVersion)(Cl,"0.7.4"),(0,ve.registerVersion)(Cl,"0.7.4","esm2017");var Tl=M(2869),Lo=M(8843);const go=new class extends Lo.v{}(class extends Tl.o{constructor(k,j){super(k,j),this.scheduler=k,this.work=j}schedule(k,j=0){return j>0?super.schedule(k,j):(this.delay=j,this.state=k,this.scheduler.flush(this),this)}execute(k,j){return j>0||this.closed?super.execute(k,j):this._execute(k,j)}requestAsyncId(k,j,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(k,j,ge):k.flush(this)}});var ur=M(2210),Mu=M(7384),nm=M(5222),Is=M(4763);const rm=new d.GfV("7.2.0"),Gc="__angularfire_symbol__analyticsIsSupported",Wc="__angularfire_symbol__remoteConfigIsSupported",qc="__angularfire_symbol__messagingIsSupported";function im(B,k,j){if(k){if(1===k.length)return k[0];const We=k.filter(rt=>rt.app===j);if(1===We.length)return We[0]}return j.container.getProvider(B).getImmediate({optional:!0})}globalThis[Gc]||(globalThis[Gc]=Ws().then(B=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=B)),globalThis[qc]||(globalThis[qc]=(0,gn.Gb)().then(B=>globalThis.__angularfire_symbol__messagingIsSupportedValue=B)),globalThis[Wc]||(globalThis[Wc]=jr().then(B=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=B));const Vo=(B,k)=>{const j=k?[k]:(0,ne.C6)(),ge=[];return j.forEach(Re=>{Re.container.getProvider(B).instances.forEach(rt=>{ge.includes(rt)||ge.push(rt)})}),ge};function mo(){}class Il{constructor(k,j=go){this.zone=k,this.delegate=j}now(){return this.delegate.now()}schedule(k,j,ge){const Re=this.zone;return this.delegate.schedule(function(rt){Re.runGuarded(()=>{k.apply(this,[rt])})},j,ge)}}class qs{constructor(k){this.zone=k,this.task=null}call(k,j){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",mo,{},mo,mo)),j.pipe((0,Mu.b)({next:ge,complete:ge,error:ge})).subscribe(k).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ia=(()=>{class B{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new Il(Zone.current)),this.insideAngular=j.run(()=>new Il(Zone.current,ur.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return B.\u0275fac=function(j){return new(j||B)(d.LFG(d.R0b))},B.\u0275prov=d.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})();function br(){const B=globalThis.\u0275AngularFireScheduler;if(!B)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return B}function cr(B){return br(),function(B){return function(j){return(j=j.lift(new qs(B.ngZone))).pipe((0,nm.R)(B.outsideAngular),(0,Is.Q)(B.insideAngular))}}(br())(B)}},4213:(et,De,M)=>{"use strict";M.d(De,{BH:()=>Ge,LL:()=>Q,ZR:()=>se,zI:()=>L,US:()=>be,tV:()=>ce,$s:()=>Mr,r3:()=>Jt,Sg:()=>Ce,ne:()=>mr,vZ:()=>Ir,ZB:()=>W,pd:()=>Br,m9:()=>ni,z$:()=>Ye,jU:()=>ee,ru:()=>ye,d:()=>me,xb:()=>It,w1:()=>Be,hl:()=>de,uI:()=>Ve,UG:()=>ae,b$:()=>Ae,G6:()=>Xe,Mn:()=>xe,xO:()=>Bn,zd:()=>ei,eu:()=>O});const ve=function(z){const U=[];let Z=0;for(let Ne=0;Ne<z.length;Ne++){let oe=z.charCodeAt(Ne);oe<128?U[Z++]=oe:oe<2048?(U[Z++]=oe>>6|192,U[Z++]=63&oe|128):55296==(64512&oe)&&Ne+1<z.length&&56320==(64512&z.charCodeAt(Ne+1))?(oe=65536+((1023&oe)<<10)+(1023&z.charCodeAt(++Ne)),U[Z++]=oe>>18|240,U[Z++]=oe>>12&63|128,U[Z++]=oe>>6&63|128,U[Z++]=63&oe|128):(U[Z++]=oe>>12|224,U[Z++]=oe>>6&63|128,U[Z++]=63&oe|128)}return U},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,U){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ne=[];for(let oe=0;oe<z.length;oe+=3){const it=z[oe],ft=oe+1<z.length,zt=ft?z[oe+1]:0,Rn=oe+2<z.length,dn=Rn?z[oe+2]:0;let Cn=(15&zt)<<2|dn>>6,lr=63&dn;Rn||(lr=64,ft||(Cn=64)),Ne.push(Z[it>>2],Z[(3&it)<<4|zt>>4],Z[Cn],Z[lr])}return Ne.join("")},encodeString(z,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(z):this.encodeByteArray(ve(z),U)},decodeString(z,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(z):function(z){const U=[];let Z=0,Ne=0;for(;Z<z.length;){const oe=z[Z++];if(oe<128)U[Ne++]=String.fromCharCode(oe);else if(oe>191&&oe<224){const it=z[Z++];U[Ne++]=String.fromCharCode((31&oe)<<6|63&it)}else if(oe>239&&oe<365){const Rn=((7&oe)<<18|(63&z[Z++])<<12|(63&z[Z++])<<6|63&z[Z++])-65536;U[Ne++]=String.fromCharCode(55296+(Rn>>10)),U[Ne++]=String.fromCharCode(56320+(1023&Rn))}else{const it=z[Z++],ft=z[Z++];U[Ne++]=String.fromCharCode((15&oe)<<12|(63&it)<<6|63&ft)}}return U.join("")}(this.decodeStringToByteArray(z,U))},decodeStringToByteArray(z,U){this.init_();const Z=U?this.charToByteMapWebSafe_:this.charToByteMap_,Ne=[];for(let oe=0;oe<z.length;){const it=Z[z.charAt(oe++)],zt=oe<z.length?Z[z.charAt(oe)]:0;++oe;const dn=oe<z.length?Z[z.charAt(oe)]:64;++oe;const Pt=oe<z.length?Z[z.charAt(oe)]:64;if(++oe,null==it||null==zt||null==dn||null==Pt)throw Error();Ne.push(it<<2|zt>>4),64!==dn&&(Ne.push(zt<<4&240|dn>>2),64!==Pt&&Ne.push(dn<<6&192|Pt))}return Ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},fe=function(z){return function(z){const U=ve(z);return be.encodeByteArray(U,!0)}(z).replace(/\./g,"")},ce=function(z){try{return be.decodeString(z,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function W(z,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return U}for(const Z in U)!U.hasOwnProperty(Z)||!te(Z)||(z[Z]=W(z[Z],U[Z]));return z}function te(z){return"__proto__"!==z}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,Z)=>{this.resolve=U,this.reject=Z})}wrapCallback(U){return(Z,Ne)=>{Z?this.reject(Z):this.resolve(Ne),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(Z):U(Z,Ne))}}}function Ce(z,U){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne=U||"demo-project",oe=z.iat||0,it=z.sub||z.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${Ne}`,aud:Ne,iat:oe,exp:oe+3600,auth_time:oe,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},z);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(ft)),""].join(".")}function Ye(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function ee(){return"object"==typeof self&&self.self===self}function ye(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){return Ye().indexOf("Electron/")>=0}function Be(){const z=Ye();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function xe(){return Ye().indexOf("MSAppHost/")>=0}function Xe(){return!ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){return"object"==typeof indexedDB}function O(){return new Promise((z,U)=>{try{let Z=!0;const Ne="validate-browser-context-for-indexeddb-analytics-module",oe=self.indexedDB.open(Ne);oe.onsuccess=()=>{oe.result.close(),Z||self.indexedDB.deleteDatabase(Ne),z(!0)},oe.onupgradeneeded=()=>{Z=!1},oe.onerror=()=>{var it;U((null===(it=oe.error)||void 0===it?void 0:it.message)||"")}}catch(Z){U(Z)}})}function L(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class se extends Error{constructor(U,Z,Ne){super(Z),this.code=U,this.customData=Ne,this.name="FirebaseError",Object.setPrototypeOf(this,se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Q.prototype.create)}}class Q{constructor(U,Z,Ne){this.service=U,this.serviceName=Z,this.errors=Ne}create(U,...Z){const Ne=Z[0]||{},oe=`${this.service}/${U}`,it=this.errors[U],ft=it?function(z,U){return z.replace(yt,(Z,Ne)=>{const oe=U[Ne];return null!=oe?String(oe):`<${Ne}?>`})}(it,Ne):"Error";return new se(oe,`${this.serviceName}: ${ft} (${oe}).`,Ne)}}const yt=/\{\$([^}]+)}/g;function Jt(z,U){return Object.prototype.hasOwnProperty.call(z,U)}function It(z){for(const U in z)if(Object.prototype.hasOwnProperty.call(z,U))return!1;return!0}function Ir(z,U){if(z===U)return!0;const Z=Object.keys(z),Ne=Object.keys(U);for(const oe of Z){if(!Ne.includes(oe))return!1;const it=z[oe],ft=U[oe];if(gi(it)&&gi(ft)){if(!Ir(it,ft))return!1}else if(it!==ft)return!1}for(const oe of Ne)if(!Z.includes(oe))return!1;return!0}function gi(z){return null!==z&&"object"==typeof z}function Bn(z){const U=[];for(const[Z,Ne]of Object.entries(z))Array.isArray(Ne)?Ne.forEach(oe=>{U.push(encodeURIComponent(Z)+"="+encodeURIComponent(oe))}):U.push(encodeURIComponent(Z)+"="+encodeURIComponent(Ne));return U.length?"&"+U.join("&"):""}function ei(z){const U={};return z.replace(/^\?/,"").split("&").forEach(Ne=>{if(Ne){const[oe,it]=Ne.split("=");U[decodeURIComponent(oe)]=decodeURIComponent(it)}}),U}function Br(z){const U=z.indexOf("?");if(!U)return"";const Z=z.indexOf("#",U);return z.substring(U,Z>0?Z:void 0)}function mr(z,U){const Z=new jr(z,U);return Z.subscribe.bind(Z)}class jr{constructor(U,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{U(this)}).catch(Ne=>{this.error(Ne)})}next(U){this.forEachObserver(Z=>{Z.next(U)})}error(U){this.forEachObserver(Z=>{Z.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,Z,Ne){let oe;if(void 0===U&&void 0===Z&&void 0===Ne)throw new Error("Missing Observer.");oe=function(z,U){if("object"!=typeof z||null===z)return!1;for(const Z of["next","error","complete"])if(Z in z&&"function"==typeof z[Z])return!0;return!1}(U)?U:{next:U,error:Z,complete:Ne},void 0===oe.next&&(oe.next=zn),void 0===oe.error&&(oe.error=zn),void 0===oe.complete&&(oe.complete=zn);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?oe.error(this.finalError):oe.complete()}catch(ft){}}),this.observers.push(oe),it}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,U)}sendOne(U,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{Z(this.observers[U])}catch(Ne){"undefined"!=typeof console&&console.error&&console.error(Ne)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zn(){}function Mr(z,U=1e3,Z=2){const Ne=U*Math.pow(Z,z),oe=Math.round(.5*Ne*(Math.random()-.5)*2);return Math.min(144e5,Ne+oe)}function ni(z){return z&&z._delegate?z._delegate:z}},7713:(et,De,M)=>{"use strict";M.d(De,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=M(1572);(0,d.registerVersion)("firebase","9.6.0","app")},7892:(et,De,M)=>{"use strict";M.d(De,{Z:()=>d.Z});var d=M(6293);d.Z.registerVersion("firebase","9.6.0","app-compat")},4802:(et,De,M)=>{"use strict";M.r(De);var d=M(8239),ne=M(6293),P=M(4213),ve=M(1572),ue=M(4762),be=M(3855),le=M(1177);const Ye=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ae=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ye=new be.Yd("@firebase/auth");function Ae(v,...p){ye.logLevel<=be.in.ERROR&&ye.error(`Auth (${ve.SDK_VERSION}): ${v}`,...p)}function me(v,...p){throw Xe(v,...p)}function Be(v,...p){return Xe(v,...p)}function xe(v,p,g){const w=Object.assign(Object.assign({},Ve()),{[p]:g});return new P.LL("auth","Firebase",w).create(p,{appName:v.name})}function Ze(v,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&me(v,"argument-error"),xe(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(v,...p){if("string"!=typeof v){const g=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(g,...w)}return ae.create(v,...p)}function de(v,p,...g){if(!v)throw Xe(p,...g)}function O(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Ae(p),new Error(p)}function L(v,p){v||O(p)}const q=new Map;function Y(v){L(v instanceof Function,"Expected a class definition");let p=q.get(v);return p?(L(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,q.set(v,p),p)}function je(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function yt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class nt{constructor(p,g){this.shortDelay=p,this.longDelay=g,L(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(yt()||(0,P.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Vt(v,p){L(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class kn{static initialize(p,g,w){this.fetchImpl=p,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void O("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void O("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void O("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Jt=new nt(3e4,6e4);function Gt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function It(v,p,g,w){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,d.Z)(function*(v,p,g,w,I={}){return Ir(v,I,()=>{let R={},X={};w&&("GET"===p?X=w:R={body:JSON.stringify(w)});const Ee=(0,P.xO)(Object.assign({key:v.config.apiKey},X)).slice(1),Ke=new(kn.headers());return Ke.set("Content-Type","application/json"),Ke.set("X-Client-Version",v._getSdkClientVersion()),v.languageCode&&Ke.set("X-Firebase-Locale",v.languageCode),kn.fetch()(Br(v,v.config.apiHost,g,Ee),Object.assign({method:p,headers:Ke,referrerPolicy:"no-referrer"},R))})})).apply(this,arguments)}function Ir(v,p,g){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(v,p,g){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},qn),p);try{const I=new Ur(v),R=yield Promise.race([g(),I.promise]);I.clearNetworkTimeout();const X=yield R.json();if("needConfirmation"in X)throw mr(v,"account-exists-with-different-credential",X);if(R.ok&&!("errorMessage"in X))return X;{const Ee=R.ok?X.errorMessage:X.error.message,[Ke,st]=Ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ke)throw mr(v,"credential-already-in-use",X);if("EMAIL_EXISTS"===Ke)throw mr(v,"email-already-in-use",X);const Ot=w[Ke]||Ke.toLowerCase().replace(/[_\s]+/g,"-");if(st)throw xe(v,Ot,st);me(v,Ot)}}catch(I){if(I instanceof P.ZR)throw I;me(v,"network-request-failed")}})).apply(this,arguments)}function Bn(v,p,g,w){return ei.apply(this,arguments)}function ei(){return(ei=(0,d.Z)(function*(v,p,g,w,I={}){const R=yield It(v,p,g,w,I);return"mfaPendingCredential"in R&&me(v,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Br(v,p,g,w){const I=`${p}${g}?${w}`;return v.config.emulator?Vt(v.config,I):`${v.config.apiScheme}://${I}`}class Ur{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Be(this.auth,"timeout")),Jt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mr(v,p,g){const w={appName:v.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const I=Be(v,p,w);return I.customData._tokenResponse=g,I}function lt(){return(lt=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function gn(v,p){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ar(v,p){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _t(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function qt(){return(qt=(0,d.Z)(function*(v,p=!1){const g=(0,P.m9)(v),w=yield g.getIdToken(p),I=Qe(w);de(I&&I.exp&&I.auth_time&&I.iat,g.auth,"internal-error");const R="object"==typeof I.firebase?I.firebase:void 0,X=null==R?void 0:R.sign_in_provider;return{claims:I,token:w,authTime:_t(sn(I.auth_time)),issuedAtTime:_t(sn(I.iat)),expirationTime:_t(sn(I.exp)),signInProvider:X||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function sn(v){return 1e3*Number(v)}function Qe(v){const[p,g,w]=v.split(".");if(void 0===p||void 0===g||void 0===w)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const I=(0,P.tV)(g);return I?JSON.parse(I):(Ae("Failed to decode base64 JWT payload"),null)}catch(I){return Ae("Caught error parsing JWT payload as JSON",I),null}}function Sr(v,p){return ti.apply(this,arguments)}function ti(){return(ti=(0,d.Z)(function*(v,p,g=!1){if(g)return p;try{return yield p}catch(w){throw w instanceof P.ZR&&Mr(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Mr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Xt{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const I=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,I)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),w)}iteration(){var p=this;return(0,d.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&p.schedule(!0))}p.schedule()})()}}class _r{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=_t(this.lastLoginAt),this.creationTime=_t(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ni(v){return z.apply(this,arguments)}function z(){return(z=(0,d.Z)(function*(v){var p;const g=v.auth,w=yield v.getIdToken(),I=yield Sr(v,ar(g,{idToken:w}));de(null==I?void 0:I.users.length,g,"internal-error");const R=I.users[0];v._notifyReloadListener(R);const X=(null===(p=R.providerUserInfo)||void 0===p?void 0:p.length)?oe(R.providerUserInfo):[],Ee=Ne(v.providerData,X),Ot=!!v.isAnonymous&&!(v.email&&R.passwordHash||(null==Ee?void 0:Ee.length)),Et={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:Ee,metadata:new _r(R.createdAt,R.lastLoginAt),isAnonymous:Ot};Object.assign(v,Et)})).apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*(v){const p=(0,P.m9)(v);yield ni(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ne(v,p){return[...v.filter(w=>!p.some(I=>I.providerId===w.providerId)),...p]}function oe(v){return v.map(p=>{var{providerId:g}=p,w=(0,ue._T)(p,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function ft(){return(ft=(0,d.Z)(function*(v,p){const g=yield Ir(v,{},()=>{const w=(0,P.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:I,apiKey:R}=v.config,X=Br(v,I,"/v1/token",`key=${R}`);return kn.fetch()(X,{method:"POST",headers:{"X-Client-Version":v._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:w})});return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){de(p.idToken,"internal-error"),de(void 0!==p.idToken,"internal-error"),de(void 0!==p.refreshToken,"internal-error");const g="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function(v){const p=Qe(v);return de(p,"internal-error"),de(void 0!==p.exp,"internal-error"),de(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var w=this;return(0,d.Z)(function*(){return de(!w.accessToken||w.refreshToken,p,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var w=this;return(0,d.Z)(function*(){const{accessToken:I,refreshToken:R,expiresIn:X}=yield function(v,p){return ft.apply(this,arguments)}(p,g);w.updateTokensAndExpiration(I,R,Number(X))})()}updateTokensAndExpiration(p,g,w){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,g){const{refreshToken:w,accessToken:I,expirationTime:R}=g,X=new zt;return w&&(de("string"==typeof w,"internal-error",{appName:p}),X.refreshToken=w),I&&(de("string"==typeof I,"internal-error",{appName:p}),X.accessToken=I),R&&(de("number"==typeof R,"internal-error",{appName:p}),X.expirationTime=R),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return O("not implemented")}}function Rn(v,p){de("string"==typeof v||void 0===v,"internal-error",{appName:p})}class dn{constructor(p){var{uid:g,auth:w,stsTokenManager:I}=p,R=(0,ue._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=I,this.accessToken=I.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.metadata=new _r(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,d.Z)(function*(){const w=yield Sr(g,g.stsTokenManager.getToken(g.auth,p));return de(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(p){return function(v){return qt.apply(this,arguments)}(this,p)}reload(){return function(v){return Z.apply(this,arguments)}(this)}_assign(p){this!==p&&(de(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new dn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var w=this;return(0,d.Z)(function*(){let I=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),I=!0),g&&(yield ni(w)),yield w.auth._persistUserIfCurrent(w),I&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,d.Z)(function*(){const g=yield p.getIdToken();return yield Sr(p,function(v,p){return lt.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var w,I,R,X,Ee,Ke,st,Ot;const Et=null!==(w=g.displayName)&&void 0!==w?w:void 0,Dr=null!==(I=g.email)&&void 0!==I?I:void 0,to=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Ki=null!==(X=g.photoURL)&&void 0!==X?X:void 0,rc=null!==(Ee=g.tenantId)&&void 0!==Ee?Ee:void 0,Md=null!==(Ke=g._redirectEventId)&&void 0!==Ke?Ke:void 0,Xf=null!==(st=g.createdAt)&&void 0!==st?st:void 0,Rd=null!==(Ot=g.lastLoginAt)&&void 0!==Ot?Ot:void 0,{uid:ta,emailVerified:xd,isAnonymous:ep,providerData:ic,stsTokenManager:Od}=g;de(ta&&Od,p,"internal-error");const Bm=zt.fromJSON(this.name,Od);de("string"==typeof ta,p,"internal-error"),Rn(Et,p.name),Rn(Dr,p.name),de("boolean"==typeof xd,p,"internal-error"),de("boolean"==typeof ep,p,"internal-error"),Rn(to,p.name),Rn(Ki,p.name),Rn(rc,p.name),Rn(Md,p.name),Rn(Xf,p.name),Rn(Rd,p.name);const Um=new dn({uid:ta,auth:p,email:Dr,emailVerified:xd,displayName:Et,isAnonymous:ep,photoURL:Ki,phoneNumber:to,tenantId:rc,stsTokenManager:Bm,createdAt:Xf,lastLoginAt:Rd});return ic&&Array.isArray(ic)&&(Um.providerData=ic.map(na=>Object.assign({},na))),Md&&(Um._redirectEventId=Md),Um}static _fromIdTokenResponse(p,g,w=!1){return(0,d.Z)(function*(){const I=new zt;I.updateFromServerResponse(g);const R=new dn({uid:g.localId,auth:p,stsTokenManager:I,isAnonymous:w});return yield ni(R),R})()}}const Pt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,w){var I=this;return(0,d.Z)(function*(){I.storage[g]=w})()}_get(g){var w=this;return(0,d.Z)(function*(){const I=w.storage[g];return void 0===I?null:I})()}_remove(g){var w=this;return(0,d.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return v.type="NONE",v})();function Cn(v,p,g){return`firebase:${v}:${p}:${g}`}class lr{constructor(p,g,w){this.persistence=p,this.auth=g,this.userKey=w;const{config:I,name:R}=this.auth;this.fullUserKey=Cn(this.userKey,I.apiKey,R),this.fullPersistenceKey=Cn("persistence",I.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,d.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?dn._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,d.Z)(function*(){if(g.persistence===p)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,w="authUser"){return(0,d.Z)(function*(){if(!g.length)return new lr(Y(Pt),p,w);const I=(yield Promise.all(g.map(function(){var st=(0,d.Z)(function*(Ot){if(yield Ot._isAvailable())return Ot});return function(Ot){return st.apply(this,arguments)}}()))).filter(st=>st);let R=I[0]||Y(Pt);const X=Cn(w,p.config.apiKey,p.name);let Ee=null;for(const st of g)try{const Ot=yield st._get(X);if(Ot){const Et=dn._fromJSON(p,Ot);st!==R&&(Ee=Et),R=st;break}}catch(Ot){}const Ke=I.filter(st=>st._shouldAllowMigration);return R._shouldAllowMigration&&Ke.length?(R=Ke[0],Ee&&(yield R._set(X,Ee.toJSON())),yield Promise.all(g.map(function(){var st=(0,d.Z)(function*(Ot){if(Ot!==R)try{yield Ot._remove(X)}catch(Et){}});return function(Ot){return st.apply(this,arguments)}}())),new lr(R,p,w)):new lr(R,p,w)})()}}function Mi(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ri(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Fo(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Hr(p))return"Blackberry";if(Rr(p))return"Webos";if(Hi(p))return"Safari";if((p.includes("chrome/")||Ds(p))&&!p.includes("edge/"))return"Chrome";if(Tn(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Fo(v=(0,P.z$)()){return/firefox\//i.test(v)}function Hi(v=(0,P.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Ds(v=(0,P.z$)()){return/crios\//i.test(v)}function Ri(v=(0,P.z$)()){return/iemobile/i.test(v)}function Tn(v=(0,P.z$)()){return/android/i.test(v)}function Hr(v=(0,P.z$)()){return/blackberry/i.test(v)}function Rr(v=(0,P.z$)()){return/webos/i.test(v)}function ln(v=(0,P.z$)()){return/iphone|ipad|ipod/i.test(v)}function K(v=(0,P.z$)()){return ln(v)||Tn(v)||Rr(v)||Hr(v)||/windows phone/i.test(v)||Ri(v)}function $e(v,p=[]){let g;switch(v){case"Browser":g=Mi((0,P.z$)());break;case"Worker":g=`${Mi((0,P.z$)())}-${v}`;break;default:g=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ve.SDK_VERSION}/${w}`}class qe{constructor(p,g){this.app=p,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $(this),this.idTokenSubscription=new $(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ae,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(p,g){var w=this;return g&&(this._popupRedirectResolver=Y(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var I,R;w._deleted||(w.persistenceManager=yield lr.create(w,p),!w._deleted&&((null===(I=w._popupRedirectResolver)||void 0===I?void 0:I._shouldInitProactively)&&(yield w._popupRedirectResolver._initialize(w)),yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,d.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g)}})()}initializeCurrentUser(p){var g=this;return(0,d.Z)(function*(){var w;let I=yield g.assertedPersistence.getCurrentUser();if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,X=null==I?void 0:I._redirectEventId,Ee=yield g.tryRedirectSignIn(p);(!R||R===X)&&(null==Ee?void 0:Ee.user)&&(I=Ee.user)}return I?I._redirectEventId?(de(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===I._redirectEventId?g.directlySetCurrentUser(I):g.reloadAndSetCurrentUserOrClear(I)):g.reloadAndSetCurrentUserOrClear(I):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var g=this;return(0,d.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch(I){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,d.Z)(function*(){try{yield ni(p)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,d.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,d.Z)(function*(){const w=p?(0,P.m9)(p):null;return w&&de(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(p){var g=this;return(0,d.Z)(function*(){if(!g._deleted)return p&&de(g.tenantId===p.tenantId,g,"tenant-id-mismatch"),g.queue((0,d.Z)(function*(){yield g.directlySetCurrentUser(p),g.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,d.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(Y(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new P.LL("auth","Firebase",p())}onAuthStateChanged(p,g,w){return this.registerStateListener(this.authStateSubscription,p,g,w)}onIdTokenChanged(p,g,w){return this.registerStateListener(this.idTokenSubscription,p,g,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var w=this;return(0,d.Z)(function*(){const I=yield w.getOrInitRedirectPersistenceManager(g);return null===p?I.removeCurrentUser():I.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const w=p&&Y(p)||g._popupRedirectResolver;de(w,g,"argument-error"),g.redirectPersistenceManager=yield lr.create(g,[Y(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,d.Z)(function*(){var w,I;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===p?g._currentUser:(null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,d.Z)(function*(){if(p===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,w,I){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),X=this._isInitialized?Promise.resolve():this._initializationPromise;return de(X,this,"internal-error"),X.then(()=>R(this.currentUser)),"function"==typeof g?p.addObserver(g,w,I):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==p&&(g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh()),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=$e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function ct(v){return(0,P.m9)(v)}class ${constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ke(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function In(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class vn{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return O("not implemented")}_getIdTokenResponse(p){return O("not implemented")}_linkToIdToken(p,g){return O("not implemented")}_getReauthenticationResolver(p){return O("not implemented")}}function Sn(v,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:resetPassword",Gt(v,p))})).apply(this,arguments)}function Es(v,p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function mi(v,p){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:update",Gt(v,p))})).apply(this,arguments)}function Ws(){return(Ws=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signInWithPassword",Gt(v,p))})).apply(this,arguments)}function is(v,p){return El.apply(this,arguments)}function El(){return(El=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:sendOobCode",Gt(v,p))})).apply(this,arguments)}function Ts(v,p){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,d.Z)(function*(v,p){return is(v,p)})).apply(this,arguments)}function po(v,p){return ir.apply(this,arguments)}function ir(){return(ir=(0,d.Z)(function*(v,p){return is(v,p)})).apply(this,arguments)}function Cl(v,p){return _i.apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(v,p){return is(v,p)})).apply(this,arguments)}function $i(v,p){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,d.Z)(function*(v,p){return is(v,p)})).apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,p))})).apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signInWithEmailLink",Gt(v,p))})).apply(this,arguments)}class $c extends vn{constructor(p,g,w,I=null){super("password",w),this._email=p,this._password=g,this._tenantId=I}static _fromEmailAndPassword(p,g){return new $c(p,g,"password")}static _fromEmailAndCode(p,g,w=null){return new $c(p,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function(v,p){return Ws.apply(this,arguments)}(p,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function(v,p){return Lo.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:me(p,"internal-error")}})()}_linkToIdToken(p,g){var w=this;return(0,d.Z)(function*(){switch(w.signInMethod){case"password":return Es(p,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function(v,p){return go.apply(this,arguments)}(p,{idToken:g,email:w._email,oobCode:w._password});default:me(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ur(v,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signInWithIdp",Gt(v,p))})).apply(this,arguments)}class Is extends vn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Is(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):me("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:I}=g,R=(0,ue._T)(g,["providerId","signInMethod"]);if(!w||!I)return null;const X=new Is(w,I);return X.idToken=R.idToken||void 0,X.accessToken=R.accessToken||void 0,X.secret=R.secret,X.nonce=R.nonce,X.pendingToken=R.pendingToken||null,X}_getIdTokenResponse(p){return ur(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,ur(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,ur(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,P.xO)(g)}return p}}function rm(v,p){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:sendVerificationCode",Gt(v,p))})).apply(this,arguments)}function xu(){return(xu=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,p))})).apply(this,arguments)}function Ou(){return(Ou=(0,d.Z)(function*(v,p){const g=yield Bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,p));if(g.temporaryProof)throw mr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const qc={USER_NOT_FOUND:"user-not-found"};function af(){return(af=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signInWithPhoneNumber",Gt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),qc)})).apply(this,arguments)}class Ta extends vn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Ta({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Ta({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function(v,p){return xu.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function(v,p){return Ou.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function(v,p){return af.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:w,verificationCode:I}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:w,code:I}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:w,phoneNumber:I,temporaryProof:R}=p;return w||g||I||R?new Ta({verificationId:g,verificationCode:w,phoneNumber:I,temporaryProof:R}):null}}class Vo{constructor(p){var g,w,I,R,X,Ee;const Ke=(0,P.zd)((0,P.pd)(p)),st=null!==(g=Ke.apiKey)&&void 0!==g?g:null,Ot=null!==(w=Ke.oobCode)&&void 0!==w?w:null,Et=function(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(I=Ke.mode)&&void 0!==I?I:null);de(st&&Ot&&Et,"argument-error"),this.apiKey=st,this.operation=Et,this.code=Ot,this.continueUrl=null!==(R=Ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(X=Ke.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(Ee=Ke.tenantId)&&void 0!==Ee?Ee:null}static parseLink(p){const g=function(v){const p=(0,P.zd)((0,P.pd)(v)).link,g=p?(0,P.zd)((0,P.pd)(p)).deep_link_id:null,w=(0,P.zd)((0,P.pd)(v)).deep_link_id;return(w?(0,P.zd)((0,P.pd)(w)).link:null)||w||g||p||v}(p);try{return new Vo(g)}catch(w){return null}}}let Il=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,w){return $c._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const I=Vo.parseLink(w);return de(I,"argument-error"),$c._fromEmailAndCode(g,I.code,I.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class qs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ia extends qs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class br extends Ia{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return de("providerId"in g&&"signInMethod"in g,"argument-error"),Is._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return de(p.idToken||p.accessToken,"argument-error"),Is._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return br.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return br.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:I,pendingToken:R,nonce:X,providerId:Ee}=p;if(!w&&!I&&!g&&!R||!Ee)return null;try{return new br(Ee)._credential({idToken:g,accessToken:w,nonce:X,pendingToken:R})}catch(Ke){return null}}}let Sa=(()=>{class v extends Ia{constructor(){super("facebook.com")}static credential(g){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),xi=(()=>{class v extends Ia{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:I}=g;if(!w&&!I)return null;try{return v.credential(w,I)}catch(R){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Zc=(()=>{class v extends Ia{constructor(){super("github.com")}static credential(g){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class cr extends vn{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return ur(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,ur(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,ur(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:I,pendingToken:R}=g;return w&&I&&R&&w===I?new cr(w,R):null}static _create(p,g){return new cr(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Aa extends qs{constructor(p){de(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Aa.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Aa.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=cr.fromJSON(p);return de(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:w}=p;if(!g||!w)return null;try{return cr._create(w,g)}catch(I){return null}}}let lf=(()=>{class v extends Ia{constructor(){super("twitter.com")}static credential(g,w){return Is._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:I}=g;if(!w||!I)return null;try{return v.credential(w,I)}catch(R){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function B(v,p){return k.apply(this,arguments)}function k(){return(k=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signUp",Gt(v,p))})).apply(this,arguments)}class j{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,w,I=!1){return(0,d.Z)(function*(){const R=yield dn._fromIdTokenResponse(p,w,I),X=ge(w);return new j({user:R,providerId:X,_tokenResponse:w,operationType:g})})()}static _forOperation(p,g,w){return(0,d.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const I=ge(w);return new j({user:p,providerId:I,_tokenResponse:w,operationType:g})})()}}function ge(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function We(){return(We=(0,d.Z)(function*(v){var p;const g=ct(v);if(yield g._initializationPromise,null===(p=g.currentUser)||void 0===p?void 0:p.isAnonymous)return new j({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield B(g,{returnSecureToken:!0}),I=yield j._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(I.user),I})).apply(this,arguments)}class rt extends P.ZR{constructor(p,g,w,I){var R;super(g.code,g.message),this.operationType=w,this.user=I,Object.setPrototypeOf(this,rt.prototype),this.customData={appName:p.name,tenantId:null!==(R=p.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,g,w,I){return new rt(p,g,w,I)}}function Rt(v,p,g,w){return("reauthenticate"===p?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?rt._fromErrorAndOperation(v,R,p,w):R})}function on(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function wn(){return(wn=(0,d.Z)(function*(v,p){const g=(0,P.m9)(v);yield Hn(!0,g,p);const{providerUserInfo:w}=yield gn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),I=on(w||[]);return g.providerData=g.providerData.filter(R=>I.has(R.providerId)),I.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function $r(v,p){return an.apply(this,arguments)}function an(){return(an=(0,d.Z)(function*(v,p,g=!1){const w=yield Sr(v,p._linkToIdToken(v.auth,yield v.getIdToken()),g);return j._forOperation(v,"link",w)})).apply(this,arguments)}function Hn(v,p,g){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,d.Z)(function*(v,p,g){yield ni(p);const I=!1===v?"provider-already-linked":"no-such-provider";de(on(p.providerData).has(g)===v,p.auth,I)})).apply(this,arguments)}function _o(v,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(v,p,g=!1){const{auth:w}=v,I="reauthenticate";try{const R=yield Sr(v,Rt(w,I,p,v),g);de(R.idToken,w,"internal-error");const X=Qe(R.idToken);de(X,w,"internal-error");const{sub:Ee}=X;return de(v.uid===Ee,w,"user-mismatch"),j._forOperation(v,I,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&me(w,"user-mismatch"),R}})).apply(this,arguments)}function zs(v,p){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(v,p,g=!1){const w="signIn",I=yield Rt(v,w,p),R=yield j._fromIdTokenResponse(v,w,I);return g||(yield v._updateCurrentUser(R.user)),R})).apply(this,arguments)}function ss(v,p){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(v,p){return zs(ct(v),p)})).apply(this,arguments)}function Pu(v,p){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,d.Z)(function*(v,p){const g=(0,P.m9)(v);return yield Hn(!1,g,p.providerId),$r(g,p)})).apply(this,arguments)}function sm(v,p){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(v,p){return _o((0,P.m9)(v),p)})).apply(this,arguments)}function lv(v,p){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,d.Z)(function*(v,p){return Bn(v,"POST","/v1/accounts:signInWithCustomToken",Gt(v,p))})).apply(this,arguments)}function om(){return(om=(0,d.Z)(function*(v,p){const g=ct(v),w=yield lv(g,{token:p,returnSecureToken:!0}),I=yield j._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(I.user),I})).apply(this,arguments)}class Yc{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?uf._fromServerResponse(p,g):me(p,"internal-error")}}class uf extends Yc{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new uf(g)}}function Lu(v,p,g){var w;de((null===(w=g.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),de(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(de(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(de(g.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function cf(){return(cf=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v),I={requestType:"PASSWORD_RESET",email:p};g&&Lu(w,I,g),yield po(w,I)})).apply(this,arguments)}function Pe(){return(Pe=(0,d.Z)(function*(v,p,g){yield Sn((0,P.m9)(v),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(v,p){yield mi((0,P.m9)(v),{oobCode:p})})).apply(this,arguments)}function Yn(v,p){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,d.Z)(function*(v,p){const g=(0,P.m9)(v),w=yield Sn(g,{oobCode:p}),I=w.requestType;switch(de(I,g,"internal-error"),I){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(w.mfaInfo,g,"internal-error");default:de(w.email,g,"internal-error")}let R=null;return w.mfaInfo&&(R=Yc._fromServerResponse(ct(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:I}})).apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(v,p){const{data:g}=yield Yn((0,P.m9)(v),p);return g.email})).apply(this,arguments)}function Na(){return(Na=(0,d.Z)(function*(v,p,g){const w=ct(v),I=yield B(w,{returnSecureToken:!0,email:p,password:g}),R=yield j._fromIdTokenResponse(w,"signIn",I);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v),I={requestType:"EMAIL_SIGNIN",email:p};de(g.handleCodeInApp,w,"argument-error"),g&&Lu(w,I,g),yield Cl(w,I)})).apply(this,arguments)}function As(){return(As=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v),I=Il.credentialWithLink(p,g||je());return de(I._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ss(w,I)})).apply(this,arguments)}function cm(v,p){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:createAuthUri",Gt(v,p))})).apply(this,arguments)}function dm(){return(dm=(0,d.Z)(function*(v,p){const w={identifier:p,continueUri:yt()?je():"http://localhost"},{signinMethods:I}=yield cm((0,P.m9)(v),w);return I||[]})).apply(this,arguments)}function Vu(){return(Vu=(0,d.Z)(function*(v,p){const g=(0,P.m9)(v),I={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Lu(g.auth,I,p);const{email:R}=yield Ts(g.auth,I);R!==v.email&&(yield v.reload())})).apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};g&&Lu(w.auth,R,g);const{email:X}=yield $i(w.auth,R);X!==v.email&&(yield v.reload())})).apply(this,arguments)}function df(v,p){return ed.apply(this,arguments)}function ed(){return(ed=(0,d.Z)(function*(v,p){return It(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ff(){return(ff=(0,d.Z)(function*(v,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const w=(0,P.m9)(v),R={idToken:yield w.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},X=yield Sr(w,df(w.auth,R));w.displayName=X.displayName||null,w.photoURL=X.photoUrl||null;const Ee=w.providerData.find(({providerId:Ke})=>"password"===Ke);Ee&&(Ee.displayName=w.displayName,Ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(X)})).apply(this,arguments)}function pf(v,p,g){return nd.apply(this,arguments)}function nd(){return(nd=(0,d.Z)(function*(v,p,g){const{auth:w}=v,R={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(R.email=p),g&&(R.password=g);const X=yield Sr(v,Es(w,R));yield v._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class Ml{constructor(p,g,w={}){this.isNewUser=p,this.providerId=g,this.profile=w}}class Uu extends Ml{constructor(p,g,w,I){super(p,g,w),this.username=I}}class PD extends Ml{constructor(p,g){super(p,"facebook.com",g)}}class fm extends Uu{constructor(p,g){super(p,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class bi extends Ml{constructor(p,g){super(p,"google.com",g)}}class Uo extends Uu{constructor(p,g,w){super(p,"twitter.com",g,w)}}function Qn(v){const{user:p,_tokenResponse:g}=v;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function(v){var p,g;if(!v)return null;const{providerId:w}=v,I=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},R=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const X=null===(g=null===(p=Qe(v.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(X)return new Ml(R,"anonymous"!==X&&"custom"!==X?X:null)}if(!w)return null;switch(w){case"facebook.com":return new PD(R,I);case"github.com":return new fm(R,I);case"google.com":return new bi(R,I);case"twitter.com":return new Uo(R,I,v.screenName||null);case"custom":case"anonymous":return new Ml(R,null);default:return new Ml(R,w,I)}}(g)}class Ys{constructor(p,g){this.type=p,this.credential=g}static _fromIdtoken(p){return new Ys("enroll",p)}static _fromMfaPendingCredential(p){return new Ys("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,w;if(null==p?void 0:p.multiFactorSession){if(null===(g=p.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Ys._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(w=p.multiFactorSession)||void 0===w?void 0:w.idToken)return Ys._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ju{constructor(p,g,w){this.session=p,this.hints=g,this.signInResolver=w}static _fromError(p,g){const w=ct(p),I=g.customData._serverResponse,R=(I.mfaInfo||[]).map(Ee=>Yc._fromServerResponse(w,Ee));de(I.mfaPendingCredential,w,"internal-error");const X=Ys._fromMfaPendingCredential(I.mfaPendingCredential);return new ju(X,R,function(){var Ee=(0,d.Z)(function*(Ke){const st=yield Ke._process(w,X);delete I.mfaInfo,delete I.mfaPendingCredential;const Ot=Object.assign(Object.assign({},I),{idToken:st.idToken,refreshToken:st.refreshToken});switch(g.operationType){case"signIn":const Et=yield j._fromIdTokenResponse(w,g.operationType,Ot);return yield w._updateCurrentUser(Et.user),Et;case"reauthenticate":return de(g.user,w,"internal-error"),j._forOperation(g.user,g.operationType,Ot);default:me(w,"internal-error")}});return function(Ke){return Ee.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,d.Z)(function*(){return g.signInResolver(p)})()}}function UD(v,p){return It(v,"POST","/v2/accounts/mfaEnrollment:start",Gt(v,p))}class mf{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Yc._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new mf(p)}getSession(){var p=this;return(0,d.Z)(function*(){return Ys._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,g){var w=this;return(0,d.Z)(function*(){const I=p,R=yield w.getSession(),X=yield Sr(w.user,I._process(w.user.auth,R,g));return yield w.user._updateTokensIfNecessary(X),w.user.reload()})()}unenroll(p){var g=this;return(0,d.Z)(function*(){const w="string"==typeof p?p:p.uid,I=yield g.user.getIdToken(),R=yield Sr(g.user,function(v,p){return It(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(v,p))}(g.user.auth,{idToken:I,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:X})=>X!==w),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(X){if("auth/user-token-expired"!==X.code)throw X}})()}}const _f=new WeakMap,xl="__sak";class hv{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(xl,"1"),this.storage.removeItem(xl),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const $u=(()=>{class v extends hv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const v=(0,P.z$)();return Hi(v)||ln(v)}()&&function(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=K(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const I=this.storage.getItem(w),R=this.localCache[w];I!==R&&g(w,R,I)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((Ee,Ke,st)=>{this.notifyListeners(Ee,st)});const I=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ee=this.storage.getItem(I);if(g.newValue!==Ee)null!==g.newValue?this.storage.setItem(I,g.newValue):this.storage.removeItem(I);else if(this.localCache[I]===g.newValue&&!w)return}const R=()=>{const Ee=this.storage.getItem(I);!w&&this.localCache[I]===Ee||this.notifyListeners(I,Ee)},X=this.storage.getItem(I);(0,P.w1)()&&10===document.documentMode&&X!==g.newValue&&g.newValue!==g.oldValue?setTimeout(R,10):R()}notifyListeners(g,w){this.localCache[g]=w;const I=this.listeners[g];if(I)for(const R of Array.from(I))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,I)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:I}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var I=()=>super._set,R=this;return(0,d.Z)(function*(){yield I().call(R,g,w),R.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,I=this;return(0,d.Z)(function*(){const R=yield w().call(I,g);return I.localCache[g]=JSON.stringify(R),R})()}_remove(g){var w=()=>super._remove,I=this;return(0,d.Z)(function*(){yield w().call(I,g),delete I.localCache[g]})()}}return v.type="LOCAL",v})(),os=(()=>{class v extends hv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return v.type="SESSION",v})();let pv=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(R=>R.isListeningto(g));if(w)return w;const I=new v(g);return this.receivers.push(I),I}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,d.Z)(function*(){const I=g,{eventId:R,eventType:X,data:Ee}=I.data,Ke=w.handlersMap[X];if(!(null==Ke?void 0:Ke.size))return;I.ports[0].postMessage({status:"ack",eventId:R,eventType:X});const st=Array.from(Ke).map(function(){var Et=(0,d.Z)(function*(Dr){return Dr(I.origin,Ee)});return function(Dr){return Et.apply(this,arguments)}}()),Ot=yield function(v){return Promise.all(v.map(function(){var p=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return p.apply(this,arguments)}}()))}(st);I.ports[0].postMessage({status:"done",eventId:R,eventType:X,response:Ot})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function yo(v="",p=10){let g="";for(let w=0;w<p;w++)g+=Math.floor(10*Math.random());return v+g}class gv{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,w=50){var I=this;return(0,d.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let X,Ee;return new Promise((Ke,st)=>{const Ot=yo("",20);R.port1.start();const Et=setTimeout(()=>{st(new Error("unsupported_event"))},w);Ee={messageChannel:R,onMessage(Dr){const to=Dr;if(to.data.eventId===Ot)switch(to.data.status){case"ack":clearTimeout(Et),X=setTimeout(()=>{st(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),Ke(to.data.response);break;default:clearTimeout(Et),clearTimeout(X),st(new Error("invalid_response"))}}},I.handlers.add(Ee),R.port1.addEventListener("message",Ee.onMessage),I.target.postMessage({eventType:p,eventId:Ot,data:g},[R.port2])}).finally(()=>{Ee&&I.removeMessageHandler(Ee)})})()}}function Jn(){return window}function Gu(){return void 0!==Jn().WorkerGlobalScope&&"function"==typeof Jn().importScripts}function bf(){return(bf=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const $n="firebaseLocalStorageDb",pt="firebaseLocalStorage",xn="fbase_key";class Un{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function An(v,p){return v.transaction([pt],p?"readwrite":"readonly").objectStore(pt)}function sd(){const v=indexedDB.open($n,1);return new Promise((p,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(pt,{keyPath:xn})}catch(I){g(I)}}),v.addEventListener("success",(0,d.Z)(function*(){const w=v.result;w.objectStoreNames.contains(pt)?p(w):(w.close(),yield function(){const v=indexedDB.deleteDatabase($n);return new Un(v).toPromise()}(),p(yield sd()))}))})}function wf(v,p,g){return od.apply(this,arguments)}function od(){return(od=(0,d.Z)(function*(v,p,g){const w=An(v,!0).put({[xn]:p,value:g});return new Un(w).toPromise()})).apply(this,arguments)}function Ef(){return(Ef=(0,d.Z)(function*(v,p){const g=An(v,!1).get(p),w=yield new Un(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function xa(v,p){const g=An(v,!0).delete(p);return new Un(g).toPromise()}const Ho=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield sd()),g.db})()}_withRetries(g){var w=this;return(0,d.Z)(function*(){let I=0;for(;;)try{const R=yield w._openDb();return yield g(R)}catch(R){if(I++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return Gu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=pv._getInstance(Gu()?self:null),g.receiver._subscribe("keyChanged",function(){var w=(0,d.Z)(function*(I,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(I,R){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,d.Z)(function*(I,R){return["keyChanged"]});return function(I,R){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var w,I;if(g.activeServiceWorker=yield function(){return bf.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new gv(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(I=R[0])||void 0===I?void 0:I.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,d.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(I){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield sd();return yield wf(g,xl,"1"),yield xa(g,xl),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,d.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(R=>wf(R,g,w)),I.localCache[g]=w,I.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,d.Z)(function*(){const I=yield w._withRetries(R=>function(v,p){return Ef.apply(this,arguments)}(R,g));return w.localCache[g]=I,I})()}_remove(g){var w=this;return(0,d.Z)(function*(){return w._withPendingWrite((0,d.Z)(function*(){return yield w._withRetries(I=>xa(I,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const w=yield g._withRetries(X=>{const Ee=An(X,!1).getAll();return new Un(Ee).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const I=[],R=new Set;for(const{fbase_key:X,value:Ee}of w)R.add(X),JSON.stringify(g.localCache[X])!==JSON.stringify(Ee)&&(g.notifyListeners(X,Ee),I.push(X));for(const X of Object.keys(g.localCache))g.localCache[X]&&!R.has(X)&&(g.notifyListeners(X,null),I.push(X));return I})()}notifyListeners(g,w){this.localCache[g]=w;const I=this.listeners[g];if(I)for(const R of Array.from(I))R(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Cf(v,p){return It(v,"POST","/v2/accounts/mfaSignIn:start",Gt(v,p))}function Oa(){return(Oa=(0,d.Z)(function*(v){return(yield It(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $o(v){return new Promise((p,g)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=I=>{const R=Be("internal-error");R.customData=I,g(R)},w.type="text/javascript",w.charset="UTF-8",function(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function ka(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Ol=1e12;class qi{constructor(p){this.auth=p,this.counter=Ol,this._widgets=new Map}render(p,g){const w=this.counter;return this._widgets.set(w,new bo(p,this.auth.name,g||{})),this.counter++,w}reset(p){var g;const w=p||Ol;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(p){var g;return(null===(g=this._widgets.get(p||Ol))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,d.Z)(function*(){var w;return null===(w=g._widgets.get(p||Ol))||void 0===w||w.execute(),""})()}}class bo{constructor(p,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const I="string"==typeof p?document.getElementById(p):p;de(I,"argument-error",{appName:g}),this.container=I,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(v){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<50;w++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}();const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ms=ka("rcb"),_v=new nt(3e4,6e4);class Xn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Jn().grecaptcha}load(p,g=""){return de((v=g).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v),p,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Jn().grecaptcha):new Promise((w,I)=>{const R=Jn().setTimeout(()=>{I(Be(p,"network-request-failed"))},_v.get());Jn()[Ms]=()=>{Jn().clearTimeout(R),delete Jn()[Ms];const Ee=Jn().grecaptcha;if(!Ee)return void I(Be(p,"internal-error"));const Ke=Ee.render;Ee.render=(st,Ot)=>{const Et=Ke(st,Ot);return this.counter++,Et},this.hostLanguage=g,w(Ee)},$o(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Ms,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),I(Be(p,"internal-error"))})});var v}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Jn().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dn{load(p){return(0,d.Z)(function*(){return new qi(p)})()}clearedOneInstance(){}}const dr="recaptcha",kl={theme:"light",type:"image"};class WD{constructor(p,g=Object.assign({},kl),w){this.parameters=g,this.type=dr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ct(w),this.isInvisible="invisible"===this.parameters.size,de("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const I="string"==typeof p?document.getElementById(p):p;de(I,this.auth,"argument-error"),this.container=I,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dn:new Xn,this.validateStartingState()}verify(){var p=this;return(0,d.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(g)||new Promise(R=>{const X=Ee=>{!Ee||(p.tokenChangeListeners.delete(X),R(Ee))};p.tokenChangeListeners.add(X),p.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof p)p(g);else if("string"==typeof p){const w=Jn()[p];"function"==typeof w&&w(g)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,d.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,d.Z)(function*(){de(yt()&&!Gu(),p.auth,"internal-error"),yield function(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function(v){return Oa.apply(this,arguments)}(p.auth);de(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class er{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Ta._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function wr(){return(wr=(0,d.Z)(function*(v,p,g){const w=ct(v),I=yield ld(w,p,(0,P.m9)(g));return new er(I,R=>ss(w,R))})).apply(this,arguments)}function wo(){return(wo=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v);yield Hn(!1,w,"phone");const I=yield ld(w.auth,p,(0,P.m9)(g));return new er(I,R=>Pu(w,R))})).apply(this,arguments)}function Sf(){return(Sf=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v),I=yield ld(w.auth,p,(0,P.m9)(g));return new er(I,R=>sm(w,R))})).apply(this,arguments)}function ld(v,p,g){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(v,p,g){var w;const I=yield g.verify();try{let R;if(de("string"==typeof I,v,"argument-error"),de(g.type===dr,v,"argument-error"),R="string"==typeof p?{phoneNumber:p}:p,"session"in R){const X=R.session;if("phoneNumber"in R)return de("enroll"===X.type,v,"internal-error"),(yield UD(v,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:I}})).phoneSessionInfo.sessionInfo;{de("signin"===X.type,v,"internal-error");const Ee=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return de(Ee,v,"missing-multi-factor-info"),(yield Cf(v,{mfaPendingCredential:X.credential,mfaEnrollmentId:Ee,phoneSignInInfo:{recaptchaToken:I}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield rm(v,{phoneNumber:R.phoneNumber,recaptchaToken:I});return X}}finally{g._reset()}})).apply(this,arguments)}function ls(){return(ls=(0,d.Z)(function*(v,p){yield $r((0,P.m9)(v),p)})).apply(this,arguments)}let Pn=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=ct(g)}verifyPhoneNumber(g,w){return ld(this.auth,g,(0,P.m9)(w))}static credential(g,w){return Ta._fromVerification(g,w)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:I}=g;return w&&I?Ta._fromTokenResponse(w,I):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Oi(v,p){return p?Y(p):(de(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class us extends vn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ur(p,this._buildIdpRequest())}_linkToIdToken(p,g){return ur(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return ur(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Af(v){return zs(v.auth,new us(v),v.bypassAuthState)}function qu(v){const{auth:p,user:g}=v;return de(g,p,"internal-error"),_o(g,new us(v),v.bypassAuthState)}function yv(v){return vm.apply(this,arguments)}function vm(){return(vm=(0,d.Z)(function*(v){const{auth:p,user:g}=v;return de(g,p,"internal-error"),$r(g,new us(v),v.bypassAuthState)})).apply(this,arguments)}class Nf{constructor(p,g,w,I,R=!1){this.auth=p,this.resolver=w,this.user=I,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,d.Z)(function*(w,I){p.pendingPromise={resolve:w,reject:I};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(R){p.reject(R)}});return function(w,I){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,d.Z)(function*(){const{urlResponse:w,sessionId:I,postBody:R,tenantId:X,error:Ee,type:Ke}=p;if(Ee)return void g.reject(Ee);const st={auth:g.auth,requestUri:w,sessionId:I,tenantId:X||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ke)(st))}catch(Ot){g.reject(Ot)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Af;case"linkViaPopup":case"linkViaRedirect":return yv;case"reauthViaPopup":case"reauthViaRedirect":return qu;default:me(this.auth,"internal-error")}}resolve(p){L(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){L(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zi=new nt(2e3,1e4);function Wo(){return(Wo=(0,d.Z)(function*(v,p,g){const w=ct(v);Ze(v,p,qs);const I=Oi(w,g);return new xf(w,"signInViaPopup",p,I).executeNotNull()})).apply(this,arguments)}function zu(){return(zu=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v);Ze(w.auth,p,qs);const I=Oi(w.auth,g);return new xf(w.auth,"reauthViaPopup",p,I,w).executeNotNull()})).apply(this,arguments)}function Rf(){return(Rf=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v);Ze(w.auth,p,qs);const I=Oi(w.auth,g);return new xf(w.auth,"linkViaPopup",p,I,w).executeNotNull()})).apply(this,arguments)}let xf=(()=>{class v extends Nf{constructor(g,w,I,R,X){super(g,w,R,X),this.provider=I,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const w=yield g.execute();return de(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,d.Z)(function*(){L(1===g.filter.length,"Popup operations only handle one event");const w=yo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(I=>{g.reject(I)}),g.resolver._isIframeWebStorageSupported(g.auth,I=>{I||g.reject(Be(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,I;this.pollId=(null===(I=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===I?void 0:I.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Zi.get())};g()}}return v.currentPopupAction=null,v})();const ud=new Map;class Pl extends Nf{constructor(p,g,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,d.Z)(function*(){let w=ud.get(g.auth._key());if(!w){try{const R=(yield function(v,p){return Fl.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;w=()=>Promise.resolve(R)}catch(I){w=()=>Promise.reject(I)}ud.set(g.auth._key(),w)}return g.bypassAuthState||ud.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,w=this;return(0,d.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(w,p);if("unknown"!==p.type){if(p.eventId){const I=yield w.auth._redirectUserForId(p.eventId);if(I)return w.user=I,g().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Fl(){return(Fl=(0,d.Z)(function*(v,p){const g=wm(p),w=La(v);if(!(yield w._isAvailable()))return!1;const I="true"===(yield w._get(g));return yield w._remove(g),I})).apply(this,arguments)}function Fa(v,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,d.Z)(function*(v,p){return La(v)._set(wm(p),"true")})).apply(this,arguments)}function La(v){return Y(v._redirectPersistence)}function wm(v){return Cn("pendingRedirect",v.config.apiKey,v.name)}function Ll(){return(Ll=(0,d.Z)(function*(v,p,g){const w=ct(v);Ze(v,p,qs);const I=Oi(w,g);return yield Fa(I,w),I._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function Va(){return(Va=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v);Ze(w.auth,p,qs);const I=Oi(w.auth,g);yield Fa(I,w.auth);const R=yield hd(w);return I._openRedirect(w.auth,p,"reauthViaRedirect",R)})).apply(this,arguments)}function dd(){return(dd=(0,d.Z)(function*(v,p,g){const w=(0,P.m9)(v);Ze(w.auth,p,qs);const I=Oi(w.auth,g);yield Hn(!1,w,p.providerId),yield Fa(I,w.auth);const R=yield hd(w);return I._openRedirect(w.auth,p,"linkViaRedirect",R)})).apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(v,p){return yield ct(v)._initializationPromise,Do(v,p,!1)})).apply(this,arguments)}function Do(v,p){return Of.apply(this,arguments)}function Of(){return(Of=(0,d.Z)(function*(v,p,g=!1){const w=ct(v),I=Oi(w,p),X=yield new Pl(w,I,g).execute();return X&&!g&&(delete X.user._redirectEventId,yield w._persistUserIfCurrent(X.user),yield w._setRedirectUser(null,p)),X})).apply(this,arguments)}function hd(v){return fd.apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(v){const p=yo(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Rs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(g=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wi(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var w;if(p.error&&!wi(p)){const I=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Be(this.auth,I))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const w=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zo(p))}saveEventToCache(p){this.cachedEventUids.add(zo(p)),this.lastProcessedEventTime=Date.now()}}function zo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function wi({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Ua(v){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(v,p={}){return It(v,"GET","/v1/projects",p)})).apply(this,arguments)}const eo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Dm=/^https?/;function pd(){return(pd=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Ua(v);for(const g of p)try{if(Bl(g))return}catch(w){}me(v,"unauthorized-domain")})).apply(this,arguments)}function Bl(v){const p=je(),{protocol:g,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const X=new URL(v);return""===X.hostname&&""===w?"chrome-extension:"===g&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&X.hostname===w}if(!Dm.test(g))return!1;if(eo.test(v))return w===v;const I=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+I+"|"+I+")$","i").test(w)}const Zo=new nt(3e4,6e4);function Ul(){const v=Jn().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let Ko=null;function Dv(v){return Ko=Ko||function(v){return new Promise((p,g)=>{var w,I,R;function X(){Ul(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Ul(),g(Be(v,"network-request-failed"))},timeout:Zo.get()})}if(null===(I=null===(w=Jn().gapi)||void 0===w?void 0:w.iframes)||void 0===I?void 0:I.Iframe)p(gapi.iframes.getContext());else{if(!(null===(R=Jn().gapi)||void 0===R?void 0:R.load)){const Ee=ka("iframefcb");return Jn()[Ee]=()=>{gapi.load?X():g(Be(v,"network-request-failed"))},$o(`https://apis.google.com/js/api.js?onload=${Ee}`)}X()}}).catch(p=>{throw Ko=null,p})}(v),Ko}const Cm=new nt(5e3,15e3),Im={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},md=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kf(v){const p=v.config;de(p.authDomain,v,"auth-domain-config-required");const g=p.emulator?Vt(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:p.apiKey,appName:v.name,v:ve.SDK_VERSION},I=md.get(v.config.apiHost);I&&(w.eid=I);const R=v._getFrameworks();return R.length&&(w.fw=R.join(",")),`${g}?${(0,P.xO)(w).slice(1)}`}function Hl(){return Hl=(0,d.Z)(function*(v){const p=yield Dv(v),g=Jn().gapi;return de(g,v,"internal-error"),p.open({where:document.body,url:kf(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Im,dontclear:!0},w=>new Promise(function(){var I=(0,d.Z)(function*(R,X){yield w.restyle({setHideOnLeave:!1});const Ee=Be(v,"network-request-failed"),Ke=Jn().setTimeout(()=>{X(Ee)},Cm.get());function st(){Jn().clearTimeout(Ke),R(w)}w.ping(st).then(st,()=>{X(Ee)})});return function(R,X){return I.apply(this,arguments)}}()))}),Hl.apply(this,arguments)}const Ev={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function bd(v,p,g,w,I,R){de(v.config.authDomain,v,"auth-domain-config-required"),de(v.config.apiKey,v,"invalid-api-key");const X={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:w,v:ve.SDK_VERSION,eventId:I};if(p instanceof qs){p.setDefaultLanguage(v.languageCode),X.providerId=p.providerId||"",(0,P.xb)(p.getCustomParameters())||(X.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ke,st]of Object.entries(R||{}))X[Ke]=st}if(p instanceof Ia){const Ke=p.getScopes().filter(st=>""!==st);Ke.length>0&&(X.scopes=Ke.join(","))}v.tenantId&&(X.tid=v.tenantId);const Ee=X;for(const Ke of Object.keys(Ee))void 0===Ee[Ke]&&delete Ee[Ke];return`${function({config:v}){return v.emulator?Vt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,P.xO)(Ee).slice(1)}`}const Ff="webStorageSupport";class Gl extends class{constructor(p){this.factorId=p}_process(p,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,w);case"signin":return this._finalizeSignIn(p,g.credential);default:return O("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Gl(p)}_finalizeEnroll(p,g,w){return function(v,p){return It(v,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(v,p))}(p,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function(v,p){return It(v,"POST","/v2/accounts/mfaSignIn:finalize",Gt(v,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Mm=(()=>{class v{constructor(){}static assertion(g){return Gl._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var v,wd="@firebase/auth";class Vf{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(w=>{var I;p((null===(I=w)||void 0===I?void 0:I.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ja(){return window}function Wl(){return Wl=(0,d.Z)(function*(v,p,g){var w;const{BuildInfo:I}=ja();L(p.sessionId,"AuthEvent did not contain a session ID");const R=yield Rm(p.sessionId),X={};return ln()?X.ibi=I.packageName:Tn()?X.apn=I.packageName:me(v,"operation-not-supported-in-this-environment"),I.displayName&&(X.appDisplayName=I.displayName),X.sessionId=R,bd(v,g,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,X)}),Wl.apply(this,arguments)}function ql(){return ql=(0,d.Z)(function*(v){const{BuildInfo:p}=ja(),g={};ln()?g.iosBundleId=p.packageName:Tn()?g.androidPackageName=p.packageName:me(v,"operation-not-supported-in-this-environment"),yield Ua(v,g)}),ql.apply(this,arguments)}function Cd(){return Cd=(0,d.Z)(function*(v,p,g){const{cordova:w}=ja();let I=()=>{};try{yield new Promise((R,X)=>{let Ee=null;function Ke(){var Et;R();const Dr=null===(Et=w.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof Dr&&Dr(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function st(){Ee||(Ee=window.setTimeout(()=>{X(Be(v,"redirect-cancelled-by-user"))},2e3))}function Ot(){"visible"===(null==document?void 0:document.visibilityState)&&st()}p.addPassiveListener(Ke),document.addEventListener("resume",st,!1),Tn()&&document.addEventListener("visibilitychange",Ot,!1),I=()=>{p.removePassiveListener(Ke),document.removeEventListener("resume",st,!1),document.removeEventListener("visibilitychange",Ot,!1),Ee&&window.clearTimeout(Ee)}})}finally{I()}}),Cd.apply(this,arguments)}function Rm(v){return xm.apply(this,arguments)}function xm(){return xm=(0,d.Z)(function*(v){const p=YD(v),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(I=>I.toString(16).padStart(2,"0")).join("")}),xm.apply(this,arguments)}function YD(v){if(L(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),g=new Uint8Array(p);for(let w=0;w<v.length;w++)g[w]=v.charCodeAt(w);return g}v="Browser",(0,ve._registerComponent)(new le.wA("auth",(p,{options:g})=>{const w=p.getProvider("app").getImmediate(),{apiKey:I,authDomain:R}=w.options;return(X=>{de(I&&!I.includes(":"),"invalid-api-key",{appName:X.name}),de(!(null==R?void 0:R.includes(":")),"argument-error",{appName:X.name});const Ee={apiKey:I,authDomain:R,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$e(v)},Ke=new qe(X,Ee);return function(v,p){const g=(null==p?void 0:p.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Y);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,null==p?void 0:p.popupRedirectResolver)}(Ke,g),Ke})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,w)=>{p.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new le.wA("auth-internal",p=>{const g=ct(p.getProvider("auth").getImmediate());return new Vf(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(wd,"0.19.3",void 0),(0,ve.registerVersion)(wd,"0.19.3","esm2017");class Zl extends Rs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,d.Z)(function*(){yield p.initPromise})()}}function Sv(v){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,d.Z)(function*(v){const p=yield Hf()._get($f(v));return p&&(yield Hf()._remove($f(v))),p}),Uf.apply(this,arguments)}function Av(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function Hf(){return Y($u)}function $f(v){return Cn("authEvent",v.config.apiKey,v.name)}function Ha(v){if(!(null==v?void 0:v.includes("?")))return{};const[p,...g]=v.split("?");return(0,P.zd)(g.join("?"))}function tr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Be("no-auth-event")}}function Jo(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function km(v=(0,P.z$)()){return!("file:"!==Jo()&&"ionic:"!==Jo()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Xo(){try{const v=self.localStorage,p=yo();if(v)return v.setItem(p,"1"),v.removeItem(p),!function(v=(0,P.z$)()){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)||function(v=(0,P.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,P.hl)()}catch(v){return Nn()&&(0,P.hl)()}return!1}function Nn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kl(){return("http:"===Jo()||"https:"===Jo()||(0,P.ru)()||km())&&!((0,P.b$)()||(0,P.UG)())&&Xo()&&!Nn()}function Id(){return km()&&"undefined"!=typeof document}function hr(){return hr=(0,d.Z)(function*(){return!!Id()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})}),hr.apply(this,arguments)}const qr={LOCAL:"local",NONE:"none",SESSION:"session"},Ga=de,Lm="persistence";function Wa(v){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,d.Z)(function*(v){yield v._initializationPromise;const p=Yl(),g=Cn(Lm,v.config.apiKey,v.name);(null==p?void 0:p.sessionStorage)&&p.sessionStorage.setItem(g,v._getPersistence())}),Sd.apply(this,arguments)}function Yl(){return"undefined"!=typeof window?window:null}const Zf=de;class Os{constructor(){this.browserResolver=Y(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=os,this._completeRedirectFn=Do}_openPopup(p,g,w,I){var R=this;return(0,d.Z)(function*(){var X;L(null===(X=R.eventManagers[p._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const Ee=bd(p,g,w,je(),I);return function(v,p,g,w=500,I=600){const R=Math.max((window.screen.availHeight-I)/2,0).toString(),X=Math.max((window.screen.availWidth-w)/2,0).toString();let Ee="";const Ke=Object.assign(Object.assign({},Ev),{width:w.toString(),height:I.toString(),top:R,left:X}),st=(0,P.z$)().toLowerCase();g&&(Ee=Ds(st)?"_blank":g),Fo(st)&&(p=p||"http://localhost",Ke.scrollbars="yes");const Ot=Object.entries(Ke).reduce((Dr,[to,Ki])=>`${Dr}${to}=${Ki},`,"");if(function(v=(0,P.z$)()){var p;return ln(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(st)&&"_self"!==Ee)return function(v,p){const g=document.createElement("a");g.href=v,g.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(p||"",Ee),new yd(null);const Et=window.open(p||"",Ee,Ot);de(Et,v,"popup-blocked");try{Et.focus()}catch(Dr){}return new yd(Et)}(p,Ee,yo())})()}_openRedirect(p,g,w,I){var R=this;return(0,d.Z)(function*(){return yield R._originValidation(p),v=bd(p,g,w,je(),I),Jn().location.href=v,new Promise(()=>{});var v})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:I,promise:R}=this.eventManagers[g];return I?Promise.resolve(I):(L(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(p);return this.eventManagers[g]={promise:w},w}initAndGetManager(p){var g=this;return(0,d.Z)(function*(){const w=yield function(v){return Hl.apply(this,arguments)}(p),I=new Rs(p);return w.register("authEvent",R=>(de(null==R?void 0:R.authEvent,p,"invalid-auth-event"),{status:I.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:I},g.iframes[p._key()]=w,I})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(Ff,{type:Ff},I=>{var R;const X=null===(R=null==I?void 0:I[0])||void 0===R?void 0:R[Ff];void 0!==X&&g(!!X),me(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return pd.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return K()||Hi()||ln()}}),this.cordovaResolver=Y(class{constructor(){this._redirectPersistence=os,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Do}_initialize(p){var g=this;return(0,d.Z)(function*(){const w=p._key();let I=g.eventManagers.get(w);return I||(I=new Zl(p),g.eventManagers.set(w,I),g.attachCallbackListeners(p,I)),I})()}_openPopup(p){me(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,w,I){var R=this;return(0,d.Z)(function*(){!function(v){var p,g,w,I,R,X,Ee,Ke,st,Ot;const Et=ja();de("function"==typeof(null===(p=null==Et?void 0:Et.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),de(void 0!==(null===(g=null==Et?void 0:Et.BuildInfo)||void 0===g?void 0:g.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),de("function"==typeof(null===(R=null===(I=null===(w=null==Et?void 0:Et.cordova)||void 0===w?void 0:w.plugins)||void 0===I?void 0:I.browsertab)||void 0===R?void 0:R.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(Ke=null===(Ee=null===(X=null==Et?void 0:Et.cordova)||void 0===X?void 0:X.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===Ke?void 0:Ke.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),de("function"==typeof(null===(Ot=null===(st=null==Et?void 0:Et.cordova)||void 0===st?void 0:st.InAppBrowser)||void 0===Ot?void 0:Ot.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const X=yield R._initialize(p);yield X.initialized(),X.resetRedirect(),ud.clear(),yield R._originValidation(p);const Ee=function(v,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:Av(),postBody:null,tenantId:v.tenantId,error:Be(v,"no-auth-event")}}(p,w,I);yield function(v,p){return Hf()._set($f(v),p)}(p,Ee);const Ke=yield function(v,p,g){return Wl.apply(this,arguments)}(p,Ee,g),st=yield function(v){const{cordova:p}=ja();return new Promise(g=>{p.plugins.browsertab.isAvailable(w=>{let I=null;w?p.plugins.browsertab.openUrl(v):I=p.InAppBrowser.open(v,function(v=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(I)})})}(Ke);return function(v,p,g){return Cd.apply(this,arguments)}(p,X,st)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function(v){return ql.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:w,handleOpenURL:I,BuildInfo:R}=ja(),X=setTimeout((0,d.Z)(function*(){yield Sv(p),g.onEvent(tr())}),500),Ee=function(){var Ot=(0,d.Z)(function*(Et){clearTimeout(X);const Dr=yield Sv(p);let to=null;Dr&&(null==Et?void 0:Et.url)&&(to=function(v,p){var g,w;const I=function(v){const p=Ha(v),g=p.link?decodeURIComponent(p.link):void 0,w=Ha(g).link,I=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Ha(I).link||I||w||g||v}(p);if(I.includes("/__/auth/callback")){const R=Ha(I),X=R.firebaseError?function(v){try{return JSON.parse(v)}catch(p){return null}}(decodeURIComponent(R.firebaseError)):null,Ee=null===(w=null===(g=null==X?void 0:X.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Ke=Ee?Be(Ee):null;return Ke?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ke,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:I,postBody:null}}return null}(Dr,Et.url)),g.onEvent(to||tr())});return function(Dr){return Ot.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,Ee);const Ke=I,st=`${R.packageName.toLowerCase()}://`;ja().handleOpenURL=function(){var Ot=(0,d.Z)(function*(Et){if(Et.toLowerCase().startsWith(st)&&Ee({url:Et}),"function"==typeof Ke)try{Ke(Et)}catch(Dr){console.error(Dr)}});return function(Et){return Ot.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=os,this._completeRedirectFn=Do}_initialize(p){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,w,I){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(p,g,w,I)})()}_openRedirect(p,g,w,I){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(p,g,w,I)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Id()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zf(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,d.Z)(function*(){if(p.underlyingResolver)return;const g=yield function(){return hr.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Kf(v){return v.unwrap()}function Vm(v){return Qf(v)}function Qf(v){const{_tokenResponse:p}=v instanceof P.ZR?v.customData:v;if(!p)return null;if(!(v instanceof P.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Pn.credentialFromResult(v);const g=p.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=xi;break;case"facebook.com":w=Sa;break;case"github.com":w=Zc;break;case"twitter.com":w=lf;break;default:const{oauthIdToken:I,oauthAccessToken:R,oauthTokenSecret:X,pendingToken:Ee,nonce:Ke}=p;return R||X||I||Ee?Ee?g.startsWith("saml.")?cr._create(g,Ee):Is._fromParams({providerId:g,signInMethod:g,pendingToken:Ee,idToken:I,accessToken:R}):new br(g).credential({idToken:I,accessToken:R,rawNonce:Ke}):null}return v instanceof P.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function ki(v,p){return p.catch(g=>{throw g instanceof P.ZR&&function(v,p){var g;const w=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Xu(v,function(v,p){var g;const w=(0,P.m9)(v),I=p;return de(p.customData.operationType,w,"argument-error"),de(null===(g=I.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),ju._fromError(w,I)}(v,p));else if(w){const I=Qf(p),R=p;I&&(R.credential=I,R.tenantId=w.tenantId||void 0,R.email=w.email||void 0,R.phoneNumber=w.phoneNumber||void 0)}}(v,g),g}).then(g=>{const I=g.user;return{operationType:g.operationType,credential:Vm(g),additionalUserInfo:Qn(g),user:cs.getOrCreate(I)}})}function Ad(v,p){return Nd.apply(this,arguments)}function Nd(){return Nd=(0,d.Z)(function*(v,p){const g=yield p;return{verificationId:g.verificationId,confirm:w=>ki(v,g.confirm(w))}}),Nd.apply(this,arguments)}class Xu{constructor(p,g){this.resolver=g,this.auth=function(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return ki(Kf(this.auth),this.resolver.resolveSignIn(p))}}class cs{constructor(p){this._delegate=p,this.multiFactor=function(v){const p=(0,P.m9)(v);return _f.has(p)||_f.set(p,mf._fromUser(p)),_f.get(p)}(p)}static getOrCreate(p){return cs.USER_MAP.has(p)||cs.USER_MAP.set(p,new cs(p)),cs.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,d.Z)(function*(){return ki(g.auth,Pu(g._delegate,p))})()}linkWithPhoneNumber(p,g){var w=this;return(0,d.Z)(function*(){return Ad(w.auth,function(v,p,g){return wo.apply(this,arguments)}(w._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,d.Z)(function*(){return ki(g.auth,function(v,p,g){return Rf.apply(this,arguments)}(g._delegate,p,Os))})()}linkWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield Wa(ct(g.auth)),function(v,p,g){return function(v,p,g){return dd.apply(this,arguments)}(v,p,g)}(g._delegate,p,Os)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,d.Z)(function*(){return ki(g.auth,sm(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Ad(this.auth,function(v,p,g){return Sf.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return ki(this.auth,function(v,p,g){return zu.apply(this,arguments)}(this._delegate,p,Os))}reauthenticateWithRedirect(p){var g=this;return(0,d.Z)(function*(){return yield Wa(ct(g.auth)),function(v,p,g){return function(v,p,g){return Va.apply(this,arguments)}(v,p,g)}(g._delegate,p,Os)})()}sendEmailVerification(p){return function(v,p){return Vu.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,d.Z)(function*(){return yield function(v,p){return wn.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function(v,p){return pf((0,P.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function(v,p){return pf((0,P.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function(v,p){return ls.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function(v,p){return ff.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function(v,p,g){return Nl.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}cs.USER_MAP=new WeakMap;const ec=de;let qa=(()=>{class v{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:I}=g.options;ec(I,"invalid-api-key",{appName:g.name});let R=[Pt];if("undefined"!=typeof window){R=function(v,p){const g=Yl();if(!(null==g?void 0:g.sessionStorage))return[];const w=Cn(Lm,v,p);switch(g.sessionStorage.getItem(w)){case qr.NONE:return[Pt];case qr.LOCAL:return[Ho,os];case qr.SESSION:return[os];default:return[]}}(I,g.name);for(const Ee of[Ho,$u,os])R.includes(Ee)||R.push(Ee)}ec(I,"invalid-api-key",{appName:g.name});const X="undefined"!=typeof window?Os:void 0;this._delegate=w.initialize({options:{persistence:R,popupRedirectResolver:X}}),this._delegate._updateErrorMap(Ye),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function(v,p,g){const w=ct(v);de(w._canInitEmulator,w,"emulator-config-failed"),de(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const I=!!(null==g?void 0:g.disableWarnings),R=ke(p),{host:X,port:Ee}=function(v){const p=ke(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",I=/^(\[[^\]]+\])(:|$)/.exec(w);if(I){const R=I[1];return{host:R,port:In(w.substr(R.length+1))}}{const[R,X]=w.split(":");return{host:R,port:In(X)}}}(p);w.config.emulator={url:`${R}//${X}${null===Ee?"":`:${Ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:X,port:Ee,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:I})}),I||function(){function v(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,w)}applyActionCode(g){return function(v,p){return Bo.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Yn(this._delegate,g)}confirmPasswordReset(g,w){return function(v,p,g){return Pe.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var I=this;return(0,d.Z)(function*(){return ki(I._delegate,function(v,p,g){return Na.apply(this,arguments)}(I._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function(v,p){return dm.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function(v,p){const g=Vo.parseLink(p);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){ec(Kl(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function(v,p){return Xs.apply(this,arguments)}(g._delegate,Os);return w?ki(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function(v,p){ct(v)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,w,I){const{next:R,error:X,complete:Ee}=tc(g,w,I);return this._delegate.onAuthStateChanged(R,X,Ee)}onIdTokenChanged(g,w,I){const{next:R,error:X,complete:Ee}=tc(g,w,I);return this._delegate.onIdTokenChanged(R,X,Ee)}sendSignInLinkToEmail(g,w){return function(v,p,g){return Ma.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function(v,p,g){return cf.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,d.Z)(function*(){let I;switch(function(v,p){Ga(Object.values(qr).includes(p),v,"invalid-persistence-type"),(0,P.b$)()?Ga(p!==qr.SESSION,v,"unsupported-persistence-type"):(0,P.UG)()?Ga(p===qr.NONE,v,"unsupported-persistence-type"):Nn()?Ga(p===qr.NONE||p===qr.LOCAL&&(0,P.hl)(),v,"unsupported-persistence-type"):Ga(p===qr.NONE||Xo(),v,"unsupported-persistence-type")}(w._delegate,g),g){case qr.SESSION:I=os;break;case qr.LOCAL:I=(yield Y(Ho)._isAvailable())?Ho:$u;break;case qr.NONE:I=Pt;break;default:return me("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(I)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return ki(this._delegate,function(v){return We.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return ki(this._delegate,ss(this._delegate,g))}signInWithCustomToken(g){return ki(this._delegate,function(v,p){return om.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return ki(this._delegate,function(v,p,g){return ss((0,P.m9)(v),Il.credential(p,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return ki(this._delegate,function(v,p,g){return As.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Ad(this._delegate,function(v,p,g){return wr.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,d.Z)(function*(){return ec(Kl(),w._delegate,"operation-not-supported-in-this-environment"),ki(w._delegate,function(v,p,g){return Wo.apply(this,arguments)}(w._delegate,g,Os))})()}signInWithRedirect(g){var w=this;return(0,d.Z)(function*(){return ec(Kl(),w._delegate,"operation-not-supported-in-this-environment"),yield Wa(w._delegate),function(v,p,g){return function(v,p,g){return Ll.apply(this,arguments)}(v,p,g)}(w._delegate,g,Os)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function(v,p){return ri.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=qr,v})();function tc(v,p,g){let w=v;"function"!=typeof v&&({next:w,error:p,complete:g}=v);const I=w;return{next:X=>I(X&&cs.getOrCreate(X)),error:p,complete:g}}class Jf{constructor(){this.providerId="phone",this._delegate=new Pn(Kf(ne.Z.auth()))}static credential(p,g){return Pn.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Jf.PHONE_SIGN_IN_METHOD=Pn.PHONE_SIGN_IN_METHOD,Jf.PROVIDER_ID=Pn.PROVIDER_ID;const nc=de;class Ov{constructor(p,g,w=ne.Z.app()){var I;nc(null===(I=w.options)||void 0===I?void 0:I.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new WD(p,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(v){v.INTERNAL.registerComponent(new le.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new qa(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Il,FacebookAuthProvider:Sa,GithubAuthProvider:Zc,GoogleAuthProvider:xi,OAuthProvider:br,SAMLAuthProvider:Aa,PhoneAuthProvider:Jf,PhoneMultiFactorGenerator:Mm,RecaptchaVerifier:Ov,TwitterAuthProvider:lf,Auth:qa,AuthCredential:vn,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.3")}(ne.Z)},3045:(et,De,M)=>{"use strict";M.d(De,{Gb:()=>d.Gb});var d=M(7835)},4995:function(et,De){!function(M){"use strict";function d(ae){return Array.prototype.slice.call(ae)}function ne(ae){return new Promise(function(ee,ye){ae.onsuccess=function(){ee(ae.result)},ae.onerror=function(){ye(ae.error)}})}function P(ae,ee,ye){var Ae,me=new Promise(function(Be,xe){ne(Ae=ae[ee].apply(ae,ye)).then(Be,xe)});return me.request=Ae,me}function ve(ae,ee,ye){var Ae=P(ae,ee,ye);return Ae.then(function(me){if(me)return new G(me,Ae.request)})}function ue(ae,ee,ye){ye.forEach(function(Ae){Object.defineProperty(ae.prototype,Ae,{get:function(){return this[ee][Ae]},set:function(me){this[ee][Ae]=me}})})}function be(ae,ee,ye,Ae){Ae.forEach(function(me){me in ye.prototype&&(ae.prototype[me]=function(){return P(this[ee],me,arguments)})})}function le(ae,ee,ye,Ae){Ae.forEach(function(me){me in ye.prototype&&(ae.prototype[me]=function(){return this[ee][me].apply(this[ee],arguments)})})}function fe(ae,ee,ye,Ae){Ae.forEach(function(me){me in ye.prototype&&(ae.prototype[me]=function(){return ve(this[ee],me,arguments)})})}function ce(ae){this._index=ae}function G(ae,ee){this._cursor=ae,this._request=ee}function W(ae){this._store=ae}function te(ae){this._tx=ae,this.complete=new Promise(function(ee,ye){ae.oncomplete=function(){ee()},ae.onerror=function(){ye(ae.error)},ae.onabort=function(){ye(ae.error)}})}function Ge(ae,ee,ye){this._db=ae,this.oldVersion=ee,this.transaction=new te(ye)}function Ce(ae){this._db=ae}ue(ce,"_index",["name","keyPath","multiEntry","unique"]),be(ce,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),fe(ce,"_index",IDBIndex,["openCursor","openKeyCursor"]),ue(G,"_cursor",["direction","key","primaryKey","value"]),be(G,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ae){ae in IDBCursor.prototype&&(G.prototype[ae]=function(){var ee=this,ye=arguments;return Promise.resolve().then(function(){return ee._cursor[ae].apply(ee._cursor,ye),ne(ee._request).then(function(Ae){if(Ae)return new G(Ae,ee._request)})})})}),W.prototype.createIndex=function(){return new ce(this._store.createIndex.apply(this._store,arguments))},W.prototype.index=function(){return new ce(this._store.index.apply(this._store,arguments))},ue(W,"_store",["name","keyPath","indexNames","autoIncrement"]),be(W,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),fe(W,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),le(W,"_store",IDBObjectStore,["deleteIndex"]),te.prototype.objectStore=function(){return new W(this._tx.objectStore.apply(this._tx,arguments))},ue(te,"_tx",["objectStoreNames","mode"]),le(te,"_tx",IDBTransaction,["abort"]),Ge.prototype.createObjectStore=function(){return new W(this._db.createObjectStore.apply(this._db,arguments))},ue(Ge,"_db",["name","version","objectStoreNames"]),le(Ge,"_db",IDBDatabase,["deleteObjectStore","close"]),Ce.prototype.transaction=function(){return new te(this._db.transaction.apply(this._db,arguments))},ue(Ce,"_db",["name","version","objectStoreNames"]),le(Ce,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ae){[W,ce].forEach(function(ee){ae in ee.prototype&&(ee.prototype[ae.replace("open","iterate")]=function(){var ye=d(arguments),Ae=ye[ye.length-1],me=this._store||this._index,Be=me[ae].apply(me,ye.slice(0,-1));Be.onsuccess=function(){Ae(Be.result)}})})}),[ce,W].forEach(function(ae){ae.prototype.getAll||(ae.prototype.getAll=function(ee,ye){var Ae=this,me=[];return new Promise(function(Be){Ae.iterateCursor(ee,function(xe){xe?(me.push(xe.value),void 0===ye||me.length!=ye?xe.continue():Be(me)):Be(me)})})})}),M.openDb=function(ae,ee,ye){var Ae=P(indexedDB,"open",[ae,ee]),me=Ae.request;return me&&(me.onupgradeneeded=function(Be){ye&&ye(new Ge(me.result,Be.oldVersion,me.transaction))}),Ae.then(function(Be){return new Ce(Be)})},M.deleteDb=function(ae){return P(indexedDB,"deleteDatabase",[ae])},Object.defineProperty(M,"__esModule",{value:!0})}(De)},8305:(et,De,M)=>{"use strict";M.d(De,{y:()=>G});var d=M(584),ne=M(7908),P=M(4816),ve=M(4623);var le=M(5367),fe=M(5044),ce=M(8706);let G=(()=>{class Ce{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const ae=new Ce;return ae.source=this,ae.operator=Ve,ae}subscribe(Ve,ae,ee){const ye=function(Ce){return Ce&&Ce instanceof d.Lv||function(Ce){return Ce&&(0,fe.m)(Ce.next)&&(0,fe.m)(Ce.error)&&(0,fe.m)(Ce.complete)}(Ce)&&(0,ne.Nn)(Ce)}(Ve)?Ve:new d.Hp(Ve,ae,ee);return(0,ce.x)(()=>{const{operator:Ae,source:me}=this;ye.add(Ae?Ae.call(ye,me):me?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(ae){Ve.error(ae)}}forEach(Ve,ae){return new(ae=W(ae))((ee,ye)=>{let Ae;Ae=this.subscribe(me=>{try{Ve(me)}catch(Be){ye(Be),null==Ae||Ae.unsubscribe()}},ye,ee)})}_subscribe(Ve){var ae;return null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(Ve)}[P.L](){return this}pipe(...Ve){return function(Ce){return 0===Ce.length?ve.y:1===Ce.length?Ce[0]:function(Ve){return Ce.reduce((ae,ee)=>ee(ae),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=W(Ve))((ae,ee)=>{let ye;this.subscribe(Ae=>ye=Ae,Ae=>ee(Ae),()=>ae(ye))})}}return Ce.create=Ye=>new Ce(Ye),Ce})();function W(Ce){var Ye;return null!==(Ye=null!=Ce?Ce:le.v.Promise)&&void 0!==Ye?Ye:Promise}},273:(et,De,M)=>{"use strict";M.d(De,{x:()=>le});var d=M(8305),ne=M(7908);const ve=(0,M(4893).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=M(3980),be=M(8706);let le=(()=>{class ce extends d.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const te=new fe(this,this);return te.operator=W,te}_throwIfClosed(){if(this.closed)throw new ve}next(W){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const te=this.observers.slice();for(const Ge of te)Ge.next(W)}})}error(W){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:te}=this;for(;te.length;)te.shift().error(W)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:te,isStopped:Ge,observers:Ce}=this;return te||Ge?ne.Lc:(Ce.push(W),new ne.w0(()=>(0,ue.P)(Ce,W)))}_checkFinalizedStatuses(W){const{hasError:te,thrownError:Ge,isStopped:Ce}=this;te?W.error(Ge):Ce&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return ce.create=(G,W)=>new fe(G,W),ce})();class fe extends le{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,te;null===(te=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===te||te.call(W,G)}error(G){var W,te;null===(te=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===te||te.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,te;return null!==(te=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==te?te:ne.Lc}}},584:(et,De,M)=>{"use strict";M.d(De,{Hp:()=>Ge,Lv:()=>te});var d=M(5044),ne=M(7908),P=M(5367),ve=M(5160),ue=M(6921);const be=ce("C",void 0,void 0);function ce(ee,ye,Ae){return{kind:ee,value:ye,error:Ae}}var G=M(2496),W=M(8706);class te extends ne.w0{constructor(ye){super(),this.isStopped=!1,ye?(this.destination=ye,(0,ne.Nn)(ye)&&ye.add(this)):this.destination=ae}static create(ye,Ae,me){return new Ge(ye,Ae,me)}next(ye){this.isStopped?Ve(ce("N",ye,void 0),this):this._next(ye)}error(ye){this.isStopped?Ve(ce("E",void 0,ye),this):(this.isStopped=!0,this._error(ye))}complete(){this.isStopped?Ve(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ye){this.destination.next(ye)}_error(ye){try{this.destination.error(ye)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class Ge extends te{constructor(ye,Ae,me){let Be;if(super(),(0,d.m)(ye))Be=ye;else if(ye){let xe;({next:Be,error:Ae,complete:me}=ye),this&&P.v.useDeprecatedNextContext?(xe=Object.create(ye),xe.unsubscribe=()=>this.unsubscribe()):xe=ye,Be=null==Be?void 0:Be.bind(xe),Ae=null==Ae?void 0:Ae.bind(xe),me=null==me?void 0:me.bind(xe)}this.destination={next:Be?Ce(Be):ue.Z,error:Ce(null!=Ae?Ae:Ye),complete:me?Ce(me):ue.Z}}}function Ce(ee,ye){return(...Ae)=>{try{ee(...Ae)}catch(me){P.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(me):(0,ve.h)(me)}}}function Ye(ee){throw ee}function Ve(ee,ye){const{onStoppedNotification:Ae}=P.v;Ae&&G.z.setTimeout(()=>Ae(ee,ye))}const ae={closed:!0,next:ue.Z,error:Ye,complete:ue.Z}},7908:(et,De,M)=>{"use strict";M.d(De,{Lc:()=>be,w0:()=>ue,Nn:()=>le});var d=M(5044);const P=(0,M(4893).d)(ce=>function(W){ce(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((te,Ge)=>`${Ge+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ve=M(3980);class ue{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Ce of W)Ce.remove(this);else W.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(Ce){G=Ce instanceof P?Ce.errors:[Ce]}const{_teardowns:Ge}=this;if(Ge){this._teardowns=null;for(const Ce of Ge)try{fe(Ce)}catch(Ye){G=null!=G?G:[],Ye instanceof P?G=[...G,...Ye.errors]:G.push(Ye)}}if(G)throw new P(G)}}add(G){var W;if(G&&G!==this)if(this.closed)fe(G);else{if(G instanceof ue){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==(W=this._teardowns)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,ve.P)(W,G)}remove(G){const{_teardowns:W}=this;W&&(0,ve.P)(W,G),G instanceof ue&&G._removeParent(this)}}ue.EMPTY=(()=>{const ce=new ue;return ce.closed=!0,ce})();const be=ue.EMPTY;function le(ce){return ce instanceof ue||ce&&"closed"in ce&&(0,d.m)(ce.remove)&&(0,d.m)(ce.add)&&(0,d.m)(ce.unsubscribe)}function fe(ce){(0,d.m)(ce)?ce():ce.unsubscribe()}},5367:(et,De,M)=>{"use strict";M.d(De,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5583:(et,De,M)=>{"use strict";M.d(De,{E:()=>ne});const ne=new(M(8305).y)(ue=>ue.complete())},5947:(et,De,M)=>{"use strict";M.d(De,{D:()=>Be});var d=M(9985),ne=M(4763),P=M(5222),be=M(8305),fe=M(5497),ce=M(5044),G=M(8395);function te(xe,Ze){if(!xe)throw new Error("Iterable cannot be null");return new be.y(Xe=>{(0,G.f)(Xe,Ze,()=>{const de=xe[Symbol.asyncIterator]();(0,G.f)(Xe,Ze,()=>{de.next().then(O=>{O.done?Xe.complete():Xe.next(O.value)})},0,!0)})})}var Ge=M(1073),Ce=M(2442),Ye=M(1537),Ve=M(2317),ae=M(9908),ee=M(3754),ye=M(7751);function Be(xe,Ze){return Ze?function(xe,Ze){if(null!=xe){if((0,Ge.c)(xe))return function(xe,Ze){return(0,d.Xf)(xe).pipe((0,P.R)(Ze),(0,ne.Q)(Ze))}(xe,Ze);if((0,Ye.z)(xe))return function(xe,Ze){return new be.y(Xe=>{let de=0;return Ze.schedule(function(){de===xe.length?Xe.complete():(Xe.next(xe[de++]),Xe.closed||this.schedule())})})}(xe,Ze);if((0,Ce.t)(xe))return function(xe,Ze){return(0,d.Xf)(xe).pipe((0,P.R)(Ze),(0,ne.Q)(Ze))}(xe,Ze);if((0,ae.D)(xe))return te(xe,Ze);if((0,Ve.T)(xe))return function(xe,Ze){return new be.y(Xe=>{let de;return(0,G.f)(Xe,Ze,()=>{de=xe[fe.h](),(0,G.f)(Xe,Ze,()=>{let O,L;try{({value:O,done:L}=de.next())}catch(q){return void Xe.error(q)}L?Xe.complete():Xe.next(O)},0,!0)}),()=>(0,ce.m)(null==de?void 0:de.return)&&de.return()})}(xe,Ze);if((0,ye.L)(xe))return function(xe,Ze){return te((0,ye.Q)(xe),Ze)}(xe,Ze)}throw(0,ee.z)(xe)}(xe,Ze):(0,d.Xf)(xe)}},9985:(et,De,M)=>{"use strict";M.d(De,{Xf:()=>Ge});var d=M(9162),ne=M(1537),P=M(2442),ve=M(8305),ue=M(1073),be=M(9908),le=M(3754),fe=M(2317),ce=M(7751),G=M(5044),W=M(5160),te=M(4816);function Ge(me){if(me instanceof ve.y)return me;if(null!=me){if((0,ue.c)(me))return function(me){return new ve.y(Be=>{const xe=me[te.L]();if((0,G.m)(xe.subscribe))return xe.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,ne.z)(me))return function(me){return new ve.y(Be=>{for(let xe=0;xe<me.length&&!Be.closed;xe++)Be.next(me[xe]);Be.complete()})}(me);if((0,P.t)(me))return function(me){return new ve.y(Be=>{me.then(xe=>{Be.closed||(Be.next(xe),Be.complete())},xe=>Be.error(xe)).then(null,W.h)})}(me);if((0,be.D)(me))return ee(me);if((0,fe.T)(me))return function(me){return new ve.y(Be=>{for(const xe of me)if(Be.next(xe),Be.closed)return;Be.complete()})}(me);if((0,ce.L)(me))return function(me){return ee((0,ce.Q)(me))}(me)}throw(0,le.z)(me)}function ee(me){return new ve.y(Be=>{(function(me,Be){var xe,Ze,Xe,de;return(0,d.mG)(this,void 0,void 0,function*(){try{for(xe=(0,d.KL)(me);!(Ze=yield xe.next()).done;)if(Be.next(Ze.value),Be.closed)return}catch(O){Xe={error:O}}finally{try{Ze&&!Ze.done&&(de=xe.return)&&(yield de.call(xe))}finally{if(Xe)throw Xe.error}}Be.complete()})})(me,Be).catch(xe=>Be.error(xe))})}},3719:(et,De,M)=>{"use strict";M.d(De,{T:()=>be});var d=M(5373),ne=M(9985),P=M(5583),ve=M(7613),ue=M(5947);function be(...le){const fe=(0,ve.yG)(le),ce=(0,ve._6)(le,1/0),G=le;return G.length?1===G.length?(0,ne.Xf)(G[0]):(0,d.J)(ce)((0,ue.D)(G,fe)):P.E}},8889:(et,De,M)=>{"use strict";M.d(De,{Q:()=>ne});var d=M(584);class ne extends d.Lv{constructor(ve,ue,be,le,fe){super(ve),this.onFinalize=fe,this._next=ue?function(ce){try{ue(ce)}catch(G){ve.error(G)}}:super._next,this._error=le?function(ce){try{le(ce)}catch(G){ve.error(G)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(ce){ve.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ve;const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(ve=this.onFinalize)||void 0===ve||ve.call(this))}}},4753:(et,De,M)=>{"use strict";M.d(De,{U:()=>P});var d=M(9947),ne=M(8889);function P(ve,ue){return(0,d.e)((be,le)=>{let fe=0;be.subscribe(new ne.Q(le,ce=>{le.next(ve.call(ue,ce,fe++))}))})}},5373:(et,De,M)=>{"use strict";M.d(De,{J:()=>P});var d=M(5724),ne=M(4623);function P(ve=1/0){return(0,d.z)(ne.y,ve)}},5724:(et,De,M)=>{"use strict";M.d(De,{z:()=>fe});var d=M(4753),ne=M(9985),P=M(9947),ue=(M(8395),M(8889)),le=M(5044);function fe(ce,G,W=1/0){return(0,le.m)(G)?fe((te,Ge)=>(0,d.U)((Ce,Ye)=>G(te,Ce,Ge,Ye))((0,ne.Xf)(ce(te,Ge))),W):("number"==typeof G&&(W=G),(0,P.e)((te,Ge)=>function(ce,G,W,te,Ge,Ce,Ye,Ve){const ae=[];let ee=0,ye=0,Ae=!1;const me=()=>{Ae&&!ae.length&&!ee&&G.complete()},Be=Ze=>ee<te?xe(Ze):ae.push(Ze),xe=Ze=>{ee++;let Xe=!1;(0,ne.Xf)(W(Ze,ye++)).subscribe(new ue.Q(G,de=>{G.next(de)},()=>{Xe=!0},void 0,()=>{if(Xe)try{for(ee--;ae.length&&ee<te;){const de=ae.shift();xe(de)}me()}catch(de){G.error(de)}}))};return ce.subscribe(new ue.Q(G,Be,()=>{Ae=!0,me()})),()=>{}}(te,Ge,ce,W)))}},4763:(et,De,M)=>{"use strict";M.d(De,{Q:()=>ve});var d=M(8395),ne=M(9947),P=M(8889);function ve(ue,be=0){return(0,ne.e)((le,fe)=>{le.subscribe(new P.Q(fe,ce=>(0,d.f)(fe,ue,()=>fe.next(ce),be),()=>(0,d.f)(fe,ue,()=>fe.complete(),be),ce=>(0,d.f)(fe,ue,()=>fe.error(ce),be)))})}},3174:(et,De,M)=>{"use strict";M.d(De,{B:()=>be});var d=M(5947),ne=M(9468),P=M(273),ve=M(584),ue=M(9947);function be(fe={}){const{connector:ce=(()=>new P.x),resetOnError:G=!0,resetOnComplete:W=!0,resetOnRefCountZero:te=!0}=fe;return Ge=>{let Ce=null,Ye=null,Ve=null,ae=0,ee=!1,ye=!1;const Ae=()=>{null==Ye||Ye.unsubscribe(),Ye=null},me=()=>{Ae(),Ce=Ve=null,ee=ye=!1},Be=()=>{const xe=Ce;me(),null==xe||xe.unsubscribe()};return(0,ue.e)((xe,Ze)=>{ae++,!ye&&!ee&&Ae();const Xe=Ve=null!=Ve?Ve:ce();Ze.add(()=>{ae--,0===ae&&!ye&&!ee&&(Ye=le(Be,te))}),Xe.subscribe(Ze),Ce||(Ce=new ve.Hp({next:de=>Xe.next(de),error:de=>{ye=!0,Ae(),Ye=le(me,G,de),Xe.error(de)},complete:()=>{ee=!0,Ae(),Ye=le(me,W),Xe.complete()}}),(0,d.D)(xe).subscribe(Ce))})(Ge)}}function le(fe,ce,...G){return!0===ce?(fe(),null):!1===ce?null:ce(...G).pipe((0,ne.q)(1)).subscribe(()=>fe())}},5222:(et,De,M)=>{"use strict";M.d(De,{R:()=>ne});var d=M(9947);function ne(P,ve=0){return(0,d.e)((ue,be)=>{be.add(P.schedule(()=>ue.subscribe(be),ve))})}},9468:(et,De,M)=>{"use strict";M.d(De,{q:()=>ve});var d=M(5583),ne=M(9947),P=M(8889);function ve(ue){return ue<=0?()=>d.E:(0,ne.e)((be,le)=>{let fe=0;be.subscribe(new P.Q(le,ce=>{++fe<=ue&&(le.next(ce),ue<=fe&&le.complete())}))})}},7384:(et,De,M)=>{"use strict";M.d(De,{b:()=>ue});var d=M(5044),ne=M(9947),P=M(8889),ve=M(4623);function ue(be,le,fe){const ce=(0,d.m)(be)||le||fe?{next:be,error:le,complete:fe}:be;return ce?(0,ne.e)((G,W)=>{var te;null===(te=ce.subscribe)||void 0===te||te.call(ce);let Ge=!0;G.subscribe(new P.Q(W,Ce=>{var Ye;null===(Ye=ce.next)||void 0===Ye||Ye.call(ce,Ce),W.next(Ce)},()=>{var Ce;Ge=!1,null===(Ce=ce.complete)||void 0===Ce||Ce.call(ce),W.complete()},Ce=>{var Ye;Ge=!1,null===(Ye=ce.error)||void 0===Ye||Ye.call(ce,Ce),W.error(Ce)},()=>{var Ce,Ye;Ge&&(null===(Ce=ce.unsubscribe)||void 0===Ce||Ce.call(ce)),null===(Ye=ce.finalize)||void 0===Ye||Ye.call(ce)}))}):ve.y}},2869:(et,De,M)=>{"use strict";M.d(De,{o:()=>ue});var d=M(7908);class ne extends d.w0{constructor(le,fe){super()}schedule(le,fe=0){return this}}const P={setInterval(...be){const{delegate:le}=P;return((null==le?void 0:le.setInterval)||setInterval)(...be)},clearInterval(be){const{delegate:le}=P;return((null==le?void 0:le.clearInterval)||clearInterval)(be)},delegate:void 0};var ve=M(3980);class ue extends ne{constructor(le,fe){super(le,fe),this.scheduler=le,this.work=fe,this.pending=!1}schedule(le,fe=0){if(this.closed)return this;this.state=le;const ce=this.id,G=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(G,ce,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(G,this.id,fe),this}requestAsyncId(le,fe,ce=0){return P.setInterval(le.flush.bind(le,this),ce)}recycleAsyncId(le,fe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return fe;P.clearInterval(fe)}execute(le,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(le,fe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,fe){let G,ce=!1;try{this.work(le)}catch(W){ce=!0,G=W||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:le,scheduler:fe}=this,{actions:ce}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(ce,this),null!=le&&(this.id=this.recycleAsyncId(fe,le,null)),this.delay=null,super.unsubscribe()}}}},8843:(et,De,M)=>{"use strict";M.d(De,{v:()=>P});var d=M(1733);class ne{constructor(ue,be=ne.now){this.schedulerActionCtor=ue,this.now=be}schedule(ue,be=0,le){return new this.schedulerActionCtor(this,ue).schedule(le,be)}}ne.now=d.l.now;class P extends ne{constructor(ue,be=ne.now){super(ue,be),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ue){const{actions:be}=this;if(this._active)return void be.push(ue);let le;this._active=!0;do{if(le=ue.execute(ue.state,ue.delay))break}while(ue=be.shift());if(this._active=!1,le){for(;ue=be.shift();)ue.unsubscribe();throw le}}}},2210:(et,De,M)=>{"use strict";M.d(De,{z:()=>P,P:()=>ve});var d=M(2869);const P=new(M(8843).v)(d.o),ve=P},1733:(et,De,M)=>{"use strict";M.d(De,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},2496:(et,De,M)=>{"use strict";M.d(De,{z:()=>d});const d={setTimeout(...ne){const{delegate:P}=d;return((null==P?void 0:P.setTimeout)||setTimeout)(...ne)},clearTimeout(ne){const{delegate:P}=d;return((null==P?void 0:P.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},5497:(et,De,M)=>{"use strict";M.d(De,{h:()=>ne});const ne="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(et,De,M)=>{"use strict";M.d(De,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(et,De,M)=>{"use strict";M.d(De,{jO:()=>ve,yG:()=>ue,_6:()=>be});var d=M(5044),ne=M(7398);function P(le){return le[le.length-1]}function ve(le){return(0,d.m)(P(le))?le.pop():void 0}function ue(le){return(0,ne.K)(P(le))?le.pop():void 0}function be(le,fe){return"number"==typeof P(le)?le.pop():fe}},3980:(et,De,M)=>{"use strict";function d(ne,P){if(ne){const ve=ne.indexOf(P);0<=ve&&ne.splice(ve,1)}}M.d(De,{P:()=>d})},4893:(et,De,M)=>{"use strict";function d(ne){const ve=ne(ue=>{Error.call(ue),ue.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}M.d(De,{d:()=>d})},8706:(et,De,M)=>{"use strict";M.d(De,{x:()=>P,O:()=>ve});var d=M(5367);let ne=null;function P(ue){if(d.v.useDeprecatedSynchronousErrorHandling){const be=!ne;if(be&&(ne={errorThrown:!1,error:null}),ue(),be){const{errorThrown:le,error:fe}=ne;if(ne=null,le)throw fe}}else ue()}function ve(ue){d.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=ue)}},8395:(et,De,M)=>{"use strict";function d(ne,P,ve,ue=0,be=!1){const le=P.schedule(function(){ve(),be?ne.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(ne.add(le),!be)return le}M.d(De,{f:()=>d})},4623:(et,De,M)=>{"use strict";function d(ne){return ne}M.d(De,{y:()=>d})},1537:(et,De,M)=>{"use strict";M.d(De,{z:()=>d});const d=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},9908:(et,De,M)=>{"use strict";M.d(De,{D:()=>ne});var d=M(5044);function ne(P){return Symbol.asyncIterator&&(0,d.m)(null==P?void 0:P[Symbol.asyncIterator])}},5044:(et,De,M)=>{"use strict";function d(ne){return"function"==typeof ne}M.d(De,{m:()=>d})},1073:(et,De,M)=>{"use strict";M.d(De,{c:()=>P});var d=M(4816),ne=M(5044);function P(ve){return(0,ne.m)(ve[d.L])}},2317:(et,De,M)=>{"use strict";M.d(De,{T:()=>P});var d=M(5497),ne=M(5044);function P(ve){return(0,ne.m)(null==ve?void 0:ve[d.h])}},2442:(et,De,M)=>{"use strict";M.d(De,{t:()=>ne});var d=M(5044);function ne(P){return(0,d.m)(null==P?void 0:P.then)}},7751:(et,De,M)=>{"use strict";M.d(De,{Q:()=>P,L:()=>ve});var d=M(9162),ne=M(5044);function P(ue){return(0,d.FC)(this,arguments,function*(){const le=ue.getReader();try{for(;;){const{value:fe,done:ce}=yield(0,d.qq)(le.read());if(ce)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(fe)}}finally{le.releaseLock()}})}function ve(ue){return(0,ne.m)(null==ue?void 0:ue.getReader)}},7398:(et,De,M)=>{"use strict";M.d(De,{K:()=>ne});var d=M(5044);function ne(P){return P&&(0,d.m)(P.schedule)}},9947:(et,De,M)=>{"use strict";M.d(De,{A:()=>ne,e:()=>P});var d=M(5044);function ne(ve){return(0,d.m)(null==ve?void 0:ve.lift)}function P(ve){return ue=>{if(ne(ue))return ue.lift(function(be){try{return ve(be,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},6921:(et,De,M)=>{"use strict";function d(){}M.d(De,{Z:()=>d})},5160:(et,De,M)=>{"use strict";M.d(De,{h:()=>P});var d=M(5367),ne=M(2496);function P(ve){ne.z.setTimeout(()=>{const{onUnhandledError:ue}=d.v;if(!ue)throw ve;ue(ve)})}},3754:(et,De,M)=>{"use strict";function d(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(De,{z:()=>d})},6177:(et,De,M)=>{"use strict";var d=M(3668);let ne=null;function P(){return ne}const le=new d.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.LFG)(W)},providedIn:"platform"}),n})();const G=new d.OlP("Location Initialized");let W=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){te()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){te()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:function(){return new W((0,d.LFG)(le))},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Ce(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ye(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function(n){const e=(0,d.LFG)(le).location;return new Ae((0,d.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const ye=new d.OlP("appBaseHref");let Ae=(()=>{class n extends ae{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ce(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const f=this.prepareExternalUrl(o+Ve(u));this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,u){const f=this.prepareExternalUrl(o+Ve(u));this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformLocation).historyGo)||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),me=(()=>{class n extends ae{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ce(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let f=this.prepareExternalUrl(o+Ve(u));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.pushState(t,r,f)}replaceState(t,r,o,u){let f=this.prepareExternalUrl(o+Ve(u));0==f.length&&(f=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,f)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformLocation).historyGo)||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(ye,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Be=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ye(Xe(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Xe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null==(o=(r=this._platformStrategy).historyGo)||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Ce,n.stripTrailingSlash=Ye,n.\u0275fac=function(t){return new(t||n)(d.LFG(ae),d.LFG(fe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return new Be((0,d.LFG)(ae),(0,d.LFG)(fe))},providedIn:"root"}),n})();function Xe(n){return n.replace(/\/index.html$/,"")}var L=(()=>((L=L||{})[L.Zero=0]="Zero",L[L.One=1]="One",L[L.Two=2]="Two",L[L.Few=3]="Few",L[L.Many=4]="Many",L[L.Other=5]="Other",L))();const Br=d.kL8;class vn{}let Zn=(()=>{class n extends vn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Br(r||this.locale)(t)){case L.Zero:return"zero";case L.One:return"one";case L.Two:return"two";case L.Few:return"few";case L.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class sf{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ws=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,u,f)=>{if(null==o.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new sf(null,this._ngForOf,-1,-1),null===f?void 0:f),b=new is(o,_);r.push(b)}else if(null==f)this._viewContainer.remove(null===u?void 0:u);else if(null!==u){const _=this._viewContainer.get(u);this._viewContainer.move(_,f);const b=new is(o,_);r.push(b)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,u=this._viewContainer.length;o<u;o++){const f=this._viewContainer.get(o);f.context.index=o,f.context.count=u,f.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class is{constructor(e,t){this.record=e,this.view=t}}let Ts=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ea,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){po("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){po("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Ea{constructor(){this.$implicit=null,this.ngIf=null}}function po(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let cr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:vn,useClass:Zn}]}),n})();const ku="browser";function k(n){return n===ku}function j(n){return"server"===n}let rt=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new Rt((0,d.LFG)(le),window)}),n})();class Rt{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const f=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(f)return f}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=on(this.window.history)||on(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function on(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Hn extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new Hn,ne||(ne=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(Ss=Ss||document.querySelector("base"),Ss?Ss.getAttribute("href"):null);return null==t?null:function(n){Kn=Kn||document.createElement("a"),Kn.setAttribute("href",n);const e=Kn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ss=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Kn,Ss=null;const Wi=new d.OlP("TRANSITION_ID"),yi=[{provide:d.ip1,useFactory:function(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Wi,le,d.zs3],multi:!0}];class Pu{static init(){(0,d.VLi)(new Pu)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,f=!1;const _=function(b){f=f||b,u--,0==u&&r(f)};o.forEach(function(b){b.whenStable(_)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Fu=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo=new d.OlP("EventManagerPlugins");let Yn=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const f=o[u];if(f.supports(t))return this._eventNameToPlugin.set(t,f),f}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Bo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Sl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Al=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ri=(()=>{class n extends Al{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const f=this._doc.createElement("style");f.textContent=u,o.push(r.appendChild(f))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Qc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Qc))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Qc(n){P().remove(n)}const Na={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lm=/%COMP%/g;function Ns(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ns(n,o,t):(o=o.replace(lm,n),t.push(o))}return t}function Ks(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Xc=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Vu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new df(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new ed(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ns(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Yn),d.LFG(ri),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Vu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Na[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Na[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Na[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ks(r)):this.eventManager.addEventListener(e,t,Ks(r))}}class df extends Vu{constructor(e,t,r,o){super(e),this.component=r;const u=Ns(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr="_ngcontent-%COMP%".replace(lm,o+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace(lm,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ed extends Vu{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ns(o.id,o.styles,[]);for(let f=0;f<u.length;f++){const _=document.createElement("style");_.textContent=u[f],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let hf=(()=>{class n extends Sl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const fm=["alt","control","meta","shift"],Uo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},FD={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let LD=(()=>{class n extends Sl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),f=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,f))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let f="";if(fm.forEach(b=>{const C=r.indexOf(b);C>-1&&(r.splice(C,1),f+=b+".")}),f+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=f,_}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Qn.hasOwnProperty(e)&&(e=Qn[e]))}return Uo[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),fm.forEach(u=>{u!=o&&FD[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Hu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:ku},{provide:d.g9A,useValue:function(){Hn.makeCurrent(),Pu.init()},multi:!0},{provide:le,useFactory:function(){return(0,d.RDi)(document),document},deps:[]}]),mf=[[],{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function(){return new d.qLn},deps:[]},{provide:Bo,useClass:hf,multi:!0,deps:[le,d.R0b,d.Lbi]},{provide:Bo,useClass:LD,multi:!0,deps:[le]},[],{provide:Xc,useClass:Xc,deps:[Yn,ri,d.AFp]},{provide:d.FYo,useExisting:Xc},{provide:Al,useExisting:ri},{provide:ri,useClass:ri,deps:[le]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:Yn,useClass:Yn,deps:[Bo,d.R0b]},{provide:class{},useClass:Fu,deps:[]},[]];let _f=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Wi,useExisting:d.AFp},yi]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:mf,imports:[cr,d.hGG]}),n})();"undefined"!=typeof window&&window;var $n=M(5947),as=M(7613);function pt(...n){const e=(0,as.yG)(n);return(0,$n.D)(n,e)}var xn=M(273);class Un extends xn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var An=M(8305);const{isArray:mv}=Array,{getPrototypeOf:sd,prototype:wf,keys:od}=Object;function Df(n){if(1===n.length){const e=n[0];if(mv(e))return{args:e,keys:null};if(function(n){return n&&"object"==typeof n&&sd(n)===wf}(e)){const t=od(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xa=M(4623),gt=M(4753);const{isArray:Wu}=Array;function Ho(n){return(0,gt.U)(e=>function(n,e){return Wu(e)?n(...e):n(e)}(n,e))}function Cf(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var jn=M(8889),_m=M(8395);function $o(n,e,t){n?(0,_m.f)(t,n,e):e()}const vo=(0,M(4893).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Go=M(5373);function qi(...n){return(0,Go.J)(1)((0,$n.D)(n,(0,as.yG)(n)))}var bo=M(9985);function If(n){return new An.y(e=>{(0,bo.Xf)(n()).subscribe(e)})}var Ms=M(5583),_v=M(7908),Gr=M(9947);function Xn(){return(0,Gr.e)((n,e)=>{let t=null;n._refCount++;const r=new jn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ym extends An.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Gr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new _v.w0;const t=this.getSubject();e.add(this.source.subscribe(new jn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=_v.w0.EMPTY)}return e}refCount(){return Xn()(this)}}function Dn(n,e){return(0,Gr.e)((t,r)=>{let o=null,u=0,f=!1;const _=()=>f&&!o&&r.complete();t.subscribe(new jn.Q(r,b=>{null==o||o.unsubscribe();let C=0;const S=u++;(0,bo.Xf)(n(b,S)).subscribe(o=new jn.Q(r,A=>r.next(e?e(b,A,S,C++):A),()=>{o=null,_()}))},()=>{f=!0,_()}))})}var dr=M(9468);function kl(...n){const e=(0,as.yG)(n);return(0,Gr.e)((t,r)=>{(e?qi(n,t,e):qi(n,t)).subscribe(r)})}function WD(n,e,t,r,o){return(u,f)=>{let _=t,b=e,C=0;u.subscribe(new jn.Q(f,S=>{const A=C++;b=_?n(b,S,A):(_=!0,S),r&&f.next(b)},o&&(()=>{_&&f.next(b),f.complete()})))}}function ad(n,e){return(0,Gr.e)(WD(n,e,arguments.length>=2,!0))}function er(n,e){return(0,Gr.e)((t,r)=>{let o=0;t.subscribe(new jn.Q(r,u=>n.call(e,u,o++)&&r.next(u)))})}function zi(n){return(0,Gr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe(new jn.Q(t,void 0,void 0,f=>{u=(0,bo.Xf)(n(f,zi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var wr=M(5724),mn=M(5044);function wo(n,e){return(0,mn.m)(e)?(0,wr.z)(n,e,1):(0,wr.z)(n,1)}function Pa(n){return n<=0?()=>Ms.E:(0,Gr.e)((e,t)=>{let r=[];e.subscribe(new jn.Q(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Sf(n=ld){return(0,Gr.e)((e,t)=>{let r=!1;e.subscribe(new jn.Q(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ld(){return new vo}function ii(n){return(0,Gr.e)((e,t)=>{let r=!1;e.subscribe(new jn.Q(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function ls(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((o,u)=>n(o,u,r)):xa.y,(0,dr.q)(1),t?ii(e):Sf(()=>new vo))}var Pn=M(7384);class us{constructor(e,t){this.id=e,this.url=t}}class Af extends us{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class qu extends us{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yv extends us{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vm extends us{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Nf extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zi extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mf extends us{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wo extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qD extends us{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bm{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Rf{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xf{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vv{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ud{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Wt="primary";class Fl{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Fa(n){return new Fl(n)}const qo="ngNavigationCancelingError";function Zu(n){const e=Error("NavigationCancelingError: "+n);return e[qo]=!0,e}function wm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const f=r[u],_=n[u];if(f.startsWith(":"))o[f.substring(1)]=_;else if(f!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Js(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Ll(n[o],e[o]))return!1;return!0}function Ll(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function cd(n){return Array.prototype.concat.apply([],n)}function Vl(n){return n.length>0?n[n.length-1]:null}function Wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function On(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,$n.D)(Promise.resolve(n)):pt(n)}const zD={exact:function hd(n,e,t){if(!eo(n.segments,e.segments)||!zo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!hd(n.children[r],e.children[r],t))return!1;return!0},subset:Ba},Xs={exact:function(n,e){return Js(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ll(n[t],e[t]))},ignored:()=>!0};function Do(n,e,t){return zD[t.paths](n.root,e.root,t.matrixParams)&&Xs[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ba(n,e,t){return Rs(n,e,e.segments,t)}function Rs(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!eo(o,t)||e.hasChildren()||!zo(o,t,r))}if(n.segments.length===t.length){if(!eo(n.segments,t)||!zo(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Ba(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(eo(n.segments,o)&&zo(n.segments,o,r)&&n.children[Wt])&&Rs(n.children[Wt],e,u,r)}}function zo(n,e,t){return e.every((r,o)=>Xs[t](n[o].parameters,r.parameters))}class wi{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fa(this.queryParams)),this._queryParamMap}toString(){return Bl.serialize(this)}}class tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zo(this)}}class Ua{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Fa(this.parameters)),this._parameterMap}toString(){return Im(this)}}function eo(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Em{}class pd{parse(e){const t=new Sm(e);return new wi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ul(e.root,!0)}`,r=function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ko(t)}=${Ko(o)}`).join("&"):`${Ko(t)}=${Ko(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);var n;return`${t}${r}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const Bl=new pd;function Zo(n){return n.segments.map(e=>Im(e)).join("/")}function Ul(n,e){if(!n.hasChildren())return Zo(n);if(e){const t=n.children[Wt]?Ul(n.children[Wt],!1):"",r=[];return Wr(n.children,(o,u)=>{u!==Wt&&r.push(`${u}:${Ul(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Wr(n.children,(r,o)=>{o===Wt&&(t=t.concat(e(r,o)))}),Wr(n.children,(r,o)=>{o!==Wt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Wt?[Ul(n.children[Wt],!1)]:[`${o}:${Ul(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${Zo(n)}/${t[0]}`:`${Zo(n)}/(${t.join("//")})`}}function wv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ko(n){return wv(n).replace(/%3B/gi,";")}function Cm(n){return wv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gd(n){return decodeURIComponent(n)}function Tm(n){return gd(n.replace(/\+/g,"%20"))}function Im(n){return`${Cm(n.path)}${function(n){return Object.keys(n).map(e=>`;${Cm(e)}=${Cm(n[e])}`).join("")}(n.parameters)}`}const jl=/^[^\/()?;=#]+/;function Hl(n){const e=n.match(jl);return e?e[0]:""}const Ev=/^[^=?&#]+/,_d=/^[^&#]+/;class Sm{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tn([],{}):new tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new tn(e,t)),r}parseSegment(){const e=Hl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ua(gd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Hl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Hl(this.remaining);o&&(r=o,this.capture(r))}e[gd(t)]=gd(r)}parseQueryParam(e){const t=function(n){const e=n.match(Ev);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const f=function(n){const e=n.match(_d);return e?e[0]:""}(this.remaining);f&&(r=f,this.capture(r))}const o=Tm(t),u=Tm(r);if(e.hasOwnProperty(o)){let f=e[o];Array.isArray(f)||(f=[f],e[o]=f),f.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Hl(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Wt);const f=this.parseChildren();t[u]=1===Object.keys(f).length?f[Wt]:new tn([],f),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class yd{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vd(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vd(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Eo(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Eo(e,this._root).map(t=>t.value)}}function vd(n,e){if(n===e.value)return e;for(const t of e.children){const r=vd(n,t);if(r)return r}return null}function Eo(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Eo(n,t);if(r.length)return r.unshift(e),r}return[]}class Co{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function $l(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bd extends yd{constructor(e,t){super(e),this.snapshot=t,wd(this,e)}toString(){return this.snapshot.toString()}}function Am(n,e){const t=function(n,e){const f=new Gl([],{},{},"",{},Wt,e,null,n.root,-1,{});return new Mm("",new Co(f,[]))}(n,e),r=new Un([new Ua("",{})]),o=new Un({}),u=new Un({}),f=new Un({}),_=new Un(""),b=new si(r,o,f,_,u,Wt,e,t.root);return b.snapshot=t.root,new bd(new Co(b,[]),t)}class si{constructor(e,t,r,o,u,f,_,b){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=_,this._futureSnapshot=b}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Fa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Fa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Yo(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Ct(Ct({},e.params),t.params),data:Ct(Ct({},e.data),t.data),resolve:Ct(Ct({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Gl{constructor(e,t,r,o,u,f,_,b,C,S,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=f,this.component=_,this.routeConfig=b,this._urlSegment=C,this._lastPathIndex=S,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mm extends yd{constructor(e,t){super(t),this.url=e,wd(this,t)}toString(){return Lf(this._root)}}function wd(n,e){e.value._routerState=n,e.children.forEach(t=>wd(n,t))}function Lf(n){const e=n.children.length>0?` { ${n.children.map(Lf).join(", ")} } `:"";return`${n.value}${e}`}function Vf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Js(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Js(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Js(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Js(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dd(n,e){const t=Js(n.params,e.params)&&function(n,e){return eo(n,e)&&n.every((t,r)=>Js(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dd(n.parent,e.parent))}function Ed(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Ed(n,r,o);return Ed(n,r)})}(n,e,t);return new Co(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const f=u.route;return f.value._futureSnapshot=e.value,f.children=e.children.map(_=>Ed(n,_)),f}}const r=function(n){return new si(new Un(n.url),new Un(n.params),new Un(n.queryParams),new Un(n.fragment),new Un(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Ed(n,u));return new Co(r,o)}}function Wl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function To(n){return"object"==typeof n&&null!=n&&n.outlets}function ql(n,e,t,r,o){let u={};return r&&Wr(r,(f,_)=>{u[_]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),new wi(t.root===n?e:xs(t.root,n,e),u,o)}function xs(n,e,t){const r={};return Wr(n.children,(o,u)=>{r[u]=o===e?t:xs(o,e,t)}),new tn(n.segments,r)}class zl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wl(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(To);if(o&&o!==Vl(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Td{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Iv(n,e,t){if(n||(n=new tn([],{})),0===n.segments.length&&n.hasChildren())return Zl(n,e,t);const r=function(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const f=n.segments[o],_=t[r];if(To(_))break;const b=`${_}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===b)break;if(b&&C&&"object"==typeof C&&void 0===C.outlets){if(!jf(b,C,f))return u;r+=2}else{if(!jf(b,{},f))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new tn(n.segments.slice(0,r.pathIndex),{});return u.children[Wt]=new tn(n.segments.slice(r.pathIndex),n.children),Zl(u,0,o)}return r.match&&0===o.length?new tn(n.segments,{}):r.match&&!n.hasChildren()?Yu(n,e,t):r.match?Zl(n,0,o):Yu(n,e,t)}function Zl(n,e,t){if(0===t.length)return new tn(n.segments,{});{const r=function(n){return To(n[0])?n[0].outlets:{[Wt]:n}}(t),o={};return Wr(r,(u,f)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[f]=Iv(n.children[f],e,u))}),Wr(n.children,(u,f)=>{void 0===r[f]&&(o[f]=u)}),new tn(n.segments,o)}}function Yu(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(To(u)){const b=Sv(u.outlets);return new tn(r,b)}if(0===o&&Wl(t[0])){r.push(new Ua(n.segments[e].path,Uf(t[0]))),o++;continue}const f=To(u)?u.outlets[Wt]:`${u}`,_=o<t.length-1?t[o+1]:null;f&&_&&Wl(_)?(r.push(new Ua(f,Uf(_))),o+=2):(r.push(new Ua(f,{})),o++)}return new tn(r,{})}function Sv(n){const e={};return Wr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Yu(new tn([],{}),0,t))}),e}function Uf(n){const e={};return Wr(n,(t,r)=>e[r]=`${t}`),e}function jf(n,e,t){return n==t.path&&Js(e,t.parameters)}class Hf{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=$l(t);e.children.forEach(u=>{const f=u.value.outlet;this.deactivateRoutes(u,o[f],r),delete o[f]}),Wr(o,(u,f)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const f=r.getContext(o.outlet);f&&this.deactivateChildRoutes(e,t,f.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=$l(e);for(const f of Object.keys(u))this.deactivateRouteAndItsChildren(u[f],o);if(r&&r.outlet){const f=r.outlet.detach(),_=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:f,route:e,contexts:_})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=$l(e);for(const f of Object.keys(u))this.deactivateRouteAndItsChildren(u[f],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=$l(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new ud(u.value.snapshot))}),e.children.length&&this.forwardEvent(new xf(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Vf(o),o===u)if(o.component){const f=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,f.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const f=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const _=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),f.children.onOutletReAttached(_.contexts),f.attachRef=_.componentRef,f.route=_.route.value,f.outlet&&f.outlet.attach(_.componentRef,_.route.value),Vf(_.route.value),this.activateChildRoutes(e,null,f.children)}else{const _=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),b=_?_.module.componentFactoryResolver:null;f.attachRef=null,f.route=o,f.resolver=b,f.outlet&&f.outlet.activateWith(o,b),this.activateChildRoutes(e,null,f.children)}}else this.activateChildRoutes(e,null,r)}}class Gf{constructor(e,t){this.routes=e,this.module=t}}function Io(n){return"function"==typeof n}function Qo(n){return n instanceof wi}const Qu=Symbol("INITIAL_VALUE");function $a(){return Dn(n=>function(...n){const e=(0,as.yG)(n),t=(0,as.jO)(n),{args:r,keys:o}=Df(n);if(0===r.length)return(0,$n.D)([],e);const u=new An.y(function(n,e,t=xa.y){return r=>{$o(e,()=>{const{length:o}=n,u=new Array(o);let f=o,_=o;for(let b=0;b<o;b++)$o(e,()=>{const C=(0,$n.D)(n[b],e);let S=!1;C.subscribe(new jn.Q(r,A=>{u[b]=A,S||(S=!0,_--),_||r.next(t(u.slice()))},()=>{--f||r.complete()}))},r)},r)}}(r,e,o?f=>Cf(o,f):xa.y));return t?u.pipe(Ho(t)):u}(n.map(e=>e.pipe((0,dr.q)(1),kl(Qu)))).pipe(ad((e,t)=>{let r=!1;return t.reduce((o,u,f)=>o!==Qu?o:(u===Qu&&(r=!0),r||!1!==u&&f!==t.length-1&&!Qo(u)?o:u),e)},Qu),er(e=>e!==Qu),(0,gt.U)(e=>Qo(e)?e:!0===e),(0,dr.q)(1)))}class Om{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Jo,this.attachRef=null}}class Jo{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Om,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let qf=(()=>{class n{constructor(t,r,o,u,f){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=f,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||Wt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const f=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,b=new km(t,_,this.location.injector);this.activated=this.location.createComponent(f,this.location.length,b),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Jo),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class km{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===si?this.route:e===Jo?this.childContexts:this.parent.get(e,t)}}let Pm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[qf],encapsulation:2}),n})();function Fm(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];QD(r,JD(e,r))}}function QD(n,e){n.children&&Fm(n.children,e)}function JD(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Xo(n){const e=n.children&&n.children.map(Xo),t=e?Ni(Ct({},n),{children:e}):Ct({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=Pm),t}function Nn(n){return n.outlet||Wt}function Kl(n,e){const t=n.filter(r=>Nn(r)===e);return t.push(...n.filter(r=>Nn(r)!==e)),t}const Id={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ju(n,e,t){var _;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Ct({},Id):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const o=(e.matcher||wm)(t,n,e);if(!o)return Ct({},Id);const u={};Wr(o.posParams,(b,C)=>{u[C]=b.path});const f=o.consumed.length>0?Ct(Ct({},u),o.consumed[o.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:o.consumed,lastChild:o.consumed.length,parameters:f,positionalParamSegments:null!=(_=o.posParams)?_:{}}}function hr(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Wa(n,e,r)&&Nn(r)!==Wt)}(n,t,r)){const f=new tn(e,function(n,e,t,r){const o={};o[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Nn(u)!==Wt){const f=new tn([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,o[Nn(u)]=f}return o}(n,e,r,new tn(t,n.children)));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Wa(n,e,r))}(n,t,r)){const f=new tn(n.segments,function(n,e,t,r,o,u){const f={};for(const _ of r)if(Wa(n,t,_)&&!o[Nn(_)]){const b=new tn([],{});b._sourceSegment=n,b._segmentIndexShift="legacy"===u?n.segments.length:e.length,f[Nn(_)]=b}return Ct(Ct({},o),f)}(n,e,t,r,n.children,o));return f._sourceSegment=n,f._segmentIndexShift=e.length,{segmentGroup:f,slicedSegments:t}}const u=new tn(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Wa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Sd(n,e,t,r){return!!(Nn(n)===r||r!==Wt&&Wa(e,t,n))&&("**"===n.path||Ju(e,n,t).matched)}function zf(n,e,t){return 0===e.length&&!n.children[t]}class Yl{constructor(e){this.segmentGroup=e||null}}class Zf{constructor(e){this.urlTree=e}}function Os(n){return new An.y(e=>e.error(new Yl(n)))}function Kf(n){return new An.y(e=>e.error(new Zf(n)))}function xv(n){return new An.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Qf{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=hr(this.urlTree.root,[],[],this.config).segmentGroup,t=new tn(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Wt).pipe((0,gt.U)(u=>this.createUrlTree(Ad(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zi(u=>{if(u instanceof Zf)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Yl?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Wt).pipe((0,gt.U)(o=>this.createUrlTree(Ad(o),e.queryParams,e.fragment))).pipe(zi(o=>{throw o instanceof Yl?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new tn([],{[Wt]:e}):e;return new wi(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(u=>new tn([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,$n.D)(o).pipe(wo(u=>{const f=r.children[u],_=Kl(t,u);return this.expandSegmentGroup(e,_,f,u).pipe((0,gt.U)(b=>({segment:b,outlet:u})))}),ad((u,f)=>(u[f.outlet]=f.segment,u),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?er((o,u)=>n(o,u,r)):xa.y,Pa(1),t?ii(e):Sf(()=>new vo))}())}expandSegment(e,t,r,o,u,f){return(0,$n.D)(r).pipe(wo(_=>this.expandSegmentAgainstRoute(e,t,r,_,o,u,f).pipe(zi(C=>{if(C instanceof Yl)return pt(null);throw C}))),ls(_=>!!_),zi((_,b)=>{if(_ instanceof vo||"EmptyError"===_.name){if(zf(t,o,u))return pt(new tn([],{}));throw new Yl(t)}throw _}))}expandSegmentAgainstRoute(e,t,r,o,u,f,_){return Sd(o,t,u,f)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,f):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f):Os(t):Os(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,f):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Kf(u):this.lineralizeSegments(r,u).pipe((0,wr.z)(f=>{const _=new tn(f,{});return this.expandSegment(e,_,t,f,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,f){const{matched:_,consumedSegments:b,lastChild:C,positionalParamSegments:S}=Ju(t,o,u);if(!_)return Os(t);const A=this.applyRedirectCommands(b,o.redirectTo,S);return o.redirectTo.startsWith("/")?Kf(A):this.lineralizeSegments(o,A).pipe((0,wr.z)(F=>this.expandSegment(e,t,r,F.concat(u.slice(C)),f,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?pt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,gt.U)(F=>(r._loadedConfig=F,new tn(o,{})))):pt(new tn(o,{}));const{matched:f,consumedSegments:_,lastChild:b}=Ju(t,r,o);if(!f)return Os(t);const C=o.slice(b);return this.getChildConfig(e,r,o).pipe((0,wr.z)(A=>{const F=A.module,H=A.routes,{segmentGroup:ie,slicedSegments:Se}=hr(t,_,C,H),Oe=new tn(ie.segments,ie.children);if(0===Se.length&&Oe.hasChildren())return this.expandChildren(F,H,Oe).pipe((0,gt.U)(ot=>new tn(_,ot)));if(0===H.length&&0===Se.length)return pt(new tn(_,{}));const dt=Nn(r)===u;return this.expandSegment(F,Oe,H,Se,dt?Wt:u,!0).pipe((0,gt.U)(kt=>new tn(_.concat(kt.segments),kt.children)))}))}getChildConfig(e,t,r){return t.children?pt(new Gf(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?pt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,wr.z)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,gt.U)(u=>(t._loadedConfig=u,u))):(n=t,new An.y(e=>e.error(Zu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):pt(new Gf([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?pt(o.map(f=>{const _=e.get(f);let b;if((n=_)&&Io(n.canLoad))b=_.canLoad(t,r);else{if(!Io(_))throw new Error("Invalid CanLoad guard");b=_(t,r)}var n;return On(b)})).pipe($a(),(0,Pn.b)(f=>{if(!Qo(f))return;const _=Zu(`Redirecting to "${this.urlSerializer.serialize(f)}"`);throw _.url=f,_}),(0,gt.U)(f=>!0===f)):pt(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return pt(r);if(o.numberOfChildren>1||!o.children[Wt])return xv(e.redirectTo);o=o.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new wi(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const _=o.substring(1);r[u]=t[_]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let f={};return Wr(t.children,(_,b)=>{f[b]=this.createSegmentGroup(e,_,r,o)}),new tn(u,f)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Ad(n){const e={};for(const r of Object.keys(n.children)){const u=Ad(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new tn(n.segments.concat(e.segments),e.children)}return n}(new tn(n.segments,e))}class Xu{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cs{constructor(e,t){this.component=e,this.route=t}}function ec(n,e,t){const r=n._root;return nc(r,e?e._root:null,t,[r.value])}function tc(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function nc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=$l(e);return n.children.forEach(f=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,f=e?e.value:null,_=t?t.getContext(n.value.outlet):null;if(f&&u.routeConfig===f.routeConfig){const b=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!eo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!eo(n.url,e.url)||!Js(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dd(n,e)||!Js(n.queryParams,e.queryParams);default:return!Dd(n,e)}}(f,u,u.routeConfig.runGuardsAndResolvers);b?o.canActivateChecks.push(new Xu(r)):(u.data=f.data,u._resolvedData=f._resolvedData),nc(n,e,u.component?_?_.children:null:t,r,o),b&&_&&_.outlet&&_.outlet.isActivated&&o.canDeactivateChecks.push(new cs(_.outlet.component,f))}else f&&ea(e,_,o),o.canActivateChecks.push(new Xu(r)),nc(n,null,u.component?_?_.children:null:t,r,o)})(f,u[f.value.outlet],t,r.concat([f.value]),o),delete u[f.value.outlet]}),Wr(u,(f,_)=>ea(f,t.getContext(_),o)),o}function ea(n,e,t){const r=$l(n),o=n.value;Wr(r,(u,f)=>{ea(u,o.component?e?e.children.getContext(f):null:e,t)}),t.canDeactivateChecks.push(new cs(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Ke{}function st(n){return new An.y(e=>e.error(n))}class Et{constructor(e,t,r,o,u,f){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f}recognize(){const e=hr(this.urlTree.root,[],[],this.config.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Wt);if(null===t)return null;const r=new Gl([],Object.freeze({}),Object.freeze(Ct({},this.urlTree.queryParams)),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Co(r,t),u=new Mm(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Yo(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const f=t.children[u],_=Kl(e,u),b=this.processSegmentGroup(_,f,u);if(null===b)return null;r.push(...b)}const o=rc(r);return o.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const u of e){const f=this.processSegmentAgainstRoute(u,t,r,o);if(null!==f)return f}return zf(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Sd(e,t,r,o))return null;let u,f=[],_=[];if("**"===e.path){const H=r.length>0?Vl(r).parameters:{};u=new Gl(r,H,Object.freeze(Ct({},this.urlTree.queryParams)),this.urlTree.fragment,ta(e),Nn(e),e.component,e,Xf(t),Rd(t)+r.length,xd(e))}else{const H=Ju(t,e,r);if(!H.matched)return null;f=H.consumedSegments,_=r.slice(H.lastChild),u=new Gl(f,H.parameters,Object.freeze(Ct({},this.urlTree.queryParams)),this.urlTree.fragment,ta(e),Nn(e),e.component,e,Xf(t),Rd(t)+f.length,xd(e))}const b=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:C,slicedSegments:S}=hr(t,f,_,b.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);var n;if(0===S.length&&C.hasChildren()){const H=this.processChildren(b,C);return null===H?null:[new Co(u,H)]}if(0===b.length&&0===S.length)return[new Co(u,[])];const A=Nn(e)===o,F=this.processSegment(b,C,S,A?Wt:o);return null===F?null:[new Co(u,F)]}}function Ki(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rc(n){const e=[],t=new Set;for(const r of n){if(!Ki(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=rc(r.children);e.push(new Co(r.value,o))}return e.filter(r=>!t.has(r))}function Xf(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Rd(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function ta(n){return n.data||{}}function xd(n){return n.resolve||{}}function na(n){return Dn(e=>{const t=n(e);return t?(0,$n.D)(t).pipe((0,gt.U)(()=>e)):pt(e)})}class PI extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const tp=new d.OlP("ROUTES");class eE{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,gt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const f=u.create(e);return new Gf(cd(f.injector.get(tp,void 0,d.XFs.Self|d.XFs.Optional)).map(Xo),f)}),zi(u=>{throw t._loader$=void 0,u}));return t._loader$=new ym(o,()=>new xn.x).pipe(Xn()),t._loader$}loadModuleFactory(e){return On(e()).pipe((0,wr.z)(t=>t instanceof d.YKP?pt(t):(0,$n.D)(this.compiler.compileModuleAsync(t))))}}class LI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function VI(n){throw n}function BI(n,e,t){return e.parse("/")}function tE(n,e){return pt(null)}const nE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Di=(()=>{class n{constructor(t,r,o,u,f,_,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xn.x,this.errorHandler=VI,this.malformedUriErrorHandler=BI,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tE,afterPreactivation:tE},this.urlHandlingStrategy=new LI,this.routeReuseStrategy=new PI,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=f.get(d.h0i),this.console=f.get(d.c2e);const A=f.get(d.R0b);this.isNgZoneEnabled=A instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new wi(new tn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new eE(f,_,F=>this.triggerEvent(new zu(F)),F=>this.triggerEvent(new bm(F))),this.routerState=Am(this.currentUrlTree,this.rootComponentType),this.transitions=new Un({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null==(t=this.location.getState())?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(er(o=>0!==o.id),(0,gt.U)(o=>Ni(Ct({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Dn(o=>{let u=!1,f=!1;return pt(o).pipe((0,Pn.b)(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Ni(Ct({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(_=>{const b=this.browserUrlTree.toString(),C=!this.navigated||_.extractedUrl.toString()!==b||b!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return jm(_.source)&&(this.browserUrlTree=_.extractedUrl),pt(_).pipe(Dn(A=>{const F=this.transitions.getValue();return r.next(new Af(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),F!==this.transitions.getValue()?Ms.E:Promise.resolve(A)}),function(n,e,t,r){return Dn(o=>function(n,e,t,r,o){return new Qf(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,gt.U)(u=>Ni(Ct({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Pn.b)(A=>{this.currentNavigation=Ni(Ct({},this.currentNavigation),{finalUrl:A.urlAfterRedirects})}),function(n,e,t,r,o){return(0,wr.z)(u=>function(n,e,t,r,o="emptyOnly",u="legacy"){try{const f=new Et(n,e,t,r,o,u).recognize();return null===f?st(new Ke):pt(f)}catch(f){return st(f)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,gt.U)(f=>Ni(Ct({},u),{targetSnapshot:f}))))}(this.rootComponentType,this.config,A=>this.serializeUrl(A),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Pn.b)(A=>{if("eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(H,A)}this.browserUrlTree=A.urlAfterRedirects}const F=new Nf(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(F)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:H,source:ie,restoredState:Se,extras:Oe}=_,dt=new Af(F,this.serializeUrl(H),ie,Se);r.next(dt);const at=Am(H,this.rootComponentType).snapshot;return pt(Ni(Ct({},_),{targetSnapshot:at,urlAfterRedirects:H,extras:Ni(Ct({},Oe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,_.resolve(null),Ms.E}),na(_=>{const{targetSnapshot:b,id:C,extractedUrl:S,rawUrl:A,extras:{skipLocationChange:F,replaceUrl:H}}=_;return this.hooks.beforePreactivation(b,{navigationId:C,appliedUrlTree:S,rawUrlTree:A,skipLocationChange:!!F,replaceUrl:!!H})}),(0,Pn.b)(_=>{const b=new Zi(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(b)}),(0,gt.U)(_=>Ni(Ct({},_),{guards:ec(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,e){return(0,wr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:f}}=t;return 0===f.length&&0===u.length?pt(Ni(Ct({},t),{guardsResult:!0})):function(n,e,t,r){return(0,$n.D)(n).pipe((0,wr.z)(o=>function(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?pt(u.map(_=>{const b=tc(_,e,o);let C;if(function(n){return n&&Io(n.canDeactivate)}(b))C=On(b.canDeactivate(n,e,t,r));else{if(!Io(b))throw new Error("Invalid CanDeactivate guard");C=On(b(n,e,t,r))}return C.pipe(ls())})).pipe($a()):pt(!0)}(o.component,o.route,t,e,r)),ls(o=>!0!==o,!0))}(f,r,o,n).pipe((0,wr.z)(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,e,t,r){return(0,$n.D)(e).pipe(wo(o=>qi(function(n,e){return null!==n&&e&&e(new Rf(n)),pt(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new vv(n)),pt(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(f=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(f)).filter(f=>null!==f).map(f=>If(()=>pt(f.guards.map(b=>{const C=tc(b,f.node,t);let S;if(function(n){return n&&Io(n.canActivateChild)}(C))S=On(C.canActivateChild(r,n));else{if(!Io(C))throw new Error("Invalid CanActivateChild guard");S=On(C(r,n))}return S.pipe(ls())})).pipe($a())));return pt(u).pipe($a())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return pt(!0);const o=r.map(u=>If(()=>{const f=tc(u,e,t);let _;if(function(n){return n&&Io(n.canActivate)}(f))_=On(f.canActivate(e,n));else{if(!Io(f))throw new Error("Invalid CanActivate guard");_=On(f(e,n))}return _.pipe(ls())}));return pt(o).pipe($a())}(n,o.route,t))),ls(o=>!0!==o,!0))}(r,u,n,e):pt(_)),(0,gt.U)(_=>Ni(Ct({},t),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),(0,Pn.b)(_=>{if(Qo(_.guardsResult)){const C=Zu(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw C.url=_.guardsResult,C}const b=new Mf(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(b)}),er(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),na(_=>{if(_.guards.canActivateChecks.length)return pt(_).pipe((0,Pn.b)(b=>{const C=new Wo(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(C)}),Dn(b=>{let C=!1;return pt(b).pipe(function(n,e){return(0,wr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return pt(t);let u=0;return(0,$n.D)(o).pipe(wo(f=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return pt({});const u={};return(0,$n.D)(o).pipe((0,wr.z)(f=>function(n,e,t,r){const o=tc(n,e,r);return On(o.resolve?o.resolve(e,t):o(e,t))}(n[f],e,t,r).pipe((0,Pn.b)(_=>{u[f]=_}))),Pa(1),(0,wr.z)(()=>Object.keys(u).length===o.length?pt(u):Ms.E))}(n._resolve,n,e,r).pipe((0,gt.U)(u=>(n._resolvedData=u,n.data=Ct(Ct({},n.data),Yo(n,t).resolve),null)))}(f.route,r,n,e)),(0,Pn.b)(()=>u++),Pa(1),(0,wr.z)(f=>u===o.length?pt(t):Ms.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Pn.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(b),this.cancelNavigationTransition(b,"At least one route resolver didn't emit any value."))}}))}),(0,Pn.b)(b=>{const C=new qD(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);this.triggerEvent(C)}))}),na(_=>{const{targetSnapshot:b,id:C,extractedUrl:S,rawUrl:A,extras:{skipLocationChange:F,replaceUrl:H}}=_;return this.hooks.afterPreactivation(b,{navigationId:C,appliedUrlTree:S,rawUrlTree:A,skipLocationChange:!!F,replaceUrl:!!H})}),(0,gt.U)(_=>{const b=function(n,e,t){const r=Ed(n,e._root,t?t._root:void 0);return new bd(r,e)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Ni(Ct({},_),{targetRouterState:b})}),(0,Pn.b)(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new Hf(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),(0,Pn.b)({next(){u=!0},complete(){u=!0}}),function(n){return(0,Gr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var _;u||f||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null==(_=this.currentNavigation)?void 0:_.id)===o.id&&(this.currentNavigation=null)}),zi(_=>{if(f=!0,function(n){return n&&n[qo]}(_)){const b=Qo(_.url);b||(this.navigated=!0,this.restoreHistory(o,!0));const C=new yv(o.id,this.serializeUrl(o.extractedUrl),_.message);r.next(C),b?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||jm(o.source)};this.scheduleNavigation(S,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const b=new vm(o.id,this.serializeUrl(o.extractedUrl),_);r.next(b);try{o.resolve(this.errorHandler(_))}catch(C){o.reject(C)}}return Ms.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Ct(Ct({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var _;const o={replaceUrl:!0},u=(null==(_=t.state)?void 0:_.navigationId)?t.state:null;if(u){const b=Ct({},u);delete b.navigationId,delete b.\u0275routerPageId,0!==Object.keys(b).length&&(o.state=b)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Fm(t),this.config=t.map(Xo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:f,queryParamsHandling:_,preserveFragment:b}=r,C=o||this.routerState.root,S=b?this.currentUrlTree.fragment:f;let A=null;switch(_){case"merge":A=Ct(Ct({},this.currentUrlTree.queryParams),u);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),function(n,e,t,r,o){if(0===t.length)return ql(e.root,e.root,e,r,o);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zl(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,f)=>{if("object"==typeof u&&null!=u){if(u.outlets){const _={};return Wr(u.outlets,(b,C)=>{_[C]="string"==typeof b?b.split("/"):b}),[...o,{outlets:_}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===f?(u.split("/").forEach((_,b)=>{0==b&&"."===_||(0==b&&""===_?t=!0:".."===_?e++:""!=_&&o.push(_))}),o):[...o,u]},[]);return new zl(t,e,r)}(t);if(u.toRoot())return ql(e.root,new tn([],{}),e,r,o);const f=function(n,e,t){if(n.isAbsolute)return new Td(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Td(u,u===e.root,0)}const r=Wl(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Td(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),_=f.processChildren?Zl(f.segmentGroup,f.index,u.commands):Iv(f.segmentGroup,f.index,u.commands);return ql(f.segmentGroup,_,e,r,o)}(C,this.currentUrlTree,t,A,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Qo(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Ct({},nE):!1===r?Ct({},Fv):r,Qo(t))return Do(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Do(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new qu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,f){var dt,at,kt;if(this.disposed)return Promise.resolve(!1);const _=this.transitions.value,b=jm(r)&&_&&!jm(_.source),C=_.rawUrl.toString()===t.toString(),S=_.id===(null==(dt=this.currentNavigation)?void 0:dt.id);if(b&&C&&S)return Promise.resolve(!0);let F,H,ie;f?(F=f.resolve,H=f.reject,ie=f.promise):ie=new Promise((ot,St)=>{F=ot,H=St});const Se=++this.navigationId;let Oe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Oe=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!=(at=this.browserPageId)?at:0:(null!=(kt=this.browserPageId)?kt:0)+1):Oe=0,this.setTransition({id:Se,targetPageId:Oe,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:F,reject:H,promise:ie,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ie.catch(ot=>Promise.reject(ot))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Ct(Ct({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const f=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(o=this.currentNavigation)?void 0:o.finalUrl)||0===f?this.currentUrlTree===(null==(u=this.currentNavigation)?void 0:u.finalUrl)&&0===f&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(f)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new yv(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function jm(n){return"imperative"!==n}let Hm=(()=>{class n{constructor(t,r,o,u,f){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=f,this.commands=null,this.onChanges=new xn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:sc(this.skipLocationChange),replaceUrl:sc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:sc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Di),d.Y36(si),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function sc(n){return""===n||!!n}class Vv{}class np{preload(e,t){return pt(null)}}let iE=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new eE(o,r,b=>t.triggerEvent(new zu(b)),b=>t.triggerEvent(new bm(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(er(t=>t instanceof qu),wo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const f=u._loadedConfig;o.push(this.processRoutes(f.module,f.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,$n.D)(o).pipe((0,Go.J)(),(0,gt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?pt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,wr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Di),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(Vv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Gm=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Af?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Pl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Pl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ql=new d.OlP("ROUTER_CONFIGURATION"),Wm=new d.OlP("ROUTER_FORROOT_GUARD"),sE=[Be,{provide:Em,useClass:pd},{provide:Di,useFactory:function(n,e,t,r,o,u,f={},_,b){const C=new Di(null,n,e,t,r,o,cd(u));return _&&(C.urlHandlingStrategy=_),b&&(C.routeReuseStrategy=b),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(f,C),f.enableTracing&&C.events.subscribe(S=>{var A,F;null==(A=console.group)||A.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null==(F=console.groupEnd)||F.call(console)}),C},deps:[Em,Jo,Be,d.zs3,d.Sil,tp,Ql,[class{},new d.FiY],[class{},new d.FiY]]},Jo,{provide:si,useFactory:function(n){return n.routerState.root},deps:[Di]},iE,np,class{preload(e,t){return t().pipe(zi(()=>pt(null)))}},{provide:Ql,useValue:{enableTracing:!1}}];function qm(){return new d.PXZ("Router",Di)}let kd=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[sE,zm(t),{provide:Wm,useFactory:aE,deps:[[Di,new d.FiY,new d.tp0]]},{provide:Ql,useValue:r||{}},{provide:ae,useFactory:Bv,deps:[fe,[new d.tBr(ye),new d.FiY],Ql]},{provide:Gm,useFactory:oE,deps:[Di,rt,Ql]},{provide:Vv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:np},{provide:d.PXZ,multi:!0,useFactory:qm},[Uv,{provide:d.ip1,multi:!0,useFactory:$I,deps:[Uv]},{provide:Zm,useFactory:uE,deps:[Uv]},{provide:d.tb,multi:!0,useExisting:Zm}]]}}static forChild(t){return{ngModule:n,providers:[zm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wm,8),d.LFG(Di,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function oE(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Gm(n,e,t)}function Bv(n,e,t={}){return t.useHash?new me(n,e):new Ae(n,e)}function aE(n){return"guarded"}function zm(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:tp,multi:!0,useValue:n}]}let Uv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new xn.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(_=>r=_),u=this.injector.get(Di),f=this.injector.get(Ql);return"disabled"===f.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===f.initialNavigation||"enabledBlocking"===f.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?pt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Ql),o=this.injector.get(iE),u=this.injector.get(Gm),f=this.injector.get(Di),_=this.injector.get(d.z2F);t===_.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&f.initialNavigation(),o.setUpPreloading(),u.init(),f.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function $I(n){return n.appInitializer.bind(n)}function uE(n){return n.bootstrapListener.bind(n)}const Zm=new d.OlP("Router Initializer");var jv=M(4762),So=M(5222),ks=M(4763),GI=M(1733);class WI extends xn.x{constructor(e=1/0,t=1/0,r=GI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:f}=this;t||(r.push(e),!o&&r.push(u.now()+f)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let f=0;f<u.length&&!e.closed;f+=r?1:2)e.next(u[f]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const f=t.now();let _=0;for(let b=1;b<r.length&&r[b]<=f;b+=2)_=b;_&&r.splice(0,_+1)}}}var Ao=M(3174);function Hv(n,e,t){var r,o;let u,f=!1;return n&&"object"==typeof n?(u=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=n.windowTime)&&void 0!==o?o:1/0,f=!!n.refCount,t=n.scheduler):u=null!=n?n:1/0,(0,Ao.B)({connector:()=>new WI(u,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:f})}function ip(n,e){return(0,mn.m)(e)?Dn(()=>n,e):Dn(()=>n)}var zr=M(4918),Ei=M(7905),qI=M(3045),dE=M(7892);const zI=new d.OlP("angularfire2.messaging.vapid-key"),ZI=new d.OlP("angularfire2.messaging.service-worker-registeration");let $v=(()=>{class n{constructor(t,r,o,u,f,_,b){const C=b,S=pt(void 0).pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),Dn(qI.Gb),Dn(H=>H?M.e(192).then(M.bind(M,2192)):Ms.E),(0,gt.U)(()=>(0,Ei.on)(t,u,r)),Dn(H=>(0,Ei.cc)(`${H.name}.messaging`,"AngularFireMessaging",H.name,()=>(0,jv.mG)(this,void 0,void 0,function*(){return H.messaging()}),[])),Hv({bufferSize:1,refCount:!1}));this.requestPermission=S.pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),Dn(()=>Notification.requestPermission())),this.getToken=S.pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),Dn(H=>(0,jv.mG)(this,void 0,void 0,function*(){if("granted"===Notification.permission){const ie=C?yield C:null;return yield H.getToken({vapidKey:_,serviceWorkerRegistration:ie})}return null})));const A=new An.y(H=>{navigator.permissions.query({name:"notifications"}).then(ie=>{ie.onchange=()=>H.next()})}),F=S.pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),ip(A),ip(this.getToken));return this.tokenChanges=S.pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),Dn(()=>qi(this.getToken,F))),this.messages=S.pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),Dn(H=>new An.y(ie=>H.onMessage(ie)))),this.requestToken=S.pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),Dn(()=>this.requestPermission),zi(()=>pt(null)),(0,wr.z)(()=>this.tokenChanges)),this.deleteToken=()=>S.pipe((0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular),Dn(H=>H.deleteToken()),ii(!1)),(0,Ei.pX)(this,S,u)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ei.Dh),d.LFG(Ei.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(zr.HU),d.LFG(zI,8),d.LFG(ZI,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ht=(()=>{class n{constructor(){dE.Z.registerVersion("angularfire",zr.q4.full,"fcm-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$v]}),n})();var Km=M(2210);function Ym(){return(0,Gr.e)((n,e)=>{let t,r=!1;n.subscribe(new jn.Q(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Qm(n,e){return n===e}M(4802);var ht,Gv=M(6293),Ie=M(8239),za=M(1572),no=M(1177),ia=M(3855),nn=M(4213),Wv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jl={},fE=fE||{},Ft=Wv||self;function ac(){}function op(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function lc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var pE="closure_uid_"+(1e9*Math.random()>>>0),KI=0;function YI(n,e,t){return n.call.apply(n.bind,arguments)}function QI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Ci(n,e,t){return(Ci=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?YI:QI).apply(null,arguments)}function ap(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var f=Array(arguments.length-2),_=2;_<arguments.length;_++)f[_-2]=arguments[_];return e.prototype[o].apply(r,f)}}function Xl(){this.s=this.s,this.o=this.o}var gE={};Xl.prototype.s=!1,Xl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,pE)&&n[pE]||(n[pE]=++KI)}(this);delete gE[n]}},Xl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},mE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function JI(n){return Array.prototype.concat.apply([],arguments)}function _E(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Kv(n){return/^[\s\xa0]*$/.test(n)}var hs,XI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ds(n,e){return-1!=n.indexOf(e)}function yE(n,e){return n<e?-1:n>e?1:0}e:{var eS=Ft.navigator;if(eS){var tS=eS.userAgent;if(tS){hs=tS;break e}}hs=""}function vE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Za(n){const e={};for(const t in n)e[t]=n[t];return e}var Jm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Jm.length;u++)t=Jm[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Xm(n){return Xm[" "](n),n}Xm[" "]=ac;var t_,n,wE=ds(hs,"Opera"),eu=ds(hs,"Trident")||ds(hs,"MSIE"),DE=ds(hs,"Edge"),sa=DE||eu,Qv=ds(hs,"Gecko")&&!(ds(hs.toLowerCase(),"webkit")&&!ds(hs,"Edge"))&&!(ds(hs,"Trident")||ds(hs,"MSIE"))&&!ds(hs,"Edge"),nS=ds(hs.toLowerCase(),"webkit")&&!ds(hs,"Edge");function e_(){var n=Ft.document;return n?n.documentMode:void 0}e:{var n_="",Jv=(n=hs,Qv?/rv:([^\);]+)(\)|;)/.exec(n):DE?/Edge\/([\d\.]+)/.exec(n):eu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):nS?/WebKit\/(\S+)/.exec(n):wE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Jv&&(n_=Jv?Jv[1]:""),eu){var Xv=e_();if(null!=Xv&&Xv>parseFloat(n_)){t_=String(Xv);break e}}t_=n_}var lp={};function Pd(){return e=lp,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=XI(String(t_)).split("."),t=XI("9").split("."),r=Math.max(e.length,t.length);for(let f=0;0==n&&f<r;f++){var o=e[f]||"",u=t[f]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=yE(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||yE(0==o[2].length,0==u[2].length)||yE(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n}();var e}var cp=Ft.document&&eu&&(e_()||parseInt(t_,10))||void 0,Fd=function(){if(!Ft.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ft.addEventListener("test",ac,e),Ft.removeEventListener("test",ac,e)}catch(t){}return n}();function Fi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Ld(n,e){if(Fi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Qv){e:{try{Xm(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:EE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ld.Z.h.call(this)}}Fi.prototype.h=function(){this.defaultPrevented=!0},Pi(Ld,Fi);var EE={2:"touch",3:"pen",4:"mouse"};Ld.prototype.h=function(){Ld.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var cc="closure_listenable_"+(1e6*Math.random()|0),e0=0;function CE(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++e0,this.ca=this.fa=!1}function dc(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function r_(n){this.src=n,this.g={},this.h=0}function i_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=zv(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(dc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function TE(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}r_.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var f=TE(n,e,r,o);return-1<f?(e=n[f],t||(e.fa=!1)):((e=new CE(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var s_="closure_lm_"+(1e6*Math.random()|0),o_={};function IE(n,e,t,r,o){if(r&&r.once)return SE(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)IE(n,e[u],t,r,o);return null}return t=ME(t),n&&n[cc]?n.N(e,t,lc(r)?!!r.capture:!!r,o):t0(n,e,t,!1,r,o)}function t0(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var f=lc(o)?!!o.capture:!!o,_=NE(n);if(_||(n[s_]=_=new r_(n)),(t=_.add(e,t,r,f,u)).proxy)return t;if(r=function(){var e=cR;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Fd||(o=f),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(AE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function SE(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)SE(n,e[u],t,r,o);return null}return t=ME(t),n&&n[cc]?n.O(e,t,lc(r)?!!r.capture:!!r,o):t0(n,e,t,!0,r,o)}function fs(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)fs(n,e[u],t,r,o);else r=lc(r)?!!r.capture:!!r,t=ME(t),n&&n[cc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=TE(u=n.g[e],t,r,o))&&(dc(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=NE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=TE(e,t,r,o)),(t=-1<n?e[n]:null)&&n0(t))}function n0(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[cc])i_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(AE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=NE(e))?(i_(t,n),0==t.h&&(t.src=null,e[s_]=null)):dc(n)}}}function AE(n){return n in o_?o_[n]:o_[n]="on"+n}function cR(n,e){if(n.ca)n=!0;else{e=new Ld(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&n0(n),n=t.call(r,e)}return n}function NE(n){return(n=n[s_])instanceof r_?n:null}var a_="__closure_events_fn_"+(1e9*Math.random()>>>0);function ME(n){return"function"==typeof n?n:(n[a_]||(n[a_]=function(e){return n.handleEvent(e)}),n[a_])}function oi(){Xl.call(this),this.i=new r_(this),this.P=this,this.I=null}function Zr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Fi(e,n);else if(e instanceof Fi)e.target=e.target||n;else{var o=e;bE(e=new Fi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var f=e.g=t[u];o=dp(f,r,!0,e)&&o}if(o=dp(f=e.g=n,r,!0,e)&&o,o=dp(f,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=dp(f=e.g=t[u],r,!1,e)&&o}function dp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var f=e[u];if(f&&!f.ca&&f.capture==t){var _=f.listener,b=f.ia||f.src;f.fa&&i_(n.i,f),o=!1!==_.call(b,r)&&o}}return o&&!r.defaultPrevented}Pi(oi,Xl),oi.prototype[cc]=!0,oi.prototype.removeEventListener=function(n,e,t,r){fs(this,n,e,t,r)},oi.prototype.M=function(){if(oi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)dc(t[r]);delete n.g[e],n.h--}}this.I=null},oi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},oi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var r0=Ft.JSON.stringify;function iS(){var n=OE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var a0,s0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new oS,n=>n.reset());class oS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function RE(n){Ft.setTimeout(()=>{throw n},0)}function o0(n,e){a0||function(){var n=Ft.Promise.resolve(void 0);a0=function(){n.then(oa)}}(),l_||(a0(),l_=!0),OE.add(n,e)}var l_=!1,OE=new class{constructor(){this.h=this.g=null}add(e,t){const r=s0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function oa(){for(var n;n=iS();){try{n.h.call(n.g)}catch(t){RE(t)}var e=s0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}l_=!1}function Vd(n,e){oi.call(this),this.h=n||1,this.g=e||Ft,this.j=Ci(this.kb,this),this.l=Date.now()}function l0(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function u0(n,e,t){if("function"==typeof n)t&&(n=Ci(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ci(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ft.setTimeout(n,e||0)}function aS(n){n.g=u0(()=>{n.g=null,n.i&&(n.i=!1,aS(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(Vd,oi),(ht=Vd.prototype).da=!1,ht.S=null,ht.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zr(this,"tick"),this.da&&(l0(this),this.start()))}},ht.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.M=function(){Vd.Z.M.call(this),l0(this),delete this.g};class kE extends Xl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:aS(this)}M(){super.M(),this.g&&(Ft.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hp(n){Xl.call(this),this.h=n,this.g={}}Pi(hp,Xl);var PE=[];function FE(n,e,t,r){Array.isArray(t)||(t&&(PE[0]=t.toString()),t=PE);for(var o=0;o<t.length;o++){var u=IE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function u_(n){vE(n.g,function(e,t){this.g.hasOwnProperty(t)&&n0(e)},n),n.g={}}function c_(){this.g=!0}function tu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var f=1;f<o.length;f++)o[f]=""}}}return r0(t)}catch(_){return e}}(n,t)+(r?" "+r:"")})}hp.prototype.M=function(){hp.Z.M.call(this),u_(this)},hp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},c_.prototype.Aa=function(){this.g=!1},c_.prototype.info=function(){};var Ka={},d0=null;function h_(){return d0=d0||new oi}function LE(n){Fi.call(this,Ka.Ma,n)}function hc(n){const e=h_();Zr(e,new LE(e,n))}function cS(n,e){Fi.call(this,Ka.STAT_EVENT,n),this.stat=e}function Yi(n){const e=h_();Zr(e,new cS(e,n))}function h0(n,e){Fi.call(this,Ka.Na,n),this.size=e}function Bd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ft.setTimeout(function(){n()},e)}Ka.Ma="serverreachability",Pi(LE,Fi),Ka.STAT_EVENT="statevent",Pi(cS,Fi),Ka.Na="timingevent",Pi(h0,Fi);var fp={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},f0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function f_(){}function pp(){}f_.prototype.h=null;var fc,gp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function p0(){Fi.call(this,"d")}function VE(){Fi.call(this,"c")}function mp(){}function Ya(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new hp(this),this.P=dS,this.W=new Vd(n=sa?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ud}function Ud(){this.i=null,this.g="",this.h=!1}Pi(p0,Fi),Pi(VE,Fi),Pi(mp,f_),mp.prototype.g=function(){return new XMLHttpRequest},mp.prototype.i=function(){return{}},fc=new mp;var dS=45e3,_p={},yp={};function g0(n,e,t){n.K=1,n.v=m_(_n(e)),n.s=t,n.U=!0,m0(n,null)}function m0(n,e){n.F=Date.now(),vp(n),n.A=_n(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),zE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ud,n.g=R0(n.l,t?e:null,!n.s),0<n.O&&(n.L=new kE(Ci(n.Ia,n,n.g),n.O)),FE(n.V,n.g,"readystatechange",n.gb),e=n.H?Za(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),hc(1),function(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var f="",_=u.split("&"),b=0;b<_.length;b++){var C=_[b].split("=");if(1<C.length){var S=C[0];C=C[1];var A=S.split("_");f=2<=A.length&&"type"==A[1]?f+(S+"=")+C+"&":f+(S+"=redacted&")}}else f=null;else f=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+f})}(n.j,n.u,n.A,n.m,n.X,n.s)}function BE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function p_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=hS(n,t),o==yp){4==e&&(n.o=4,Yi(14),r=!1),tu(n.j,n.m,null,"[Incomplete Response]");break}if(o==_p){n.o=4,Yi(15),tu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}tu(n.j,n.m,o,null),y0(n,o)}BE(n)&&o!=yp&&o!=_p&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Yi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),iu(e),e.L=!0,Yi(11))):(tu(n.j,n.m,t,"[Invalid Chunked Response]"),pc(n),jd(n))}function hS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?yp:(t=Number(e.substring(t,r)),isNaN(t)?_p:(r+=1)+t>e.length?yp:(e=e.substr(r,t),n.C=r+t,e))}function vp(n){n.Y=Date.now()+n.P,_0(n,n.P)}function _0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Bd(Ci(n.eb,n),e)}function Qa(n){n.B&&(Ft.clearTimeout(n.B),n.B=null)}function jd(n){0==n.l.G||n.I||S0(n.l,n)}function pc(n){Qa(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,l0(n.W),u_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function y0(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||YE(t.i,n)))if(t.I=n.N,!n.J&&YE(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Bd(Ci(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;el(t),la(t)}ru(t),Yi(18)}if(1>=_S(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else su(t,11)}else if((n.J||t.g==n)&&el(t),!Kv(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const S=C[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const A=C[4];null!=A&&(t.za=A,t.h.info("SVER="+t.za));const F=C[5];null!=F&&"number"==typeof F&&0<F&&(t.K=r=1.5*F,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const ie=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ie){var u=r.i;!u.g&&(ds(ie,"spdy")||ds(ie,"quic")||ds(ie,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(wp(u,u.h),u.h=null))}if(r.D){const Se=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.sa=Se,sr(r.F,r.D,Se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var f=n;if((r=t).oa=M0(r,r.H?r.la:null,r.W),f.J){QE(r.i,f);var _=f,b=r.K;b&&_.setTimeout(b),_.B&&(Qa(_),vp(_)),r.g=f}else yc(r);0<t.l.length&&Xd(t)}else"stop"!=C[0]&&"close"!=C[0]||su(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?su(t,7):ai(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}hc(4)}catch(C){}}function v0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(op(n)||"string"==typeof n)mE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(op(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(op(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function $d(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof $d)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function b0(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];gc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)gc(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function gc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ht=Ya.prototype).setTimeout=function(n){this.P=n},ht.gb=function(n){n=n.target;const e=this.L;e&&3==Ps(n)?e.l():this.Ia(n)},ht.Ia=function(n){try{if(n==this.g)e:{const S=Ps(this.g);var e=this.g.Da();const A=this.g.ba();if(!(3>S)&&(3!=S||sa||this.g&&(this.h.h||this.g.ga()||t1(this.g)))){this.I||4!=S||7==e||hc(8==e||0>=A?3:2),Qa(this);var t=this.g.ba();this.N=t;t:if(BE(this)){var r=t1(this.g);n="";var o=r.length,u=4==Ps(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){pc(this),jd(this);var f="";break t}this.h.i=new Ft.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,f=this.h.g}else f=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,u,f){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+f})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var _,b=this.g;if((_=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kv(_)){var C=_;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Yi(12),pc(this),jd(this);break e}tu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,y0(this,t)}this.U?(p_(this,S,f),sa&&this.i&&3==S&&(FE(this.V,this.W,"tick",this.fb),this.W.start())):(tu(this.j,this.m,f,null),y0(this,f)),4==S&&pc(this),this.i&&!this.I&&(4==S?S0(this.l,this):(this.i=!1,vp(this)))}else 400==t&&0<f.indexOf("Unknown SID")?(this.o=3,Yi(12)):(this.o=0,Yi(13)),pc(this),jd(this)}}}catch(S){}},ht.fb=function(){if(this.g){var n=Ps(this.g),e=this.g.ga();this.C<e.length&&(Qa(this),p_(this,n,e),this.i&&4!=n&&vp(this))}},ht.cancel=function(){this.I=!0,pc(this)},ht.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hc(3),Yi(17)),pc(this),this.o=2,jd(this)):_0(this,this.Y-n)},(ht=$d.prototype).R=function(){b0(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ht.T=function(){return b0(this),this.g.concat()},ht.get=function(n,e){return gc(this.h,n)?this.h[n]:e},ht.set=function(n,e){gc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ht.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var fS=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function nu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof nu){this.g=void 0!==e?e:n.g,Gd(this,n.j),this.s=n.s,ro(this,n.i),Wd(this,n.m),this.l=n.l,e=n.h;var t=new Zd;t.i=e.i,e.g&&(t.g=new $d(e.g),t.h=e.h),g_(this,t),this.o=n.o}else n&&(t=String(n).match(fS))?(this.g=!!e,Gd(this,t[1]||"",!0),this.s=qd(t[2]||""),ro(this,t[3]||"",!0),Wd(this,t[4]),this.l=qd(t[5]||"",!0),g_(this,t[6]||"",!0),this.o=qd(t[7]||"")):(this.g=!!e,this.h=new Zd(null,this.g))}function _n(n){return new nu(n)}function Gd(n,e,t){n.j=t?qd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function ro(n,e,t){n.i=t?qd(e,!0):e}function Wd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function g_(n,e,t){e instanceof Zd?(n.h=e,function(n,e){e&&!n.j&&(Ja(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(WE(this,r),zE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=zd(e,$E)),n.h=new Zd(e,n.g))}function sr(n,e,t){n.h.set(e,t)}function m_(n){return sr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,gS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}nu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zd(e,HE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zd(e,HE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(zd(t,"/"==t.charAt(0)?w0:bp,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zd(t,GE)),n.join("")};var HE=/[#\/\?@]/g,bp=/[#\?:]/g,w0=/[#\?]/g,$E=/[#\?@]/g,GE=/#/g;function Zd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ja(n){n.g||(n.g=new $d,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function WE(n,e){Ja(n),e=Kd(n,e),gc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,gc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&b0(n)))}function qE(n,e){return Ja(n),e=Kd(n,e),gc(n.g.h,e)}function zE(n,e,t){WE(n,e),0<t.length&&(n.i=null,n.g.set(Kd(n,e),_E(t)),n.h+=t.length)}function Kd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function D0(n){this.l=n||mS,n=Ft.PerformanceNavigationTiming?0<(n=Ft.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ft.g&&Ft.g.Ea&&Ft.g.Ea()&&Ft.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=Zd.prototype).add=function(n,e){Ja(this),this.i=null,n=Kd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){Ja(this),this.g.forEach(function(t,r){mE(t,function(o){n.call(e,o,r,this)},this)},this)},ht.T=function(){Ja(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},ht.R=function(n){Ja(this);var e=[];if("string"==typeof n)qE(this,n)&&(e=JI(e,this.g.get(Kd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=JI(e,n[t])}return e},ht.set=function(n,e){return Ja(this),this.i=null,qE(this,n=Kd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var f=o;""!==r[u]&&(f+="="+encodeURIComponent(String(r[u]))),n.push(f)}}return this.i=n.join("&")};var mS=10;function KE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _S(n){return n.h?1:n.g?n.g.size:0}function YE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function wp(n,e){n.g?n.g.add(e):n.h=e}function QE(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function E0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return _E(n.i)}function __(){}function hR(){this.g=new __}function No(n,e,t){const r=t||"";try{v0(n,function(o,u){let f=o;lc(o)&&(f=r0(o)),e.push(r+u+"="+encodeURIComponent(f))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function C0(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Yd(n){this.l=n.$b||null,this.j=n.ib||!1}function Dp(n,e){oi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=y_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}D0.prototype.cancel=function(){if(this.i=E0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},__.prototype.stringify=function(n){return Ft.JSON.stringify(n,void 0)},__.prototype.parse=function(n){return Ft.JSON.parse(n,void 0)},Pi(Yd,f_),Yd.prototype.g=function(){return new Dp(this.l,this.j)},Yd.prototype.i=function(n){return function(){return n}}({}),Pi(Dp,oi);var y_=0;function JE(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function v_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qd(n)}function Qd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=Dp.prototype).open=function(n,e){if(this.readyState!=y_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Qd(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ft).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,v_(this)),this.readyState=y_},ht.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qd(this)),this.g&&(this.readyState=3,Qd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ft.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JE(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ht.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?v_(this):Qd(this),3==this.readyState&&JE(this)}},ht.Ua=function(n){this.g&&(this.response=this.responseText=n,v_(this))},ht.Ta=function(n){this.g&&(this.response=n,v_(this))},ht.ha=function(){this.g&&v_(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Dp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var T0=Ft.JSON.parse;function xr(n){oi.call(this),this.headers=new $d,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=b_,this.K=this.L=!1}Pi(xr,oi);var b_="",yS=/^https?$/i,vS=["POST","PUT"];function wS(n){return"content-type"==n.toLowerCase()}function XE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,e1(n),Xa(n)}function e1(n){n.D||(n.D=!0,Zr(n,"complete"),Zr(n,"error"))}function Ep(n){if(n.h&&void 0!==fE&&(!n.C[1]||4!=Ps(n)||2!=n.ba()))if(n.v&&4==Ps(n))u0(n.Fa,0,n);else if(Zr(n,"readystatechange"),4==Ps(n)){n.h=!1;try{const _=n.ba();e:switch(_){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===_){var o=String(n.H).match(fS)[1]||null;if(!o&&Ft.self&&Ft.self.location){var u=Ft.self.location.protocol;o=u.substr(0,u.length-1)}r=!yS.test(o?o.toLowerCase():"")}t=r}if(t)Zr(n,"complete"),Zr(n,"success");else{n.m=6;try{var f=2<Ps(n)?n.g.statusText:""}catch(b){f=""}n.j=f+" ["+n.ba()+"]",e1(n)}}finally{Xa(n)}}}function Xa(n,e){if(n.g){I0(n);const t=n.g,r=n.C[0]?ac:null;n.g=null,n.C=null,e||Zr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function I0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ft.clearTimeout(n.A),n.A=null)}function Ps(n){return n.g?n.g.readyState:0}function t1(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case b_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Cp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return vE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):sr(n,e,t))}function ps(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Jd(n){this.za=0,this.l=[],this.h=new c_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ps("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ps("baseRetryDelayMs",5e3,n),this.$a=ps("retryDelaySeedMs",1e4,n),this.Ya=ps("forwardChannelMaxRetries",2,n),this.ra=ps("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new D0(n&&n.concurrentRequestLimit),this.Ca=new hR,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ai(n){if(Tp(n),3==n.G){var e=n.V++,t=_n(n.F);sr(t,"SID",n.J),sr(t,"RID",e),sr(t,"TYPE","terminate"),ua(n,t),(e=new Ya(n,n.h,e,void 0)).K=2,e.v=m_(_n(t)),t=!1,Ft.navigator&&Ft.navigator.sendBeacon&&(t=Ft.navigator.sendBeacon(e.v.toString(),"")),!t&&Ft.Image&&((new Image).src=e.v,t=!0),t||(e.g=R0(e.l,null),e.g.ea(e.v)),e.F=Date.now(),vp(e)}N0(n)}function la(n){n.g&&(iu(n),n.g.cancel(),n.g=null)}function Tp(n){la(n),n.u&&(Ft.clearTimeout(n.u),n.u=null),el(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ft.clearTimeout(n.m),n.m=null)}function gs(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Xd(n)}function Xd(n){KE(n.i)||n.m||(n.m=!0,o0(n.Ha,n),n.C=0)}function mc(n,e){var t;t=e?e.m:n.V++;const r=_n(n.F);sr(r,"SID",n.J),sr(r,"RID",t),sr(r,"AID",n.U),ua(n,r),n.o&&n.s&&Cp(r,n.o,n.s),t=new Ya(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=_c(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),wp(n.i,t),g0(t,r,e)}function ua(n,e){n.j&&v0({},function(t,r){sr(e,r,t)})}function _c(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ci(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const f=["count="+t];-1==u?0<t?(u=o[0].h,f.push("ofs="+u)):u=0:f.push("ofs="+u);let _=!0;for(let b=0;b<t;b++){let C=o[b].h;const S=o[b].g;if(C-=u,0>C)u=Math.max(0,o[b].h-100),_=!1;else try{No(S,f,"req"+C+"_")}catch(A){r&&r(S)}}if(_){r=f.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function yc(n){n.g||n.u||(n.Y=1,o0(n.Ga,n),n.A=0)}function ru(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Bd(Ci(n.Ga,n),A0(n,n.A)),n.A++,0))}function iu(n){null!=n.B&&(Ft.clearTimeout(n.B),n.B=null)}function vc(n){n.g=new Ya(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=_n(n.oa);sr(e,"RID","rpc"),sr(e,"SID",n.J),sr(e,"CI",n.N?"0":"1"),sr(e,"AID",n.U),ua(n,e),sr(e,"TYPE","xmlhttp"),n.o&&n.s&&Cp(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=m_(_n(e)),t.s=null,t.U=!0,m0(t,n)}function el(n){null!=n.v&&(Ft.clearTimeout(n.v),n.v=null)}function S0(n,e){var t=null;if(n.g==e){el(n),iu(n),n.g=null;var r=2}else{if(!YE(n.i,e))return;t=e.D,QE(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Zr(r=h_(),new h0(r,t,e,o)),Xd(n)}else yc(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(_S(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Bd(Ci(n.Ha,n,e),A0(n,n.C)),n.C++,0)))}(n,e)||2==r&&ru(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:su(n,5);break;case 4:su(n,10);break;case 3:su(n,6);break;default:su(n,2)}}function A0(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function su(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ci(n.jb,n);t||(t=new nu("//www.google.com/images/cleardot.gif"),Ft.location&&"http"==Ft.location.protocol||Gd(t,"https"),m_(t)),function(n,e){const t=new c_;if(Ft.Image){const r=new Image;r.onload=ap(C0,t,r,"TestLoadImage: loaded",!0,e),r.onerror=ap(C0,t,r,"TestLoadImage: error",!1,e),r.onabort=ap(C0,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=ap(C0,t,r,"TestLoadImage: timeout",!1,e),Ft.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Yi(2);n.G=0,n.j&&n.j.va(e),N0(n),Tp(n)}function N0(n){n.G=0,n.I=-1,n.j&&((0!=E0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,_E(n.l),n.l.length=0),n.j.ua())}function M0(n,e,t){let r=function(n){return n instanceof nu?_n(n):new nu(n,void 0)}(t);if(""!=r.i)e&&ro(r,e+"."+r.i),Wd(r,r.m);else{const o=Ft.location;r=function(n,e,t,r){var o=new nu(null,void 0);return n&&Gd(o,n),e&&ro(o,e),t&&Wd(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&vE(n.aa,function(o,u){sr(r,u,o)}),t=n.sa,(e=n.D)&&t&&sr(r,e,t),sr(r,"VER",n.ma),ua(n,r),r}function R0(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&n.Ba&&!n.qa?new Yd({ib:!0}):n.qa)).L=n.H,e}function x0(){}function Ip(){if(eu&&!(10<=Number(cp)))throw Error("Environmental error: no available transport.")}function ms(n,e){oi.call(this),this.g=new Jd(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Kv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new th(this)}function n1(n){p0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function O0(){VE.call(this),this.status=1}function th(n){this.g=n}(ht=xr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fc.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:fc),this.g.onreadystatechange=Ci(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void XE(this,u)}n=t||"";const o=new $d(this.headers);r&&v0(r,function(u,f){o.set(f,u)}),r=function(n){e:{var e=wS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ft.FormData&&n instanceof Ft.FormData,!(0<=zv(vS,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,f){this.g.setRequestHeader(f,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{I0(this),0<this.B&&((this.K=function(n){return eu&&Pd()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ci(this.pa,this)):this.A=u0(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){XE(this,u)}},ht.pa=function(){void 0!==fE&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zr(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zr(this,"complete"),Zr(this,"abort"),Xa(this))},ht.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xa(this,!0)),xr.Z.M.call(this)},ht.Fa=function(){this.s||(this.F||this.v||this.l?Ep(this):this.cb())},ht.cb=function(){Ep(this)},ht.ba=function(){try{return 2<Ps(this)?this.g.status:-1}catch(n){return-1}},ht.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ht.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),T0(e)}},ht.Da=function(){return this.m},ht.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=Jd.prototype).ma=8,ht.G=1,ht.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ht.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Ya(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Za(u),bE(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_c(this,o,e),sr(t=_n(this.F),"RID",n),sr(t,"CVER",22),this.D&&sr(t,"X-HTTP-Session-Id",this.D),ua(this,t),this.o&&u&&Cp(t,this.o,u),wp(this.i,o),this.Ra&&sr(t,"TYPE","init"),this.ja?(sr(t,"$req",e),sr(t,"SID","null"),o.$=!0,g0(o,t,null)):g0(o,t,e),this.G=2}}else 3==this.G&&(n?mc(this,n):0==this.l.length||KE(this.i)||mc(this))},ht.Ga=function(){if(this.u=null,vc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Bd(Ci(this.bb,this),n)}},ht.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Yi(10),la(this),vc(this))},ht.ab=function(){null!=this.v&&(this.v=null,la(this),ru(this),Yi(19))},ht.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Yi(2)):(this.h.info("Failed to ping google.com"),Yi(1))},(ht=x0.prototype).xa=function(){},ht.wa=function(){},ht.va=function(){},ht.ua=function(){},ht.Oa=function(){},Ip.prototype.g=function(n,e){return new ms(n,e)},Pi(ms,oi),ms.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),o0(Ci(n.hb,n,e))),Yi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=M0(n,null,n.W),Xd(n)},ms.prototype.close=function(){ai(this.g)},ms.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,gs(this.g,e)}else this.v?((e={}).__data__=r0(n),gs(this.g,e)):gs(this.g,n)},ms.prototype.M=function(){this.g.j=null,delete this.j,ai(this.g),delete this.g,ms.Z.M.call(this)},Pi(n1,p0),Pi(O0,VE),Pi(th,x0),th.prototype.xa=function(){Zr(this.g,"a")},th.prototype.wa=function(n){Zr(this.g,new n1(n))},th.prototype.va=function(n){Zr(this.g,new O0(n))},th.prototype.ua=function(){Zr(this.g,"b")},Ip.prototype.createWebChannel=Ip.prototype.g,ms.prototype.send=ms.prototype.u,ms.prototype.open=ms.prototype.m,ms.prototype.close=ms.prototype.close,fp.NO_ERROR=0,fp.TIMEOUT=8,fp.HTTP_ERROR=6,f0.COMPLETE="complete",pp.EventType=gp,gp.OPEN="a",gp.CLOSE="b",gp.ERROR="c",gp.MESSAGE="d",oi.prototype.listen=oi.prototype.N,xr.prototype.listenOnce=xr.prototype.O,xr.prototype.getLastError=xr.prototype.La,xr.prototype.getLastErrorCode=xr.prototype.Da,xr.prototype.getStatus=xr.prototype.ba,xr.prototype.getResponseJson=xr.prototype.Qa,xr.prototype.getResponseText=xr.prototype.ga,xr.prototype.send=xr.prototype.ea;var r1=Jl.createWebChannelTransport=function(){return new Ip},i1=Jl.getStatEventTarget=function(){return h_()},k0=Jl.ErrorCode=fp,ES=Jl.EventType=f0,s1=Jl.Event=Ka,o1=Jl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},a1=Jl.FetchXmlHttpFactory=Yd,w_=Jl.WebChannel=pp,CS=Jl.XhrIo=xr;const l1="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let Sp="9.6.0";const bc=new ia.Yd("@firebase/firestore");function P0(){return bc.logLevel}function ze(n,...e){if(bc.logLevel<=ia.in.DEBUG){const t=e.map(Ap);bc.debug(`Firestore (${Sp}): ${n}`,...t)}}function Or(n,...e){if(bc.logLevel<=ia.in.ERROR){const t=e.map(Ap);bc.error(`Firestore (${Sp}): ${n}`,...t)}}function wc(n,...e){if(bc.logLevel<=ia.in.WARN){const t=e.map(Ap);bc.warn(`Firestore (${Sp}): ${n}`,...t)}}function Ap(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function wt(n="Unexpected state"){const e=`FIRESTORE (${Sp}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function Lt(n,e){n||wt()}function tt(n,e){return n}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class u1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nh{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class TS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class c1{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let f=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Ti,e.enqueueRetryable(()=>u(this.currentUser))};const _=()=>{const C=f;e.enqueueRetryable((0,Ie.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},b=C=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),_()};this.t.onInit(C=>b(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?b(C):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Ti)}},0),_()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt("string"==typeof r.accessToken),new u1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e),new li(e)}}class IS{constructor(e,t,r){this.type="FirstParty",this.user=li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class d1{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new IS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Np{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SS{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=o=>{e.enqueueRetryable(()=>{return null!=(u=o).error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`),t(u.token);var u})};const r=o=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?r(o):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Lt("string"==typeof t.token),new Np(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function NS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Fs.I=-1;class h1{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=NS(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function cn(n,e){return n<e?-1:n>e?1:0}function rh(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function F0(n){return n+"\0"}class ui{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ui.fromMillis(Date.now())}static fromDate(e){return ui.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ui(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $t(e)}static min(){return new $t(new ui(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function L0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function MS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Dc{constructor(e,t,r){void 0===t?t=0:t>e.length&&wt(),void 0===r?r=e.length-t:r>e.length-t&&wt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Dc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Dc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),f=t.get(o);if(u<f)return-1;if(u>f)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Dc{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(we.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new En(t)}static emptyPath(){return new En([])}}const mR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends Dc{construct(e,t,r){return new Ar(e,t,r)}static isValidIdentifier(e){return mR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ar(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Le(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let f=!1;for(;o<e.length;){const _=e[o];if("\\"===_){if(o+1===e.length)throw new Le(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[o+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new Le(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=b,o+=2}else"`"===_?(f=!f,o++):"."!==_||f?(r+=_,o++):(u(),o++)}if(u(),f)throw new Le(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(t)}static emptyPath(){return new Ar([])}}class Ec{constructor(e){this.fields=e,e.sort(Ar.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class kr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new kr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new kr(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kr.EMPTY_BYTE_STRING=new kr("");const RS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ca(n){if(Lt(!!n),"string"==typeof n){let e=0;const t=RS.exec(n);if(Lt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Er(n.seconds),nanos:Er(n.nanos)}}function Er(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cc(n){return"string"==typeof n?kr.fromBase64String(n):kr.fromUint8Array(n)}function f1(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function p1(n){const e=n.mapValue.fields.__previous_value__;return f1(e)?p1(e):e}function ih(n){const e=ca(n.mapValue.fields.__local_write_time__.timestampValue);return new ui(e.seconds,e.nanos)}function ou(n){return null==n}function D_(n){return 0===n&&1/n==-1/0}function B0(n){return"number"==typeof n&&Number.isInteger(n)&&!D_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class mt{constructor(e){this.path=e}static fromPath(e){return new mt(En.fromString(e))}static fromName(e){return new mt(En.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new En(e.slice()))}}function au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?f1(n)?4:10:wt()}function io(n,e){const t=au(n);if(t!==au(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ih(n).isEqual(ih(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ca(r.timestampValue),f=ca(o.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Cc(n.bytesValue).isEqual(Cc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Er(r.geoPointValue.latitude)===Er(o.geoPointValue.latitude)&&Er(r.geoPointValue.longitude)===Er(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Er(r.integerValue)===Er(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Er(r.doubleValue),f=Er(o.doubleValue);return u===f?D_(u)===D_(f):isNaN(u)&&isNaN(f)}return!1}(n,e);case 9:return rh(n.arrayValue.values||[],e.arrayValue.values||[],io);case 10:return function(r,o){const u=r.mapValue.fields||{},f=o.mapValue.fields||{};if(L0(u)!==L0(f))return!1;for(const _ in u)if(u.hasOwnProperty(_)&&(void 0===f[_]||!io(u[_],f[_])))return!1;return!0}(n,e);default:return wt()}var o}function Tc(n,e){return void 0!==(n.values||[]).find(t=>io(t,e))}function Ic(n,e){const t=au(n),r=au(e);if(t!==r)return cn(t,r);switch(t){case 0:return 0;case 1:return cn(n.booleanValue,e.booleanValue);case 2:return function(o,u){const f=Er(o.integerValue||o.doubleValue),_=Er(u.integerValue||u.doubleValue);return f<_?-1:f>_?1:f===_?0:isNaN(f)?isNaN(_)?0:-1:1}(n,e);case 3:return g1(n.timestampValue,e.timestampValue);case 4:return g1(ih(n),ih(e));case 5:return cn(n.stringValue,e.stringValue);case 6:return function(o,u){const f=Cc(o),_=Cc(u);return f.compareTo(_)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const f=o.split("/"),_=u.split("/");for(let b=0;b<f.length&&b<_.length;b++){const C=cn(f[b],_[b]);if(0!==C)return C}return cn(f.length,_.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const f=cn(Er(o.latitude),Er(u.latitude));return 0!==f?f:cn(Er(o.longitude),Er(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const f=o.values||[],_=u.values||[];for(let b=0;b<f.length&&b<_.length;++b){const C=Ic(f[b],_[b]);if(C)return C}return cn(f.length,_.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const f=o.fields||{},_=Object.keys(f),b=u.fields||{},C=Object.keys(b);_.sort(),C.sort();for(let S=0;S<_.length&&S<C.length;++S){const A=cn(_[S],C[S]);if(0!==A)return A;const F=Ic(f[_[S]],b[C[S]]);if(0!==F)return F}return cn(_.length,C.length)}(n.mapValue,e.mapValue);default:throw wt()}}function g1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return cn(n,e);const t=ca(n),r=ca(e),o=cn(t.seconds,r.seconds);return 0!==o?o:cn(t.nanos,r.nanos)}function E_(n){return C_(n)}function C_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ca(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cc(n.bytesValue).toBase64():"referenceValue"in n?mt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const f of r.values||[])u?u=!1:o+=",",o+=C_(f);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",f=!0;for(const _ of o)f?f=!1:u+=",",u+=`${_}:${C_(r.fields[_])}`;return u+"}"}(n.mapValue):wt();var e}function sh(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function T_(n){return!!n&&"integerValue"in n}function U0(n){return!!n&&"arrayValue"in n}function j0(n){return!!n&&"nullValue"in n}function H0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oh(n){return!!n&&"mapValue"in n}function lu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return tl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lu(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ii{constructor(e){this.value=e}static empty(){return new Ii({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(t)}setAll(e){let t=Ar.emptyPath(),r={},o=[];e.forEach((f,_)=>{if(!t.isImmediateParentOf(_)){const b=this.getFieldsMap(t);this.applyChanges(b,r,o),r={},o=[],t=_.popLast()}f?r[_.lastSegment()]=lu(f):o.push(_.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return io(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];oh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){tl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ii(lu(this.value))}}function $0(n){const e=[];return tl(n.fields,(t,r)=>{const o=new Ar([t]);if(oh(r)){const u=$0(r.mapValue).fields;if(0===u.length)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Ec(e)}class nr{constructor(e,t,r,o,u){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=u}static newInvalidDocument(e){return new nr(e,0,$t.min(),Ii.empty(),0)}static newFoundDocument(e,t,r){return new nr(e,1,t,r,0)}static newNoDocument(e,t){return new nr(e,2,t,Ii.empty(),0)}static newUnknownDocument(e,t){return new nr(e,3,t,Ii.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ii.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ii.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new nr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class m1{constructor(e,t=null,r=[],o=[],u=null,f=null,_=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=_,this.R=null}}function G0(n,e=null,t=[],r=[],o=null,u=null,f=null){return new m1(n,e,t,r,o,u,f)}function ah(n){const e=tt(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+E_(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ou(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=Rp(e.startAt)),e.endAt&&(t+="|ub:",t+=Rp(e.endAt)),e.R=t}return e.R}function Mp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!LS(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!io(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!z0(n.startAt,e.startAt)&&z0(n.endAt,e.endAt)}function W0(n){return mt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Qi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new y1(e,t,r):"array-contains"===t?new kS(e,r):"in"===t?new PS(e,r):"not-in"===t?new v1(e,r):"array-contains-any"===t?new FS(e,r):new Qi(e,t,r)}static P(e,t,r){return"in"===t?new OS(e,r):new Kr(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ic(t,this.value)):null!==t&&au(this.value)===au(t)&&this.v(Ic(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wt()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class y1 extends Qi{constructor(e,t,r){super(e,t,r),this.key=mt.fromName(r.referenceValue)}matches(e){const t=mt.comparator(e.key,this.key);return this.v(t)}}class OS extends Qi{constructor(e,t){super(e,"in",t),this.keys=q0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Kr extends Qi{constructor(e,t){super(e,"not-in",t),this.keys=q0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function q0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>mt.fromName(r.referenceValue))}class kS extends Qi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return U0(t)&&Tc(t.arrayValue,this.value)}}class PS extends Qi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tc(this.value.arrayValue,t)}}class v1 extends Qi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tc(this.value.arrayValue,t)}}class FS extends Qi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!U0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tc(this.value.arrayValue,r))}}class lh{constructor(e,t){this.position=e,this.before=t}}function Rp(n){return`${n.before?"b":"a"}:${n.position.map(e=>E_(e)).join(",")}`}class Mo{constructor(e,t="asc"){this.field=e,this.dir=t}}function LS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function b1(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],f=n.position[o];if(r=u.field.isKeyField()?mt.comparator(mt.fromName(f.referenceValue),t.key):Ic(f,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function z0(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!io(n.position[t],e.position[t]))return!1;return!0}class nl{constructor(e,t=null,r=[],o=[],u=null,f="F",_=null,b=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=_,this.endAt=b,this.S=null,this.D=null}}function Z0(n,e,t,r,o,u,f,_){return new nl(n,e,t,r,o,u,f,_)}function xp(n){return new nl(n)}function uh(n){return!ou(n.limit)&&"F"===n.limitType}function ch(n){return!ou(n.limit)&&"L"===n.limitType}function so(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function K0(n){for(const e of n.filters)if(e.V())return e.field;return null}function I_(n){return null!==n.collectionGroup}function Ji(n){const e=tt(n);if(null===e.S){e.S=[];const t=K0(e),r=so(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Mo(t)),e.S.push(new Mo(Ar.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.S.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Mo(Ar.keyField(),u))}}}return e.S}function Cr(n){const e=tt(n);if(!e.D)if("F"===e.limitType)e.D=G0(e.path,e.collectionGroup,Ji(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ji(e))t.push(new Mo(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new lh(e.endAt.position,!e.endAt.before):null,o=e.startAt?new lh(e.startAt.position,!e.startAt.before):null;e.D=G0(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.D}function oo(n,e,t){return new nl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dh(n,e){return Mp(Cr(n),Cr(e))&&n.limitType===e.limitType}function Y0(n){return`${ah(Cr(n))}|lt:${n.limitType}`}function Q0(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${E_(r.value)}`;var r}).join(", ")}]`),ou(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+Rp(n.startAt)),n.endAt&&(e+=", endAt: "+Rp(n.endAt)),`Target(${e})`}(Cr(n))}; limitType=${n.limitType})`}function Op(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):mt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!b1(t.startAt,Ji(t),r)||t.endAt&&b1(t.endAt,Ji(t),r)));var t,r}function w1(n){return(e,t)=>{let r=!1;for(const o of Ji(n)){const u=VS(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function VS(n,e,t){const r=n.field.isKeyField()?mt.comparator(e.key,t.key):function(o,u,f){const _=u.data.field(o),b=f.data.field(o);return null!==_&&null!==b?Ic(_,b):wt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return wt()}}function S_(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:D_(e)?"-0":e}}function hh(n){return{integerValue:""+n}}function D1(n,e){return B0(e)?hh(e):S_(n,e)}class kp{constructor(){this._=void 0}}function BS(n,e,t){return n instanceof rl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Sc?X0(n,e):n instanceof uu?A_(n,e):function(r,o){const u=J0(r,o),f=eb(u)+eb(r.N);return T_(u)&&T_(r.N)?hh(f):S_(r.k,f)}(n,e)}function E1(n,e,t){return n instanceof Sc?X0(n,e):n instanceof uu?A_(n,e):t}function J0(n,e){return n instanceof il?T_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class rl extends kp{}class Sc extends kp{constructor(e){super(),this.elements=e}}function X0(n,e){const t=tb(e);for(const r of n.elements)t.some(o=>io(o,r))||t.push(r);return{arrayValue:{values:t}}}class uu extends kp{constructor(e){super(),this.elements=e}}function A_(n,e){let t=tb(e);for(const r of n.elements)t=t.filter(o=>!io(o,r));return{arrayValue:{values:t}}}class il extends kp{constructor(e,t){super(),this.k=e,this.N=t}}function eb(n){return Er(n.integerValue||n.doubleValue)}function tb(n){return U0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class fh{constructor(e,t){this.field=e,this.transform=t}}class T1{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fp{}function US(n,e,t){n instanceof Lp?function(r,o,u){const f=r.value.clone(),_=N1(r.fieldTransforms,o,u.transformResults);f.setAll(_),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):n instanceof cu?function(r,o,u){if(!Pp(r.precondition,o))return void o.convertToUnknownDocument(u.version);const f=N1(r.fieldTransforms,o,u.transformResults),_=o.data;_.setAll(A1(r)),_.setAll(f),o.convertToFoundDocument(u.version,_).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nb(n,e,t){var o;n instanceof Lp?function(r,o,u){if(!Pp(r.precondition,o))return;const f=r.value.clone(),_=M1(r.fieldTransforms,u,o);f.setAll(_),o.convertToFoundDocument(S1(o),f).setHasLocalMutations()}(n,e,t):n instanceof cu?function(r,o,u){if(!Pp(r.precondition,o))return;const f=M1(r.fieldTransforms,u,o),_=o.data;_.setAll(A1(r)),_.setAll(f),o.convertToFoundDocument(S1(o),_).setHasLocalMutations()}(n,e,t):Pp(n.precondition,o=e)&&o.convertToNoDocument($t.min())}function jS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=J0(r.transform,o||null);null!=u&&(null==t&&(t=Ii.empty()),t.set(r.field,u))}return t||null}function I1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&rh(t,r,(o,u)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Sc&&r instanceof Sc||t instanceof uu&&r instanceof uu?rh(t.elements,r.elements,io):t instanceof il&&r instanceof il?io(t.N,r.N):t instanceof rl&&r instanceof rl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function S1(n){return n.isFoundDocument()?n.version:$t.min()}class Lp extends Fp{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class cu extends Fp{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function A1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function N1(n,e,t){const r=new Map;Lt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],f=u.transform,_=e.data.field(u.field);r.set(u.field,E1(f,_,t[o]))}return r}function M1(n,e,t){const r=new Map;for(const o of n){const u=o.transform,f=t.data.field(o.field);r.set(o.field,BS(u,f,e))}return r}class Vp extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class rb extends Fp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class HS{constructor(e){this.count=e}}var Pr,fn;function R1(n){switch(n){default:return wt();case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0}}function x1(n){if(void 0===n)return Or("GRPC error has no .code"),we.UNKNOWN;switch(n){case Pr.OK:return we.OK;case Pr.CANCELLED:return we.CANCELLED;case Pr.UNKNOWN:return we.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return we.INTERNAL;case Pr.UNAVAILABLE:return we.UNAVAILABLE;case Pr.UNAUTHENTICATED:return we.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case Pr.NOT_FOUND:return we.NOT_FOUND;case Pr.ALREADY_EXISTS:return we.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return we.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case Pr.ABORTED:return we.ABORTED;case Pr.OUT_OF_RANGE:return we.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return we.UNIMPLEMENTED;case Pr.DATA_LOSS:return we.DATA_LOSS;default:return wt()}}(fn=Pr||(Pr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class Yr{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new Yr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Yr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bp(this.root,e,this.comparator,!0)}}class Bp{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:ci.RED,this.left=null!=o?o:ci.EMPTY,this.right=null!=u?u:ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ci(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ci.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fr{constructor(e){this.comparator=e,this.data=new Yr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ib(this.data.getIterator())}getIteratorFrom(e){return new ib(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fr(this.comparator);return t.data=e,t}}class ib{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const O1=new Yr(mt.comparator);function Ls(){return O1}const k1=new Yr(mt.comparator);function N_(){return k1}const P1=new Yr(mt.comparator);function M_(){return P1}const F1=new fr(mt.comparator);function hn(...n){let e=F1;for(const t of n)e=e.add(t);return e}const $S=new fr(cn);function R_(){return $S}class da{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,x_.createSynthesizedTargetChangeForCurrentChange(e,t)),new da($t.min(),r,R_(),Ls(),hn())}}class x_{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new x_(kr.EMPTY_BYTE_STRING,t,hn(),hn(),hn())}}class ph{constructor(e,t,r,o){this.$=e,this.removedTargetIds=t,this.key=r,this.F=o}}class GS{constructor(e,t){this.targetId=e,this.O=t}}class sb{constructor(e,t,r=kr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class ob{constructor(){this.M=0,this.L=L1(),this.B=kr.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=hn(),t=hn(),r=hn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:wt()}}),new x_(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=L1()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class _R{constructor(e){this.et=e,this.nt=new Map,this.st=Ls(),this.it=Nt(),this.rt=new fr(cn)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:wt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,o)=>{this.lt(o)&&t(o)})}dt(e){const t=e.targetId,r=e.O.count,o=this.wt(t);if(o){const u=o.target;if(W0(u))if(0===r){const f=new mt(u.path);this.ct(t,f,nr.newNoDocument(f,$t.min()))}else Lt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((u,f)=>{const _=this.wt(f);if(_){if(u.current&&W0(_.target)){const b=new mt(_.target.path);null!==this.st.get(b)||this.yt(f,b)||this.ct(f,b,nr.newNoDocument(b,e))}u.j&&(t.set(f,u.G()),u.H())}});let r=hn();this.it.forEach((u,f)=>{let _=!0;f.forEachWhile(b=>{const C=this.wt(b);return!C||2===C.purpose||(_=!1,!1)}),_&&(r=r.add(u))});const o=new da(e,t,this.rt,this.st,r);return this.st=Ls(),this.it=Nt(),this.rt=new fr(cn),o}at(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.lt(e))return;const o=this.ht(e);this.yt(e,t)?o.J(t,1):o.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new ob,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new fr(cn),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new ob),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function Nt(){return new Yr(mt.comparator)}function L1(){return new Yr(mt.comparator)}const WS={asc:"ASCENDING",desc:"DESCENDING"},qS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class O_{constructor(e,t){this.databaseId=e,this.C=t}}function Up(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jp(n,e){return n.C?e.toBase64():e.toUint8Array()}function k_(n,e){return Up(n,e.toTimestamp())}function Qt(n){return Lt(!!n),$t.fromTimestamp(function(e){const t=ca(e);return new ui(t.seconds,t.nanos)}(n))}function V1(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ab(n){const e=En.fromString(n);return Lt(hb(e)),e}function Hp(n,e){return V1(n.databaseId,e.path)}function ha(n,e){const t=ab(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new mt(ub(t))}function P_(n,e){return V1(n.databaseId,e)}function lb(n){const e=ab(n);return 4===e.length?En.emptyPath():ub(e)}function gh(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ub(n){return Lt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function B1(n,e,t){return{name:Hp(n,e),fields:t.value.mapValue.fields}}function U1(n,e,t){const r=ha(n,e.name),o=Qt(e.updateTime),u=new Ii({mapValue:{fields:e.fields}}),f=nr.newFoundDocument(r,o,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function F_(n,e){let t;if(e instanceof Lp)t={update:B1(n,e.key,e.value)};else if(e instanceof Vp)t={delete:Hp(n,e.key)};else if(e instanceof cu)t={update:B1(n,e.key,e.data),updateMask:QS(e.fieldMask)};else{if(!(e instanceof rb))return wt();t={verify:Hp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const f=u.transform;if(f instanceof rl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Sc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof uu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof il)return{fieldPath:u.field.canonicalString(),increment:f.N};throw wt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:k_(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:wt()),t;var o}function j1(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Nr.updateTime(Qt(o.updateTime)):void 0!==o.exists?Nr.exists(o.exists):Nr.none():Nr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,f){let _=null;"setToServerValue"in f?(Lt("REQUEST_TIME"===f.setToServerValue),_=new rl):"appendMissingElements"in f?_=new Sc(f.appendMissingElements.values||[]):"removeAllFromArray"in f?_=new uu(f.removeAllFromArray.values||[]):"increment"in f?_=new il(u,f.increment):wt();const b=Ar.fromServerFormat(f.fieldPath);return new fh(b,_)}(n,o)):[];var o;if(e.update){const o=ha(n,e.update.name),u=new Ii({mapValue:{fields:e.update.fields}});if(e.updateMask){const f=new Ec((e.updateMask.fieldPaths||[]).map(C=>Ar.fromServerFormat(C)));return new cu(o,u,f,t,r)}return new Lp(o,u,t,r)}if(e.delete){const o=ha(n,e.delete);return new Vp(o,t)}if(e.verify){const o=ha(n,e.verify);return new rb(o,t)}return wt()}function Gp(n,e){return{documents:[P_(n,e.path)]}}function cb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=P_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=P_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0===_.length)return;const b=_.map(C=>function(S){if("=="===S.op){if(H0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NAN"}};if(j0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(H0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NOT_NAN"}};if(j0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yh(S.field),op:YS(S.op),value:S.value}}}(C));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:yh((C=b).field),direction:KS(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=(b=e.limit,n.C||ou(b)?b:{value:b});var b;return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=mh(e.startAt)),e.endAt&&(t.structuredQuery.endAt=mh(e.endAt)),t}function db(n){let e=lb(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Lt(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=$1(t.where));let f=[];t.orderBy&&(f=t.orderBy.map(S=>{return new Mo(Ac((A=S).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let _=null;t.limit&&(_=function(S){let A;return A="object"==typeof S?S.value:S,ou(A)?null:A}(t.limit));let b=null;t.startAt&&(b=_h(t.startAt));let C=null;return t.endAt&&(C=_h(t.endAt)),Z0(e,o,f,u,_,"F",b,C)}function $1(n){return n?void 0!==n.unaryFilter?[W1(n)]:void 0!==n.fieldFilter?[G1(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>$1(e)).reduce((e,t)=>e.concat(t)):wt():[]}function mh(n){return{before:n.before,values:n.position}}function _h(n){return new lh(n.values||[],!!n.before)}function KS(n){return WS[n]}function YS(n){return qS[n]}function yh(n){return{fieldPath:n.canonicalString()}}function Ac(n){return Ar.fromServerFormat(n.fieldPath)}function G1(n){return Qi.create(Ac(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(n.fieldFilter.op),n.fieldFilter.value)}function W1(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ac(n.unaryFilter.field);return Qi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ac(n.unaryFilter.field);return Qi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ac(n.unaryFilter.field);return Qi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ac(n.unaryFilter.field);return Qi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}function QS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hb(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ro(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=XS(e)),e=JS(n.get(t),e);return XS(e)}function JS(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function XS(n){return n+"\x01\x01"}function du(n){const e=n.length;if(Lt(e>=2),2===e)return Lt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const f=n.indexOf("\x01",u);switch((f<0||f>t)&&wt(),n.charAt(f+1)){case"\x01":const _=n.substring(u,f);let b;0===o.length?b=_:(o+=_,b=o,o=""),r.push(b);break;case"\x10":o+=n.substring(u,f),o+="\0";break;case"\x11":o+=n.substring(u,f+1);break;default:wt()}u=f+2}return new En(r)}class yR{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ao{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}ao.store="owner",ao.key="owner";class sl{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}sl.store="mutationQueues",sl.keyPath="userId";class Fn{constructor(e,t,r,o,u){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=u}}Fn.store="mutations",Fn.keyPath="batchId",Fn.userMutationsIndex="userMutationsIndex",Fn.userMutationsKeyPath=["userId","batchId"];class Li{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Ro(t)]}static key(e,t,r){return[e,Ro(t),r]}}Li.store="documentMutations",Li.PLACEHOLDER=new Li;class eA{constructor(e,t){this.path=e,this.readTime=t}}class q1{constructor(e,t){this.path=e,this.version=t}}class Gn{constructor(e,t,r,o,u,f){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=u,this.parentPath=f}}Gn.store="remoteDocuments",Gn.readTimeIndex="readTimeIndex",Gn.readTimeIndexPath="readTime",Gn.collectionReadTimeIndex="collectionReadTimeIndex",Gn.collectionReadTimeIndexPath=["parentPath","readTime"];class fa{constructor(e){this.byteSize=e}}fa.store="remoteDocumentGlobal",fa.key="remoteDocumentGlobalKey";class _s{constructor(e,t,r,o,u,f,_){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=u,this.lastLimboFreeSnapshotVersion=f,this.query=_}}_s.store="targets",_s.keyPath="targetId",_s.queryTargetsIndexName="queryTargetsIndex",_s.queryTargetsKeyPath=["canonicalId","targetId"];class Si{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Si.store="targetDocuments",Si.keyPath=["targetId","path"],Si.documentTargetsIndex="documentTargetsIndex",Si.documentTargetsKeyPath=["path","targetId"];class Vs{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}Vs.key="targetGlobalKey",Vs.store="targetGlobal";class Nc{constructor(e,t){this.collectionId=e,this.parent=t}}Nc.store="collectionParents",Nc.keyPath=["collectionId","parent"];class pa{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}pa.store="clientMetadata",pa.keyPath="clientId";class vh{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}vh.store="bundles",vh.keyPath="bundleId";class bh{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}bh.store="namedQueries",bh.keyPath="name";const wh=[sl.store,Fn.store,Li.store,Gn.store,_s.store,ao.store,Vs.store,Si.store,pa.store,fa.store,Nc.store,vh.store,bh.store],z1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fe?t:Fe.resolve(t)}catch(t){return Fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fe.reject(t)}static resolve(e){return new Fe((t,r)=>{t(e)})}static reject(e){return new Fe((t,r)=>{r(e)})}static waitFor(e){return new Fe((t,r)=>{let o=0,u=0,f=!1;e.forEach(_=>{++o,_.next(()=>{++u,f&&u===o&&t()},b=>r(b))}),f=!0,u===o&&t()})}static or(e){let t=Fe.resolve(!1);for(const r of e)t=t.next(o=>o?Fe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class Wp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Ti,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new qp(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const o=gb(r.target.error);this.It.reject(new qp(e,o))}}static open(e,t,r,o){try{return new Wp(t,e.transaction(o,r))}catch(u){throw new qp(t,u)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new tA(t)}}class xo{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===xo.Pt((0,nn.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),hu(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,nn.hl)())return!1;if(xo.vt())return!0;const e=(0,nn.z$)(),t=xo.Pt(e),r=0<t&&t<10,o=xo.Vt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=f=>{r(f.target.result)},u.onblocked=()=>{o(new qp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=f=>{const _=f.target.error;o("VersionError"===_.name?new Le(we.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===_.name?new Le(we.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+_):new qp(e,_))},u.onupgradeneeded=f=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',f.oldVersion),t.Rt.Nt(f.target.result,u.transaction,f.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const f="readonly"===t;let _=0;for(;;){++_;try{u.db=yield u.Ct(e);const b=Wp.open(u.db,e,f?"readonly":"readwrite",r),C=o(b).catch(S=>(b.abort(S),Fe.reject(S))).toPromise();return C.catch(()=>{}),yield b.At,C}catch(b){const C="FirebaseError"!==b.name&&_<3;if(ze("SimpleDb","Transaction failed with error:",b.message,"Retrying:",C),u.close(),!C)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Z1{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return hu(this.$t.delete())}}class qp extends Le{constructor(e,t){super(we.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ol(n){return"IndexedDbTransactionError"===n.name}class tA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hu(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),hu(this.store.add(e))}get(e){return hu(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),hu(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),hu(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Ut(r,(u,f)=>{o.push(f)}).next(()=>o)}qt(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const o=this.cursor(r);return this.Ut(o,(u,f,_)=>_.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Ut(o,t)}Qt(e){const t=this.cursor({});return new Fe((r,o)=>{t.onerror=u=>{const f=gb(u.target.error);o(f)},t.onsuccess=u=>{const f=u.target.result;f?e(f.primaryKey,f.value).next(_=>{_?f.continue():r()}):r()}})}Ut(e,t){const r=[];return new Fe((o,u)=>{e.onerror=f=>{u(f.target.error)},e.onsuccess=f=>{const _=f.target.result;if(!_)return void o();const b=new Z1(_),C=t(_.primaryKey,_.value,b);if(C instanceof Fe){const S=C.catch(A=>(b.done(),Fe.reject(A)));r.push(S)}b.isDone?o():null===b.Mt?_.continue():_.continue(b.Mt)}}).next(()=>Fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hu(n){return new Fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=gb(r.target.error);t(o)}})}let pb=!1;function gb(n){const e=xo.Pt((0,nn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pb||(pb=!0,setTimeout(()=>{throw r},0)),r}}return n}class K1 extends fb{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function ys(n,e){const t=tt(n);return xo.Dt(t.Wt,e)}class zp{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&US(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&nb(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&nb(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument($t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),hn())}isEqual(e){return this.batchId===e.batchId&&rh(this.mutations,e.mutations,(t,r)=>I1(t,r))&&rh(this.baseMutations,e.baseMutations,(t,r)=>I1(t,r))}}class mb{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Lt(e.mutations.length===r.length);let o=M_();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new mb(e,t,r,o)}}class al{constructor(e,t,r,o,u=$t.min(),f=$t.min(),_=kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=_}withSequenceNumber(e){return new al(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new al(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Y1{constructor(e){this.Gt=e}}function _b(n,e){if(e.document)return U1(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=mt.fromSegments(e.noDocument.path),r=Eh(e.noDocument.readTime),o=nr.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=mt.fromSegments(e.unknownDocument.path),r=Eh(e.unknownDocument.version);return nr.newUnknownDocument(t,r)}return wt()}function Q1(n,e,t){const r=yb(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const u={name:Hp(_=n.Gt,(b=e).key),fields:b.data.value.mapValue.fields,updateTime:Up(_,b.version.toTimestamp())};return new Gn(null,null,u,e.hasCommittedMutations,r,o)}var _,b;if(e.isNoDocument()){const u=e.key.path.toArray(),f=Dh(e.version),_=e.hasCommittedMutations;return new Gn(null,new eA(u,f),null,_,r,o)}if(e.isUnknownDocument()){const u=e.key.path.toArray(),f=Dh(e.version);return new Gn(new q1(u,f),null,null,!0,r,o)}return wt()}function yb(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function J1(n){const e=new ui(n[0],n[1]);return $t.fromTimestamp(e)}function Dh(n){const e=n.toTimestamp();return new yR(e.seconds,e.nanoseconds)}function Eh(n){const e=new ui(n.seconds,n.nanoseconds);return $t.fromTimestamp(e)}function Ch(n,e){const t=(e.baseMutations||[]).map(u=>j1(n.Gt,u));for(let u=0;u<e.mutations.length-1;++u){const f=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(f.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>j1(n.Gt,u)),o=ui.fromMillis(e.localWriteTimeMs);return new zp(e.batchId,o,t,r)}function Th(n){const e=Eh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Eh(n.lastLimboFreeSnapshotVersion):$t.min();let r;var o;return void 0!==n.query.documents?(Lt(1===(o=n.query).documents.length),r=Cr(xp(lb(o.documents[0])))):r=Cr(db(n.query)),new al(r,n.targetId,0,n.lastListenSequenceNumber,e,t,kr.fromBase64String(n.resumeToken))}function vb(n,e){const t=Dh(e.snapshotVersion),r=Dh(e.lastLimboFreeSnapshotVersion);let o;o=W0(e.target)?Gp(n.Gt,e.target):cb(n.Gt,e.target);const u=e.resumeToken.toBase64();return new _s(e.targetId,ah(e.target),t,u,e.sequenceNumber,r,o)}function L_(n){const e=db({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?oo(e,e.limit,"L"):e}class nA{getBundleMetadata(e,t){return V_(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Eh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return V_(e).put({bundleId:(r=t).id,createTime:Dh(Qt(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bb(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:L_(o.bundledQuery),readTime:Eh(o.readTime)};var o})}saveNamedQuery(e,t){return bb(e).put({name:(r=t).name,readTime:Dh(Qt(r.readTime)),bundledQuery:r.bundledQuery});var r}}function V_(n){return ys(n,vh.store)}function bb(n){return ys(n,bh.store)}class rA{constructor(){this.zt=new wb}addToCollectionParentIndex(e,t){return this.zt.add(t),Fe.resolve()}getCollectionParents(e,t){return Fe.resolve(this.zt.getEntries(t))}}class wb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new fr(En.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new fr(En.comparator)).toArray()}}class Db{constructor(){this.Ht=new wb}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const u={collectionId:r,parent:Ro(o)};return B_(e).put(u)}return Fe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[F0(t),""],!1,!0);return B_(e).Bt(o).next(u=>{for(const f of u){if(f.collectionId!==t)break;r.push(du(f.parent))}return r})}}function B_(n){return ys(n,Nc.store)}const Eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function X1(n,e,t){const r=n.store(Fn.store),o=n.store(Li.store),u=[],f=IDBKeyRange.only(t.batchId);let _=0;const b=r.jt({range:f},(S,A,F)=>(_++,F.delete()));u.push(b.next(()=>{Lt(1===_)}));const C=[];for(const S of t.mutations){const A=Li.key(e,S.key.path,t.batchId);u.push(o.delete(A)),C.push(S.key)}return Fe.waitFor(u).next(()=>C)}function U_(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw wt();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class Zp{constructor(e,t,r,o){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=o,this.Yt={}}static Xt(e,t,r,o){Lt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Zp(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).jt({index:Fn.userMutationsIndex,range:r},(o,u,f)=>{t=!1,f.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Ih(e),f=ll(e);return f.add({}).next(_=>{Lt("number"==typeof _);const b=new zp(_,t,r,o),C=function(F,H,ie){const Se=ie.baseMutations.map(dt=>F_(F.Gt,dt)),Oe=ie.mutations.map(dt=>F_(F.Gt,dt));return new Fn(H,ie.batchId,ie.localWriteTime.toMillis(),Se,Oe)}(this.k,this.userId,b),S=[];let A=new fr((F,H)=>cn(F.canonicalString(),H.canonicalString()));for(const F of o){const H=Li.key(this.userId,F.key.path,_);A=A.add(F.key.path.popLast()),S.push(f.put(C)),S.push(u.put(H,Li.PLACEHOLDER))}return A.forEach(F=>{S.push(this.Jt.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.Yt[_]=b.keys()}),Fe.waitFor(S).next(()=>b)})}lookupMutationBatch(e,t){return ll(e).get(t).next(r=>r?(Lt(r.userId===this.userId),Ch(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Fe.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Yt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ll(e).jt({index:Fn.userMutationsIndex,range:o},(f,_,b)=>{_.userId===this.userId&&(Lt(_.batchId>=r),u=Ch(this.k,_)),b.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ll(e).jt({index:Fn.userMutationsIndex,range:t,reverse:!0},(o,u,f)=>{r=u.batchId,f.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ll(e).Bt(Fn.userMutationsIndex,t).next(r=>r.map(o=>Ch(this.k,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Li.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Ih(e).jt({range:o},(f,_,b)=>{const[C,S,A]=f,F=du(S);if(C===this.userId&&t.path.isEqual(F))return ll(e).get(A).next(H=>{if(!H)throw wt();Lt(H.userId===this.userId),u.push(Ch(this.k,H))});b.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(cn);const o=[];return t.forEach(u=>{const f=Li.prefixForPath(this.userId,u.path),_=IDBKeyRange.lowerBound(f),b=Ih(e).jt({range:_},(C,S,A)=>{const[F,H,ie]=C,Se=du(H);F===this.userId&&u.path.isEqual(Se)?r=r.add(ie):A.done()});o.push(b)}),Fe.waitFor(o).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=Li.prefixForPath(this.userId,r),f=IDBKeyRange.lowerBound(u);let _=new fr(cn);return Ih(e).jt({range:f},(b,C,S)=>{const[A,F,H]=b,ie=du(F);A===this.userId&&r.isPrefixOf(ie)?ie.length===o&&(_=_.add(H)):S.done()}).next(()=>this.te(e,_))}te(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ll(e).get(u).next(f=>{if(null===f)throw wt();Lt(f.userId===this.userId),r.push(Ch(this.k,f))}))}),Fe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return X1(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Fe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Fe.resolve();const r=IDBKeyRange.lowerBound(Li.prefixForUser(this.userId)),o=[];return Ih(e).jt({range:r},(u,f,_)=>{if(u[0]===this.userId){const b=du(u[1]);o.push(b)}else _.done()}).next(()=>{Lt(0===o.length)})})}containsKey(e,t){return eC(e,this.userId,t)}ne(e){return Cb(e).get(this.userId).next(t=>t||new sl(this.userId,-1,""))}}function eC(n,e,t){const r=Li.prefixForPath(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let f=!1;return Ih(n).jt({range:u,Kt:!0},(_,b,C)=>{const[S,A,F]=_;S===e&&A===o&&(f=!0),C.done()}).next(()=>f)}function ll(n){return ys(n,Fn.store)}function Ih(n){return ys(n,Li.store)}function Cb(n){return ys(n,sl.store)}class fu{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new fu(0)}static re(){return new fu(-1)}}class tC{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new fu(t.highestTargetId);return t.highestTargetId=r.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>$t.fromTimestamp(new ui(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.ae(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ae(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kp(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(Lt(r.targetCount>0),r.targetCount-=1,this.ae(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Kp(e).jt((f,_)=>{const b=Th(_);b.sequenceNumber<=t&&null===r.get(b.targetId)&&(o++,u.push(this.removeTargetData(e,b)))}).next(()=>Fe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Kp(e).jt((r,o)=>{const u=Th(o);t(u)})}oe(e){return nC(e).get(Vs.key).next(t=>(Lt(null!==t),t))}ae(e,t){return nC(e).put(Vs.key,t)}ce(e,t){return Kp(e).put(vb(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=ah(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Kp(e).jt({range:o,index:_s.queryTargetsIndexName},(f,_,b)=>{const C=Th(_);Mp(t,C.target)&&(u=C,b.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Bs(e);return t.forEach(f=>{const _=Ro(f.path);o.push(u.put(new Si(r,_))),o.push(this.referenceDelegate.addReference(e,r,f))}),Fe.waitFor(o)}removeMatchingKeys(e,t,r){const o=Bs(e);return Fe.forEach(t,u=>{const f=Ro(u.path);return Fe.waitFor([o.delete([r,f]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Bs(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Bs(e);let u=hn();return o.jt({range:r,Kt:!0},(f,_,b)=>{const C=du(f[1]),S=new mt(C);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ro(t.path),o=IDBKeyRange.bound([r],[F0(r)],!1,!0);let u=0;return Bs(e).jt({index:Si.documentTargetsIndex,Kt:!0,range:o},([f,_],b,C)=>{0!==f&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Kp(e).get(t).next(r=>r?Th(r):null)}}function Kp(n){return ys(n,_s.store)}function nC(n){return ys(n,Vs.store)}function Bs(n){return ys(n,Si.store)}function Sh(n){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,Ie.Z)(function*(n){if(n.code!==we.FAILED_PRECONDITION||n.message!==z1)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),Yp.apply(this,arguments)}function Qp([n,e],[t,r]){const o=cn(n,t);return 0===o?cn(e,r):o}class iA{constructor(e){this.he=e,this.buffer=new fr(Qp),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Qp(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ah{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;ze("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ie.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){ol(o)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Sh(o)}yield t.me(e)}))}}class sA{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Fe.resolve(Fs.I);const r=new iA(t);return this.ge.forEachTarget(e,o=>r.de(o.sequenceNumber)).next(()=>this.ge.pe(e,o=>r.de(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Fe.resolve(Eb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Eb):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,o,u,f,_,b,C;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,_=Date.now(),this.removeTargets(e,r,t))).next(A=>(u=A,b=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(C=Date.now(),P0()<=ia.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${f-S}ms\n\tDetermined least recently used ${o} in `+(_-f)+`ms\n\tRemoved ${u} targets in `+(b-_)+`ms\n\tRemoved ${A} documents in `+(C-b)+`ms\nTotal Duration: ${C-S}ms`),Fe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}class vR{constructor(e,t){this.db=e,this.garbageCollector=new sA(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,o)=>t(o))}addReference(e,t,r){return j_(e,r)}removeReference(e,t,r){return j_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return j_(e,t)}Ae(e,t){return function(r,o){let u=!1;return Cb(r).Qt(f=>eC(r,f,o).next(_=>(_&&(u=!0),Fe.resolve(!_)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Ie(e,(f,_)=>{if(_<=t){const b=this.Ae(e,f).next(C=>{if(!C)return u++,r.getEntry(e,f).next(()=>(r.removeEntry(f),Bs(e).delete([0,Ro(f.path)])))});o.push(b)}}).next(()=>Fe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return j_(e,t)}Ie(e,t){const r=Bs(e);let o,u=Fs.I;return r.jt({index:Si.documentTargetsIndex},([f,_],{path:b,sequenceNumber:C})=>{0===f?(u!==Fs.I&&t(new mt(du(o)),u),u=C,o=b):u=Fs.I}).next(()=>{u!==Fs.I&&t(new mt(du(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function j_(n,e){return Bs(n).put((r=n.currentSequenceNumber,new Si(0,Ro(e.path),r)));var r}class Xi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){tl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return MS(this.inner)}}class Tb{constructor(){this.changes=new Xi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:$t.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:nr.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Fe.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class bR{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return pu(e).put(Ib(t),r)}removeEntry(e,t){const r=pu(e),o=Ib(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return pu(e).get(Ib(t)).next(r=>this.Pe(t,r))}be(e,t){return pu(e).get(Ib(t)).next(r=>({document:this.Pe(t,r),size:U_(r)}))}getEntries(e,t){let r=Ls();return this.ve(e,t,(o,u)=>{const f=this.Pe(o,u);r=r.insert(o,f)}).next(()=>r)}Ve(e,t){let r=Ls(),o=new Yr(mt.comparator);return this.ve(e,t,(u,f)=>{const _=this.Pe(u,f);r=r.insert(u,_),o=o.insert(u,U_(f))}).next(()=>({documents:r,Se:o}))}ve(e,t,r){if(t.isEmpty())return Fe.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),u=t.getIterator();let f=u.getNext();return pu(e).jt({range:o},(_,b,C)=>{const S=mt.fromSegments(_);for(;f&&mt.comparator(f,S)<0;)r(f,null),f=u.getNext();f&&f.isEqual(S)&&(r(f,b),f=u.hasNext()?u.getNext():null),f?C.Lt(f.path.toArray()):C.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=Ls();const u=t.path.length+1,f={};if(r.isEqual($t.min())){const _=t.path.toArray();f.range=IDBKeyRange.lowerBound(_)}else{const _=t.path.toArray(),b=yb(r);f.range=IDBKeyRange.lowerBound([_,b],!0),f.index=Gn.collectionReadTimeIndex}return pu(e).jt(f,(_,b,C)=>{if(_.length!==u)return;const S=_b(this.k,b);t.path.isPrefixOf(S.key.path)?Op(t,S)&&(o=o.insert(S.key,S)):C.done()}).next(()=>o)}newChangeBuffer(e){return new H_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return rC(e).get(fa.key).next(t=>(Lt(!!t),t))}Re(e,t){return rC(e).put(fa.key,t)}Pe(e,t){if(t){const r=_b(this.k,t);if(!r.isNoDocument()||!r.version.isEqual($t.min()))return r}return nr.newInvalidDocument(e)}}class H_ extends Tb{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Xi(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new fr((u,f)=>cn(u.canonicalString(),f.canonicalString()));return this.changes.forEach((u,f)=>{const _=this.Ce.get(u);if(f.document.isValidDocument()){const b=Q1(this.De.k,f.document,this.getReadTime(u));o=o.add(u.path.popLast()),r+=U_(b)-_,t.push(this.De.addEntry(e,u,b))}else if(r-=_,this.trackRemovals){const b=Q1(this.De.k,nr.newNoDocument(u,$t.min()),this.getReadTime(u));t.push(this.De.addEntry(e,u,b))}else t.push(this.De.removeEntry(e,u))}),o.forEach(u=>{t.push(this.De.Jt.addToCollectionParentIndex(e,u))}),t.push(this.De.updateMetadata(e,r)),Fe.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:o})=>(o.forEach((u,f)=>{this.Ce.set(u,f)}),r))}}function rC(n){return ys(n,fa.store)}function pu(n){return ys(n,Gn.store)}function Ib(n){return n.path.toArray()}class oA{constructor(e){this.k=e}Nt(e,t,r,o){Lt(r<o&&r>=0&&o<=11);const u=new Wp("createOrUpgrade",t);var _;r<1&&o>=1&&(e.createObjectStore(ao.store),(_=e).createObjectStore(sl.store,{keyPath:sl.keyPath}),_.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0}),_.createObjectStore(Li.store),iC(e),function(_){_.createObjectStore(Gn.store)}(e));let f=Fe.resolve();return r<3&&o>=3&&(0!==r&&(function(_){_.deleteObjectStore(Si.store),_.deleteObjectStore(_s.store),_.deleteObjectStore(Vs.store)}(e),iC(e)),f=f.next(()=>function(_){const b=_.store(Vs.store),C=new Vs(0,0,$t.min().toTimestamp(),0);return b.put(Vs.key,C)}(u))),r<4&&o>=4&&(0!==r&&(f=f.next(()=>function(_,b){return b.store(Fn.store).Bt().next(C=>{_.deleteObjectStore(Fn.store),_.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0});const S=b.store(Fn.store),A=C.map(F=>S.put(F));return Fe.waitFor(A)})}(e,u))),f=f.next(()=>{!function(_){_.createObjectStore(pa.store,{keyPath:pa.keyPath})}(e)})),r<5&&o>=5&&(f=f.next(()=>this.Ne(u))),r<6&&o>=6&&(f=f.next(()=>(function(_){_.createObjectStore(fa.store)}(e),this.ke(u)))),r<7&&o>=7&&(f=f.next(()=>this.xe(u))),r<8&&o>=8&&(f=f.next(()=>this.$e(e,u))),r<9&&o>=9&&(f=f.next(()=>{(function(_){_.objectStoreNames.contains("remoteDocumentChanges")&&_.deleteObjectStore("remoteDocumentChanges")})(e),function(_){const b=_.objectStore(Gn.store);b.createIndex(Gn.readTimeIndex,Gn.readTimeIndexPath,{unique:!1}),b.createIndex(Gn.collectionReadTimeIndex,Gn.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(f=f.next(()=>this.Fe(u))),r<11&&o>=11&&(f=f.next(()=>{(function(_){_.createObjectStore(vh.store,{keyPath:vh.keyPath})})(e),function(_){_.createObjectStore(bh.store,{keyPath:bh.keyPath})}(e)})),f}ke(e){let t=0;return e.store(Gn.store).jt((r,o)=>{t+=U_(o)}).next(()=>{const r=new fa(t);return e.store(fa.store).put(fa.key,r)})}Ne(e){const t=e.store(sl.store),r=e.store(Fn.store);return t.Bt().next(o=>Fe.forEach(o,u=>{const f=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.Bt(Fn.userMutationsIndex,f).next(_=>Fe.forEach(_,b=>{Lt(b.userId===u.userId);const C=Ch(this.k,b);return X1(e,u.userId,C).next(()=>{})}))}))}xe(e){const t=e.store(Si.store),r=e.store(Gn.store);return e.store(Vs.store).get(Vs.key).next(o=>{const u=[];return r.jt((f,_)=>{const b=new En(f),C=[0,Ro(b)];u.push(t.get(C).next(S=>S?Fe.resolve():t.put(new Si(0,Ro(b),o.highestListenSequenceNumber))))}).next(()=>Fe.waitFor(u))})}$e(e,t){e.createObjectStore(Nc.store,{keyPath:Nc.keyPath});const r=t.store(Nc.store),o=new wb,u=f=>{if(o.add(f)){const _=f.lastSegment(),b=f.popLast();return r.put({collectionId:_,parent:Ro(b)})}};return t.store(Gn.store).jt({Kt:!0},(f,_)=>{const b=new En(f);return u(b.popLast())}).next(()=>t.store(Li.store).jt({Kt:!0},([f,_,b],C)=>{const S=du(_);return u(S.popLast())}))}Fe(e){const t=e.store(_s.store);return t.jt((r,o)=>{const u=Th(o),f=vb(this.k,u);return t.put(f)})}}function iC(n){n.createObjectStore(Si.store,{keyPath:Si.keyPath}).createIndex(Si.documentTargetsIndex,Si.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(_s.store,{keyPath:_s.keyPath}).createIndex(_s.queryTargetsIndexName,_s.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Vs.store)}const Sb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Jp{constructor(e,t,r,o,u,f,_,b,C,S){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=u,this.window=f,this.document=_,this.Me=C,this.Le=S,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=A=>Promise.resolve(),!Jp.bt())throw new Le(we.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vR(this,o),this.Ge=t+"main",this.k=new Y1(b),this.ze=new xo(this.Ge,11,new oA(this.k)),this.He=new tC(this.referenceDelegate,this.k),this.Jt=new Db,this.Je=new bR(this.k,this.Jt),this.Ye=new nA,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===S&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(we.FAILED_PRECONDITION,Sb);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new Fs(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Mh(e).put(new pa(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(ol(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Nh(e).get(ao.key).next(t=>Fe.resolve(this.un(t)))}hn(e){return Mh(e).delete(this.clientId)}ln(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ys(r,pa.store);return o.Bt().next(u=>{const f=e.dn(u,18e5),_=u.filter(b=>-1===f.indexOf(b));return Fe.forEach(_,b=>o.delete(b.clientId)).next(()=>_)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Fe.resolve(!0):Nh(e).get(ao.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Le(we.FAILED_PRECONDITION,Sb);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mh(e).Bt().next(r=>void 0===this.dn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const f=!this.inForeground&&o.inForeground,_=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||f&&_)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[ao.store,pa.store],t=>{const r=new K1(t,Fs.I);return e.an(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Mh(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return Zp.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let u;return ze("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",wh,f=>(u=new K1(f,this.Be?this.Be.next():Fs.I),"readwrite-primary"===t?this.rn(u).next(_=>!!_||this.on(u)).next(_=>{if(!_)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Le(we.FAILED_PRECONDITION,z1);return r(u)}).next(_=>this.cn(u).next(()=>_)):this.En(u).next(()=>r(u)))).then(f=>(u.raiseOnCommittedEvent(),f))}En(e){return Nh(e).get(ao.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(we.FAILED_PRECONDITION,Sb)})}cn(e){const t=new ao(this.clientId,this.allowTabSynchronization,Date.now());return Nh(e).put(ao.key,t)}static bt(){return xo.bt()}an(e){const t=Nh(e);return t.get(ao.key).next(r=>this.un(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete(ao.key)):Fe.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Or(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,nn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nh(n){return ys(n,ao.store)}function Mh(n){return ys(n,pa.store)}function gu(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class $_{constructor(e,t){this.progress=e,this.In=t}}class Rh{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Pn(e,t,r))}Pn(e,t,r){return this.Je.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return mt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Sn(e,t.path):I_(t)?this.Dn(e,t,r):this.Cn(e,t,r);var o}Sn(e,t){return this.Rn(e,new mt(t)).next(r=>{let o=N_();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Dn(e,t,r){const o=t.collectionGroup;let u=N_();return this.Jt.getCollectionParents(e,o).next(f=>Fe.forEach(f,_=>{const b=(C=t,S=_.child(o),new nl(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.Cn(e,b,r).next(C=>{C.forEach((S,A)=>{u=u.insert(S,A)})})}).next(()=>u))}Cn(e,t,r){let o,u;return this.Je.getDocumentsMatchingQuery(e,t,r).next(f=>(o=f,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(f=>(u=f,this.Nn(e,u,o).next(_=>{o=_;for(const b of u)for(const C of b.mutations){const S=C.key;let A=o.get(S);null==A&&(A=nr.newInvalidDocument(S),o=o.insert(S,A)),nb(C,A,b.localWriteTime),A.isFoundDocument()||(o=o.remove(S))}}))).next(()=>(o.forEach((f,_)=>{Op(t,_)||(o=o.remove(f))}),o))}Nn(e,t,r){let o=hn();for(const f of t)for(const _ of f.mutations)_ instanceof cu&&null===r.get(_.key)&&(o=o.add(_.key));let u=r;return this.Je.getEntries(e,o).next(f=>(f.forEach((_,b)=>{b.isFoundDocument()&&(u=u.insert(_,b))}),u))}}class Ab{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=o}static $n(e,t){let r=hn(),o=hn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ab(e,t.fromCache,r,o)}}class Nb{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual($t.min())?this.Mn(e,t):this.On.vn(e,o).next(u=>{const f=this.Ln(t,u);return(uh(t)||ch(t))&&this.Bn(t.limitType,f,o,r)?this.Mn(e,t):(P0()<=ia.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Q0(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(_=>(f.forEach(b=>{_=_.insert(b.key,b)}),_)))});var u}Ln(e,t){let r=new fr(w1(e));return t.forEach((o,u)=>{Op(e,u)&&(r=r.add(u))}),r}Bn(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mn(e,t){return P0()<=ia.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Q0(t)),this.On.getDocumentsMatchingQuery(e,t,$t.min())}}class sC{constructor(e,t,r,o){this.persistence=e,this.Un=t,this.k=o,this.qn=new Yr(cn),this.Kn=new Xi(u=>ah(u),Mp),this.jn=$t.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Rh(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function oC(n,e,t,r){return new sC(n,e,t,r)}function aC(n,e){return Mb.apply(this,arguments)}function Mb(){return Mb=(0,Ie.Z)(function*(n,e){const t=tt(n);let r=t.An,o=t.Wn;const u=yield t.persistence.runTransaction("Handle user change","readonly",f=>{let _;return t.An.getAllMutationBatches(f).next(b=>(_=b,r=t.persistence.getMutationQueue(e),o=new Rh(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(f))).next(b=>{const C=[],S=[];let A=hn();for(const F of _){C.push(F.batchId);for(const H of F.mutations)A=A.add(H.key)}for(const F of b){S.push(F.batchId);for(const H of F.mutations)A=A.add(H.key)}return o.vn(f,A).next(F=>({Gn:F,removedBatchIds:C,addedBatchIds:S}))})});return t.An=r,t.Wn=o,t.Un.Fn(t.Wn),u}),Mb.apply(this,arguments)}function Rb(n,e){const t=tt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Qn.newChangeBuffer({trackRemovals:!0});return function(f,_,b,C){const S=b.batch,A=S.keys();let F=Fe.resolve();return A.forEach(H=>{F=F.next(()=>C.getEntry(_,H)).next(ie=>{const Se=b.docVersions.get(H);Lt(null!==Se),ie.version.compareTo(Se)<0&&(S.applyToRemoteDocument(ie,b),ie.isValidDocument()&&C.addEntry(ie,b.commitVersion))})}),F.next(()=>f.An.removeMutationBatch(_,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,o))})}function lC(n){const e=tt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function wR(n,e){const t=tt(n),r=e.snapshotVersion;let o=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=t.Qn.newChangeBuffer({trackRemovals:!0});o=t.qn;const _=[];e.targetChanges.forEach((C,S)=>{const A=o.get(S);if(!A)return;_.push(t.He.removeMatchingKeys(u,C.removedDocuments,S).next(()=>t.He.addMatchingKeys(u,C.addedDocuments,S)));const F=C.resumeToken;if(F.approximateByteSize()>0){const H=A.withResumeToken(F,r).withSequenceNumber(u.currentSequenceNumber);o=o.insert(S,H),ie=A,Oe=C,Lt((Se=H).resumeToken.approximateByteSize()>0),(0===ie.resumeToken.approximateByteSize()||Se.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=3e8||Oe.addedDocuments.size+Oe.modifiedDocuments.size+Oe.removedDocuments.size>0)&&_.push(t.He.updateTargetData(u,H))}var ie,Se,Oe});let b=Ls();if(e.documentUpdates.forEach((C,S)=>{e.resolvedLimboDocuments.has(C)&&_.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),_.push(uC(u,f,e.documentUpdates,r,void 0).next(C=>{b=C})),!r.isEqual($t.min())){const C=t.He.getLastRemoteSnapshotVersion(u).next(S=>t.He.setTargetsMetadata(u,u.currentSequenceNumber,r));_.push(C)}return Fe.waitFor(_).next(()=>f.apply(u)).next(()=>t.Wn.Vn(u,b)).next(()=>b)}).then(u=>(t.qn=o,u))}function uC(n,e,t,r,o){let u=hn();return t.forEach(f=>u=u.add(f)),e.getEntries(n,u).next(f=>{let _=Ls();return t.forEach((b,C)=>{const S=f.get(b),A=(null==o?void 0:o.get(b))||r;C.isNoDocument()&&C.version.isEqual($t.min())?(e.removeEntry(b,A),_=_.insert(b,C)):!S.isValidDocument()||C.version.compareTo(S.version)>0||0===C.version.compareTo(S.version)&&S.hasPendingWrites?(e.addEntry(C,A),_=_.insert(b,C)):ze("LocalStore","Ignoring outdated watch update for ",b,". Current version:",S.version," Watch version:",C.version)}),_})}function aA(n,e){const t=tt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function lo(n,e){const t=tt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.He.getTargetData(r,e).next(u=>u?(o=u,Fe.resolve(o)):t.He.allocateTargetId(r).next(f=>(o=new al(e,f,0,r.currentSequenceNumber),t.He.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qn.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function Mc(n,e,t){return mu.apply(this,arguments)}function mu(){return mu=(0,Ie.Z)(function*(n,e,t){const r=tt(n),o=r.qn.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ol(f))throw f;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${f}`)}r.qn=r.qn.remove(e),r.Kn.delete(o.target)}),mu.apply(this,arguments)}function xb(n,e,t){const r=tt(n);let o=$t.min(),u=hn();return r.persistence.runTransaction("Execute query","readonly",f=>function(_,b,C){const S=tt(_),A=S.Kn.get(C);return void 0!==A?Fe.resolve(S.qn.get(A)):S.He.getTargetData(b,C)}(r,f,Cr(e)).next(_=>{if(_)return o=_.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(f,_.targetId).next(b=>{u=b})}).next(()=>r.Un.getDocumentsMatchingQuery(f,e,t?o:$t.min(),t?u:hn())).next(_=>({documents:_,zn:u})))}function Ob(n,e){const t=tt(n),r=tt(t.He),o=t.qn.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(f=>f?f.target:null))}function cC(n){const e=tt(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,u){const f=tt(r);let _=Ls(),b=yb(u);const C=pu(o),S=IDBKeyRange.lowerBound(b,!0);return C.jt({index:Gn.readTimeIndex,range:S},(A,F)=>{const H=_b(f.k,F);_=_.insert(H.key,H),b=F.readTime}).next(()=>({In:_,readTime:J1(b)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function Xp(){return Xp=(0,Ie.Z)(function*(n){const e=tt(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=pu(r);let u=$t.min();return o.jt({index:Gn.readTimeIndex,reverse:!0},(f,_,b)=>{_.readTime&&(u=J1(_.readTime)),b.done()}).next(()=>u)}(t)).then(t=>{e.jn=t})}),Xp.apply(this,arguments)}function dC(){return dC=(0,Ie.Z)(function*(n,e,t,r){const o=tt(n);let u=hn(),f=Ls(),_=M_();for(const S of t){const A=e.Hn(S.metadata.name);S.document&&(u=u.add(A)),f=f.insert(A,e.Jn(S)),_=_.insert(A,e.Yn(S.metadata.readTime))}const b=o.Qn.newChangeBuffer({trackRemovals:!0}),C=yield lo(o,(S=r,Cr(xp(En.fromString(`__bundle__/docs/${S}`)))));var S;return o.persistence.runTransaction("Apply bundle documents","readwrite",S=>uC(S,b,f,$t.min(),_).next(A=>(b.apply(S),A)).next(A=>o.He.removeMatchingKeysForTargetId(S,C.targetId).next(()=>o.He.addMatchingKeys(S,u,C.targetId)).next(()=>o.Wn.Vn(S,A)).next(()=>A)))}),dC.apply(this,arguments)}function CR(n,e){return G_.apply(this,arguments)}function G_(){return G_=(0,Ie.Z)(function*(n,e,t=hn()){const r=yield lo(n,Cr(L_(e.bundledQuery))),o=tt(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const f=Qt(e.readTime);if(r.snapshotVersion.compareTo(f)>=0)return o.Ye.saveNamedQuery(u,e);const _=r.withResumeToken(kr.EMPTY_BYTE_STRING,f);return o.qn=o.qn.insert(_.targetId,_),o.He.updateTargetData(u,_).next(()=>o.He.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.He.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ye.saveNamedQuery(u,e))})}),G_.apply(this,arguments)}class kb{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Fe.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:Qt(r.createTime)}),Fe.resolve()}getNamedQuery(e,t){return Fe.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:L_(r.bundledQuery),readTime:Qt(r.readTime)}),Fe.resolve();var r}}class Pb{constructor(){this.ts=new fr(Qr.es),this.ns=new fr(Qr.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Qr(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Qr(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new mt(new En([])),r=new Qr(t,e),o=new Qr(t,e+1),u=[];return this.ns.forEachInRange([r,o],f=>{this.os(f),u.push(f.key)}),u}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new mt(new En([])),r=new Qr(t,e),o=new Qr(t,e+1);let u=hn();return this.ns.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(e){const t=new Qr(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Qr{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return mt.comparator(e.key,t.key)||cn(e.fs,t.fs)}static ss(e,t){return cn(e.fs,t.fs)||mt.comparator(e.key,t.key)}}class hC{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new fr(Qr.es)}checkEmpty(e){return Fe.resolve(0===this.An.length)}addMutationBatch(e,t,r,o){const u=this.ds;this.ds++;const f=new zp(u,t,r,o);this.An.push(f);for(const _ of o)this.ws=this.ws.add(new Qr(_.key,u)),this.Jt.addToCollectionParentIndex(e,_.key.path.popLast());return Fe.resolve(f)}lookupMutationBatch(e,t){return Fe.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.gs(t+1),u=o<0?0:o;return Fe.resolve(this.An.length>u?this.An[u]:null)}getHighestUnacknowledgedBatchId(){return Fe.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Fe.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Qr(t,0),o=new Qr(t,Number.POSITIVE_INFINITY),u=[];return this.ws.forEachInRange([r,o],f=>{const _=this._s(f.fs);u.push(_)}),Fe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fr(cn);return t.forEach(o=>{const u=new Qr(o,0),f=new Qr(o,Number.POSITIVE_INFINITY);this.ws.forEachInRange([u,f],_=>{r=r.add(_.fs)})}),Fe.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;mt.isDocumentKey(u)||(u=u.child(""));const f=new Qr(new mt(u),0);let _=new fr(cn);return this.ws.forEachWhile(b=>{const C=b.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(_=_.add(b.fs)),!0)},f),Fe.resolve(this.ys(_))}ys(e){const t=[];return e.forEach(r=>{const o=this._s(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Lt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Fe.forEach(t.mutations,o=>{const u=new Qr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Qr(t,0),o=this.ws.firstAfterOrEqual(r);return Fe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return Fe.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class fC{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new Yr(mt.comparator),this.size=0}addEntry(e,t,r){const o=t.key,u=this.docs.get(o),f=u?u.size:0,_=this.Ts(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:_,readTime:r}),this.size+=_-f,this.Jt.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Fe.resolve(r?r.document.clone():nr.newInvalidDocument(t))}getEntries(e,t){let r=Ls();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.clone():nr.newInvalidDocument(o))}),Fe.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=Ls();const u=new mt(t.path.child("")),f=this.docs.getIteratorFrom(u);for(;f.hasNext();){const{key:_,value:{document:b,readTime:C}}=f.getNext();if(!t.path.isPrefixOf(_.path))break;C.compareTo(r)<=0||Op(t,b)&&(o=o.insert(b.key,b.clone()))}return Fe.resolve(o)}Es(e,t){return Fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new lA(this)}getSize(e){return Fe.resolve(this.size)}}class lA extends Tb{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.De.addEntry(e,o.document,this.getReadTime(r))):this.De.removeEntry(r)}),Fe.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class uA{constructor(e){this.persistence=e,this.Is=new Xi(t=>ah(t),Mp),this.lastRemoteSnapshotVersion=$t.min(),this.highestTargetId=0,this.As=0,this.Rs=new Pb,this.targetCount=0,this.Ps=fu.ie()}forEachTarget(e,t){return this.Is.forEach((r,o)=>t(o)),Fe.resolve()}getLastRemoteSnapshotVersion(e){return Fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fe.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Fe.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new fu(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Fe.resolve()}updateTargetData(e,t){return this.ce(t),Fe.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Fe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Is.forEach((f,_)=>{_.sequenceNumber<=t&&null===r.get(_.targetId)&&(this.Is.delete(f),u.push(this.removeMatchingKeysForTargetId(e,_.targetId)),o++)}),Fe.waitFor(u).next(()=>o)}getTargetCount(e){return Fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Fe.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Fe.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),Fe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Fe.resolve(r)}containsKey(e,t){return Fe.resolve(this.Rs.containsKey(t))}}class cA{constructor(e,t){this.bs={},this.Be=new Fs(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new uA(this),this.Jt=new rA,this.Je=new fC(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new Y1(t),this.Ye=new kb(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new hC(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const o=new dA(this.Be.next());return this.referenceDelegate.Vs(),r(o).next(u=>this.referenceDelegate.Ss(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ds(e,t){return Fe.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class dA extends fb{constructor(e){super(),this.currentSequenceNumber=e}}class Fb{constructor(e){this.persistence=e,this.Cs=new Pb,this.Ns=null}static ks(e){return new Fb(e)}get xs(){if(this.Ns)return this.Ns;throw wt()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Fe.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Fe.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Fe.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.xs.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fe.forEach(this.xs,r=>{const o=mt.fromPath(r);return this.$s(e,o).next(u=>{u||t.removeEntry(o)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Fe.or([()=>Fe.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function pC(n,e){return`firestore_clients_${n}_${e}`}function xh(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function W_(n,e){return`firestore_targets_${n}_${e}`}class eg{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Fs(e,t,r){const o=JSON.parse(r);let u,f="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return f&&o.error&&(f="string"==typeof o.error.message&&"string"==typeof o.error.code,f&&(u=new Le(o.error.code,o.error.message))),f?new eg(e,t,o.state,u):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Oh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Fs(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Le(r.error.code,r.error.message))),u?new Oh(e,r.state,o):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class tg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=R_();for(let f=0;o&&f<r.activeTargetIds.length;++f)o=B0(r.activeTargetIds[f]),u=u.add(r.activeTargetIds[f]);return o?new tg(e,u):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class q_{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new q_(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Lb{constructor(){this.activeTargetIds=R_()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vb{constructor(e,t,r,o,u){this.window=e,this.Oe=t,this.persistenceKey=r,this.Bs=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Yr(cn),this.started=!1,this.js=[];const f=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.Qs=pC(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new Lb),this.Gs=new RegExp(`^firestore_clients_${f}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${f}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${f}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(_){return`firestore_bundle_loaded_${_}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Tn();for(const o of t){if(o===e.Bs)continue;const u=e.getItem(pC(e.persistenceKey,o));if(u){const f=tg.Fs(o,u);f&&(e.Ks=e.Ks.insert(f.clientId,f))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const o=e.Zs(r);o&&e.ti(o)}for(const o of e.js)e.qs(o);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(W_(this.persistenceKey,e));if(r){const o=Oh.Fs(e,r);o&&(t=o.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(W_(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.si(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ui(o,null)}{const o=t.hi(r.key,r.newValue);if(o)return t.ui(o.clientId,o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.li(r.key,r.newValue);if(o)return t.fi(o)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const o=t.di(r.key,r.newValue);if(o)return t.wi(o)}}else if(r.key===t.Js){if(null!==r.newValue){const o=t.Zs(r.newValue);if(o)return t.ti(o)}}else if(r.key===t.Ws){const o=function(u){let f=Fs.I;if(null!=u)try{const _=JSON.parse(u);Lt("number"==typeof _),f=_}catch(_){Or("SharedClientState","Failed to read sequence number from WebStorage",_)}return f}(r.newValue);o!==Fs.I&&t.sequenceNumberHandler(o)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,r){const o=new eg(this.currentUser,e,t,r),u=xh(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Os())}si(e){const t=xh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const o=W_(this.persistenceKey,e),u=new Oh(e,t,r);this.setItem(o,u.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ci(e);return tg.Fs(r,t)}li(e,t){const r=this.zs.exec(e),o=Number(r[1]);return eg.Fs(new li(void 0!==r[2]?r[2]:null),o,t)}di(e,t){const r=this.Hs.exec(e),o=Number(r[1]);return Oh.Fs(o,t)}Zs(e){return q_.Fs(e)}fi(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),o=this.ei(this.Ks),u=this.ei(r),f=[],_=[];return u.forEach(b=>{o.has(b)||f.push(b)}),o.forEach(b=>{u.has(b)||_.push(b)}),this.syncEngine.yi(f,_).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=R_();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class gC{constructor(){this.pi=new Lb,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Lb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class hA{Ei(e){}shutdown(){}}class mC{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class pA{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class ng extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,o,u){const f=this.Ui(e,t);ze("RestConnection","Sending: ",f,r);const _={};return this.qi(_,o,u),this.Ki(e,f,_,r).then(b=>(ze("RestConnection","Received: ",b),b),b=>{throw wc("RestConnection",`${e} failed with error: `,b,"url: ",f,"request:",r),b})}ji(e,t,r,o,u){return this.Bi(e,t,r,o,u)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}Ui(e,t){return`${this.Mi}/v1/${t}:${fA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,o){return new Promise((u,f)=>{const _=new CS;_.listenOnce(ES.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case k0.NO_ERROR:const C=_.getResponseJson();ze("Connection","XHR received:",JSON.stringify(C)),u(C);break;case k0.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),f(new Le(we.DEADLINE_EXCEEDED,"Request time out"));break;case k0.HTTP_ERROR:const S=_.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',S,"response text:",_.getResponseText()),S>0){const A=_.getResponseJson().error;if(A&&A.status&&A.message){const F=function(H){const ie=H.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(ie)>=0?ie:we.UNKNOWN}(A.status);f(new Le(F,A.message))}else f(new Le(we.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Le(we.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const b=JSON.stringify(o);_.send(t,"POST",b,r,15)})}Qi(e,t,r){const o=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=r1(),f=i1(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(_.xmlHttpFactory=new a1({})),this.qi(_.initMessageHeaders,t,r),(0,nn.uI)()||(0,nn.b$)()||(0,nn.d)()||(0,nn.w1)()||(0,nn.Mn)()||(0,nn.ru)()||(_.httpHeadersOverwriteParam="$httpHeaders");const b=o.join("");ze("Connection","Creating WebChannel: "+b,_);const C=u.createWebChannel(b,_);let S=!1,A=!1;const F=new pA({Vi:ie=>{A?ze("Connection","Not sending because WebChannel is closed:",ie):(S||(ze("Connection","Opening WebChannel transport."),C.open(),S=!0),ze("Connection","WebChannel sending:",ie),C.send(ie))},Si:()=>C.close()}),H=(ie,Se,Oe)=>{ie.listen(Se,dt=>{try{Oe(dt)}catch(at){setTimeout(()=>{throw at},0)}})};return H(C,w_.EventType.OPEN,()=>{A||ze("Connection","WebChannel transport opened.")}),H(C,w_.EventType.CLOSE,()=>{A||(A=!0,ze("Connection","WebChannel transport closed"),F.Fi())}),H(C,w_.EventType.ERROR,ie=>{A||(A=!0,wc("Connection","WebChannel transport errored:",ie),F.Fi(new Le(we.UNAVAILABLE,"The operation could not be completed")))}),H(C,w_.EventType.MESSAGE,ie=>{var Se;if(!A){const Oe=ie.data[0];Lt(!!Oe);const dt=Oe,at=dt.error||(null===(Se=dt[0])||void 0===Se?void 0:Se.error);if(at){ze("Connection","WebChannel received error:",at);const kt=at.status;let ot=function(Yt){const yn=Pr[Yt];if(void 0!==yn)return x1(yn)}(kt),St=at.message;void 0===ot&&(ot=we.INTERNAL,St="Unknown error status: "+kt+" with message "+at.message),A=!0,F.Fi(new Le(ot,St)),C.close()}else ze("Connection","WebChannel received:",Oe),F.Oi(Oe)}}),H(f,s1.STAT_EVENT,ie=>{ie.stat===o1.PROXY?ze("Connection","Detected buffering proxy"):ie.stat===o1.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.$i()},0),F}}function _C(){return"undefined"!=typeof window?window:null}function kh(){return"undefined"!=typeof document?document:null}function vs(n){return new O_(n,!0)}class Bb{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Oe=e,this.timerId=t,this.Wi=r,this.Gi=o,this.zi=u,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),o=Math.max(0,t-r);o>0&&ze("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class rg{constructor(e,t,r,o,u,f,_,b){this.Oe=e,this.nr=r,this.sr=o,this.ir=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=_,this.listener=b,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Bb(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,Ie.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,Ie.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===we.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===we.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.rr===t&&this.Ir(r,o)},r=>{e(()=>{const o=new Le(we.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(o)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(o=>{r(()=>this.Ar(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}dr(){var e=this;this.state=5,this.ur.Zi((0,Ie.Z)(function*(){e.state=0,e.start()}))}Ar(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gA extends rg{constructor(e,t,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,f),this.k=u}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(b=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===b?1:"REMOVE"===b?2:"CURRENT"===b?3:"RESET"===b?4:wt(),o=e.targetChange.targetIds||[],u=function(b,C){return b.C?(Lt(void 0===C||"string"==typeof C),kr.fromBase64String(C||"")):(Lt(void 0===C||C instanceof Uint8Array),kr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),f=e.targetChange.cause,_=f&&function(b){const C=void 0===b.code?we.UNKNOWN:x1(b.code);return new Le(C,b.message||"")}(f);t=new sb(r,o,u,_||null)}else if("documentChange"in e){const r=e.documentChange,o=ha(n,r.document.name),u=Qt(r.document.updateTime),f=new Ii({mapValue:{fields:r.document.fields}}),_=nr.newFoundDocument(o,u,f);t=new ph(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=ha(n,r.document),u=r.readTime?Qt(r.readTime):$t.min(),f=nr.newNoDocument(o,u);t=new ph([],r.removedTargetIds||[],f.key,f)}else if("documentRemove"in e){const r=e.documentRemove,o=ha(n,r.document);t=new ph([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return wt();{const r=e.filter,u=new HS(r.count||0);t=new GS(r.targetId,u)}}var b;return t}(this.k,e),r=function(o){if(!("targetChange"in o))return $t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?$t.min():u.readTime?Qt(u.readTime):$t.min()}(e);return this.listener.Pr(t,r)}br(e){const t={};t.database=gh(this.k),t.addTarget=function(o,u){let f;const _=u.target;return f=W0(_)?{documents:Gp(o,_)}:{query:cb(o,_)},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?f.resumeToken=jp(o,u.resumeToken):u.snapshotVersion.compareTo($t.min())>0&&(f.readTime=Up(o,u.snapshotVersion.toTimestamp())),f}(this.k,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=gh(this.k),t.removeTarget=e,this.gr(t)}}class TR extends rg{constructor(e,t,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,f),this.k=u,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(n,e){return n&&n.length>0?(Lt(void 0!==e),n.map(t=>function(r,o){let u=Qt(r.updateTime?r.updateTime:o);return u.isEqual($t.min())&&(u=Qt(o)),new T1(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Qt(e.commitTime);return this.listener.Cr(r,t)}return Lt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=gh(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>F_(this.k,r))};this.gr(t)}}class mA extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=o,this.$r=!1}Fr(){if(this.$r)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.Bi(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Le(we.UNKNOWN,o.toString())})}ji(e,t,r){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.ir.ji(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Le(we.UNKNOWN,o.toString())})}terminate(){this.$r=!0}}class ig{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Or(t),this.Lr=!1):ze("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class _A{constructor(e,t,r,o,u){var f=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=u,this.Hr.Ei(_=>{r.enqueueAndForget((0,Ie.Z)(function*(){var b;cl(f)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,Ie.Z)(function*(C){const S=tt(C);S.Gr.add(4),yield ul(S),S.Jr.set("Unknown"),S.Gr.delete(4),yield sg(S)}),function(C){return b.apply(this,arguments)})(f))}))}),this.Jr=new ig(r,o)}}function sg(n){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,Ie.Z)(function*(n){if(cl(n))for(const e of n.zr)yield e(!0)}),Ub.apply(this,arguments)}function ul(n){return jb.apply(this,arguments)}function jb(){return jb=(0,Ie.Z)(function*(n){for(const e of n.zr)yield e(!1)}),jb.apply(this,arguments)}function Hb(n,e){const t=tt(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),z_(t)?$b(t):Fr(t).lr()&&Ph(t,e))}function og(n,e){const t=tt(n),r=Fr(t);t.Wr.delete(e),r.lr()&&yC(t,e),0===t.Wr.size&&(r.lr()?r._r():cl(t)&&t.Jr.set("Unknown"))}function Ph(n,e){n.Yr.X(e.targetId),Fr(n).br(e)}function yC(n,e){n.Yr.X(e),Fr(n).vr(e)}function $b(n){n.Yr=new _R({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),Fr(n).start(),n.Jr.Br()}function z_(n){return cl(n)&&!Fr(n).hr()&&n.Wr.size>0}function cl(n){return 0===tt(n).Gr.size}function Z_(n){n.Yr=void 0}function vC(n){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,Ie.Z)(function*(n){n.Wr.forEach((e,t)=>{Ph(n,e)})}),Gb.apply(this,arguments)}function yA(n,e){return bC.apply(this,arguments)}function bC(){return bC=(0,Ie.Z)(function*(n,e){Z_(n),z_(n)?(n.Jr.Kr(e),$b(n)):n.Jr.set("Unknown")}),bC.apply(this,arguments)}function Wb(n,e,t){return ag.apply(this,arguments)}function ag(){return ag=(0,Ie.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof sb&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const f=u.cause;for(const _ of u.targetIds)o.Wr.has(_)&&(yield o.remoteSyncer.rejectListen(_,f),o.Wr.delete(_),o.Yr.removeTarget(_))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lg(n,r)}else if(e instanceof ph?n.Yr.ot(e):e instanceof GS?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual($t.min()))try{const r=yield lC(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const f=o.Yr.gt(u);return f.targetChanges.forEach((_,b)=>{if(_.resumeToken.approximateByteSize()>0){const C=o.Wr.get(b);C&&o.Wr.set(b,C.withResumeToken(_.resumeToken,u))}}),f.targetMismatches.forEach(_=>{const b=o.Wr.get(_);if(!b)return;o.Wr.set(_,b.withResumeToken(kr.EMPTY_BYTE_STRING,b.snapshotVersion)),yC(o,_);const C=new al(b.target,_,1,b.sequenceNumber);Ph(o,C)}),o.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield lg(n,r)}var r}),ag.apply(this,arguments)}function lg(n,e,t){return ug.apply(this,arguments)}function ug(){return ug=(0,Ie.Z)(function*(n,e,t){if(!ol(e))throw e;n.Gr.add(1),yield ul(n),n.Jr.set("Offline"),t||(t=()=>lC(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield sg(n)}))}),ug.apply(this,arguments)}function K_(n,e){return e().catch(t=>lg(n,t,e))}function Fh(n){return qb.apply(this,arguments)}function qb(){return qb=(0,Ie.Z)(function*(n){const e=tt(n),t=Us(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;vA(e);)try{const o=yield aA(e.localStore,r);if(null===o){0===e.Qr.length&&t._r();break}r=o.batchId,bA(e,o)}catch(o){yield lg(e,o)}zb(e)&&Y_(e)}),qb.apply(this,arguments)}function vA(n){return cl(n)&&n.Qr.length<10}function bA(n,e){n.Qr.push(e);const t=Us(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function zb(n){return cl(n)&&!Us(n).hr()&&n.Qr.length>0}function Y_(n){Us(n).start()}function wC(n){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,Ie.Z)(function*(n){Us(n).kr()}),Q_.apply(this,arguments)}function DC(n){return J_.apply(this,arguments)}function J_(){return J_=(0,Ie.Z)(function*(n){const e=Us(n);for(const t of n.Qr)e.Dr(t.mutations)}),J_.apply(this,arguments)}function wA(n,e,t){return X_.apply(this,arguments)}function X_(){return X_=(0,Ie.Z)(function*(n,e,t){const r=n.Qr.shift(),o=mb.from(r,e,t);yield K_(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Fh(n)}),X_.apply(this,arguments)}function EC(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,Ie.Z)(function*(n,e){var t;e&&Us(n).Sr&&(yield(t=(0,Ie.Z)(function*(r,o){if(R1(u=o.code)&&u!==we.ABORTED){const f=r.Qr.shift();Us(r).wr(),yield K_(r,()=>r.remoteSyncer.rejectFailedWrite(f.batchId,o)),yield Fh(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),zb(n)&&Y_(n)}),Zb.apply(this,arguments)}function ey(n,e){return ty.apply(this,arguments)}function ty(){return ty=(0,Ie.Z)(function*(n,e){const t=tt(n);e?(t.Gr.delete(2),yield sg(t)):e||(t.Gr.add(2),yield ul(t),t.Jr.set("Unknown"))}),ty.apply(this,arguments)}function Fr(n){return n.Xr||(n.Xr=function(e,t,r){const o=tt(e);return o.Fr(),new gA(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:vC.bind(null,n),Ni:yA.bind(null,n),Pr:Wb.bind(null,n)}),n.zr.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Xr.wr(),z_(n)?$b(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),Z_(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function Us(n){return n.Zr||(n.Zr=function(e,t,r){const o=tt(e);return o.Fr(),new TR(t,o.ir,o.authCredentials,o.appCheckCredentials,o.k,r)}(n.datastore,n.asyncQueue,{Di:wC.bind(null,n),Ni:EC.bind(null,n),Nr:DC.bind(null,n),Cr:wA.bind(null,n)}),n.zr.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Zr.wr(),yield Fh(n)):(yield n.Zr.stop(),n.Qr.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class Kb{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}static createAndSchedule(e,t,r,o,u){const f=Date.now()+r,_=new Kb(e,t,f,o,u);return _.start(r),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(n,e){if(Or("AsyncQueue",`${e}: ${n}`),ol(n))return new Le(we.UNAVAILABLE,`${e}: ${n}`);throw n}class cg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||mt.comparator(t.key,r.key):(t,r)=>mt.comparator(t.key,r.key),this.keyedMap=N_(),this.sortedSet=new Yr(this.comparator)}static emptySet(e){return new cg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Vh{constructor(){this.eo=new Yr(mt.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):wt():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bh{constructor(e,t,r,o,u,f,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=_,this.excludesMetadataChanges=b}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Bh(e,t,cg.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Yb{constructor(){this.so=void 0,this.listeners=[]}}class DA{constructor(){this.queries=new Xi(e=>Y0(e),dh),this.onlineState="Unknown",this.io=new Set}}function ny(n,e){return Qb.apply(this,arguments)}function Qb(){return Qb=(0,Ie.Z)(function*(n,e){const t=tt(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Yb),o)try{u.so=yield t.onListen(r)}catch(f){const _=Lh(f,`Initialization of query '${Q0(e.query)}' failed`);return void e.onError(_)}t.queries.set(r,u),u.listeners.push(e),e.ro(t.onlineState),u.so&&e.oo(u.so)&&Uh(t)}),Qb.apply(this,arguments)}function Jb(n,e){return dg.apply(this,arguments)}function dg(){return dg=(0,Ie.Z)(function*(n,e){const t=tt(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const f=u.listeners.indexOf(e);f>=0&&(u.listeners.splice(f,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),dg.apply(this,arguments)}function CC(n,e){const t=tt(n);let r=!1;for(const o of e){const f=t.queries.get(o.query);if(f){for(const _ of f.listeners)_.oo(o)&&(r=!0);f.so=o}}r&&Uh(t)}function TC(n,e,t){const r=tt(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Uh(n){n.io.forEach(e=>{e.next()})}class hg{constructor(e,t,r){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Bh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Bh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class IR{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class Xb{constructor(e){this.k=e}Hn(e){return ha(this.k,e)}Jn(e){return e.metadata.exists?U1(this.k,e.document,!1):nr.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Qt(e)}}class EA{constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=ew(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new Xb(this.k);for(const o of e)if(o.metadata.queries){const u=r.Hn(o.metadata.name);for(const f of o.metadata.queries){const _=(t.get(f)||hn()).add(u);t.set(f,_)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function(n,e,t,r){return dC.apply(this,arguments)}(e.localStore,new Xb(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const o of e.queries)yield CR(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new $_(Object.assign({},e.progress),t)})()}}function ew(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fg{constructor(e){this.key=e}}class tw{constructor(e){this.key=e}}class IC{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=hn(),this.mutatedKeys=hn(),this.Ao=w1(e),this.Ro=new cg(this.Ao)}get Po(){return this.To}bo(e,t){const r=t?t.vo:new Vh,o=t?t.Ro:this.Ro;let u=t?t.mutatedKeys:this.mutatedKeys,f=o,_=!1;const b=uh(this.query)&&o.size===this.query.limit?o.last():null,C=ch(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,A)=>{const F=o.get(S),H=Op(this.query,A)?A:null,ie=!!F&&this.mutatedKeys.has(F.key),Se=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Oe=!1;F&&H?F.data.isEqual(H.data)?ie!==Se&&(r.track({type:3,doc:H}),Oe=!0):this.Vo(F,H)||(r.track({type:2,doc:H}),Oe=!0,(b&&this.Ao(H,b)>0||C&&this.Ao(H,C)<0)&&(_=!0)):!F&&H?(r.track({type:0,doc:H}),Oe=!0):F&&!H&&(r.track({type:1,doc:F}),Oe=!0,(b||C)&&(_=!0)),Oe&&(H?(f=f.add(H),u=Se?u.add(S):u.delete(S)):(f=f.delete(S),u=u.delete(S)))}),uh(this.query)||ch(this.query))for(;f.size>this.query.limit;){const S=uh(this.query)?f.last():f.first();f=f.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Ro:f,vo:r,Bn:_,mutatedKeys:u}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const u=e.vo.no();u.sort((C,S)=>function(A,F){const H=ie=>{switch(ie){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return H(A)-H(F)}(C.type,S.type)||this.Ao(C.doc,S.doc)),this.So(r);const f=t?this.Do():[],_=0===this.Io.size&&this.current?1:0,b=_!==this.Eo;return this.Eo=_,0!==u.length||b?{snapshot:new Bh(this.query,e.Ro,o,u,e.mutatedKeys,0===_,b,!1),Co:f}:{Co:f}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Vh,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=hn(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new tw(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new fg(r))}),t}ko(e){this.To=e.zn,this.Io=hn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Bh.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class nw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rw{constructor(e){this.key=e,this.$o=!1}}class CA{constructor(e,t,r,o,u,f){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Fo={},this.Oo=new Xi(_=>Y0(_),dh),this.Mo=new Map,this.Lo=new Set,this.Bo=new Yr(mt.comparator),this.Uo=new Map,this.qo=new Pb,this.Ko={},this.jo=new Map,this.Qo=fu.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function TA(n,e){return ry.apply(this,arguments)}function ry(){return ry=(0,Ie.Z)(function*(n,e){const t=hy(n);let r,o;const u=t.Oo.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.xo();else{const f=yield lo(t.localStore,Cr(e)),_=t.sharedClientState.addLocalQueryTarget(f.targetId);r=f.targetId,o=yield iy(t,e,r,"current"===_),t.isPrimaryClient&&Hb(t.remoteStore,f)}return o}),ry.apply(this,arguments)}function iy(n,e,t,r){return sy.apply(this,arguments)}function sy(){return sy=(0,Ie.Z)(function*(n,e,t,r){n.Go=(S,A,F)=>{return(H=(0,Ie.Z)(function*(ie,Se,Oe,dt){let at=Se.view.bo(Oe);at.Bn&&(at=yield xb(ie.localStore,Se.query,!1).then(({documents:St})=>Se.view.bo(St,at)));const kt=dt&&dt.targetChanges.get(Se.targetId),ot=Se.view.applyChanges(at,ie.isPrimaryClient,kt);return kC(ie,Se.targetId,ot.Co),ot.snapshot}),function(ie,Se,Oe,dt){return H.apply(this,arguments)})(n,S,A,F);var H};const o=yield xb(n.localStore,e,!0),u=new IC(e,o.zn),f=u.bo(o.documents),_=x_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),b=u.applyChanges(f,n.isPrimaryClient,_);kC(n,t,b.Co);const C=new nw(e,t,u);return n.Oo.set(e,C),n.Mo.has(t)?n.Mo.get(t).push(e):n.Mo.set(t,[e]),b.snapshot}),sy.apply(this,arguments)}function IA(n,e){return oy.apply(this,arguments)}function oy(){return oy=(0,Ie.Z)(function*(n,e){const t=tt(n),r=t.Oo.get(e),o=t.Mo.get(r.targetId);if(o.length>1)return t.Mo.set(r.targetId,o.filter(u=>!dh(u,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Mc(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),og(t.remoteStore,r.targetId),pg(t,r.targetId)}).catch(Sh))):(pg(t,r.targetId),yield Mc(t.localStore,r.targetId,!0))}),oy.apply(this,arguments)}function iw(){return iw=(0,Ie.Z)(function*(n,e,t){const r=fy(n);try{const o=yield function(u,f){const _=tt(u),b=ui.now(),C=f.reduce((A,F)=>A.add(F.key),hn());let S;return _.persistence.runTransaction("Locally write mutations","readwrite",A=>_.Wn.vn(A,C).next(F=>{S=F;const H=[];for(const ie of f){const Se=jS(ie,S.get(ie.key));null!=Se&&H.push(new cu(ie.key,Se,$0(Se.value.mapValue),Nr.exists(!0)))}return _.An.addMutationBatch(A,b,H,f)})).then(A=>(A.applyToLocalDocumentSet(S),{batchId:A.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,f,_){let b=u.Ko[u.currentUser.toKey()];b||(b=new Yr(cn)),b=b.insert(f,_),u.Ko[u.currentUser.toKey()]=b}(r,o.batchId,t),yield dl(r,o.changes),yield Fh(r.remoteStore)}catch(o){const u=Lh(o,"Failed to persist write");t.reject(u)}}),iw.apply(this,arguments)}function AC(n,e){return ay.apply(this,arguments)}function ay(){return ay=(0,Ie.Z)(function*(n,e){const t=tt(n);try{const r=yield wR(t.localStore,e);e.targetChanges.forEach((o,u)=>{const f=t.Uo.get(u);f&&(Lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?f.$o=!0:o.modifiedDocuments.size>0?Lt(f.$o):o.removedDocuments.size>0&&(Lt(f.$o),f.$o=!1))}),yield dl(t,r,e)}catch(r){yield Sh(r)}}),ay.apply(this,arguments)}function NC(n,e,t){const r=tt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((u,f)=>{const _=f.view.ro(e);_.snapshot&&o.push(_.snapshot)}),function(u,f){const _=tt(u);_.onlineState=f;let b=!1;_.queries.forEach((C,S)=>{for(const A of S.listeners)A.ro(f)&&(b=!0)}),b&&Uh(_)}(r.eventManager,e),o.length&&r.Fo.Pr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function MC(n,e,t){return ly.apply(this,arguments)}function ly(){return ly=(0,Ie.Z)(function*(n,e,t){const r=tt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Uo.get(e),u=o&&o.key;if(u){let f=new Yr(mt.comparator);f=f.insert(u,nr.newNoDocument(u,$t.min()));const _=hn().add(u),b=new da($t.min(),new Map,new fr(cn),f,_);yield AC(r,b),r.Bo=r.Bo.remove(u),r.Uo.delete(e),PC(r)}else yield Mc(r.localStore,e,!1).then(()=>pg(r,e,t)).catch(Sh)}),ly.apply(this,arguments)}function RC(n,e){return uy.apply(this,arguments)}function uy(){return uy=(0,Ie.Z)(function*(n,e){const t=tt(n),r=e.batch.batchId;try{const o=yield Rb(t.localStore,e);OC(t,r,null),xC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dl(t,o)}catch(o){yield Sh(o)}}),uy.apply(this,arguments)}function SA(n,e,t){return sw.apply(this,arguments)}function sw(){return sw=(0,Ie.Z)(function*(n,e,t){const r=tt(n);try{const o=yield function(u,f){const _=tt(u);return _.persistence.runTransaction("Reject batch","readwrite-primary",b=>{let C;return _.An.lookupMutationBatch(b,f).next(S=>(Lt(null!==S),C=S.keys(),_.An.removeMutationBatch(b,S))).next(()=>_.An.performConsistencyCheck(b)).next(()=>_.Wn.vn(b,C))})}(r.localStore,e);OC(r,e,t),xC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dl(r,o)}catch(o){yield Sh(o)}}),sw.apply(this,arguments)}function cy(){return cy=(0,Ie.Z)(function*(n,e){const t=tt(n);cl(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const f=tt(u);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",_=>f.An.getHighestUnacknowledgedBatchId(_))}(t.localStore);if(-1===r)return void e.resolve();const o=t.jo.get(r)||[];o.push(e),t.jo.set(r,o)}catch(r){const o=Lh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),cy.apply(this,arguments)}function xC(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function OC(n,e,t){const r=tt(n);let o=r.Ko[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.Ko[r.currentUser.toKey()]=o}}function pg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Mo.get(e))n.Oo.delete(r),t&&n.Fo.zo(r,t);n.Mo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||NA(n,r)})}function NA(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(og(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),PC(n))}function kC(n,e,t){for(const r of t)r instanceof fg?(n.qo.addReference(r.key,e),SR(n,r)):r instanceof tw?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||NA(n,r.key)):wt()}function SR(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.Lo.add(r),PC(n))}function PC(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new mt(En.fromString(e)),r=n.Qo.next();n.Uo.set(r,new rw(t)),n.Bo=n.Bo.insert(t,r),Hb(n.remoteStore,new al(Cr(xp(t.path)),r,2,Fs.I))}}function dl(n,e,t){return ow.apply(this,arguments)}function ow(){return ow=(0,Ie.Z)(function*(n,e,t){const r=tt(n),o=[],u=[],f=[];var _;r.Oo.isEmpty()||(r.Oo.forEach((_,b)=>{f.push(r.Go(b,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(b.targetId,C.fromCache?"not-current":"current"),o.push(C);const S=Ab.$n(b.targetId,C);u.push(S)}}))}),yield Promise.all(f),r.Fo.Pr(o),yield(_=(0,Ie.Z)(function*(b,C){const S=tt(b);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>Fe.forEach(C,F=>Fe.forEach(F.kn,H=>S.persistence.referenceDelegate.addReference(A,F.targetId,H)).next(()=>Fe.forEach(F.xn,H=>S.persistence.referenceDelegate.removeReference(A,F.targetId,H)))))}catch(A){if(!ol(A))throw A;ze("LocalStore","Failed to update sequence numbers: "+A)}for(const A of C){const F=A.targetId;if(!A.fromCache){const H=S.qn.get(F),Se=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);S.qn=S.qn.insert(F,Se)}}}),function(b,C){return _.apply(this,arguments)})(r.localStore,u))}),ow.apply(this,arguments)}function MA(n,e){return FC.apply(this,arguments)}function FC(){return FC=(0,Ie.Z)(function*(n,e){const t=tt(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield aC(t.localStore,e);t.currentUser=e,(o=t).jo.forEach(f=>{f.forEach(_=>{_.reject(new Le(we.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dl(t,r.Gn)}var o}),FC.apply(this,arguments)}function AR(n,e){const t=tt(n),r=t.Uo.get(e);if(r&&r.$o)return hn().add(r.key);{let o=hn();const u=t.Mo.get(e);if(!u)return o;for(const f of u){const _=t.Oo.get(f);o=o.unionWith(_.view.Po)}return o}}function NR(n,e){return aw.apply(this,arguments)}function aw(){return aw=(0,Ie.Z)(function*(n,e){const t=tt(n),r=yield xb(t.localStore,e.query,!0),o=e.view.ko(r);return t.isPrimaryClient&&kC(t,e.targetId,o.Co),o}),aw.apply(this,arguments)}function RA(n){return lw.apply(this,arguments)}function lw(){return lw=(0,Ie.Z)(function*(n){const e=tt(n);return cC(e.localStore).then(t=>dl(e,t))}),lw.apply(this,arguments)}function MR(n,e,t,r){return LC.apply(this,arguments)}function LC(){return LC=(0,Ie.Z)(function*(n,e,t,r){const o=tt(n),u=yield function(f,_){const b=tt(f),C=tt(b.An);return b.persistence.runTransaction("Lookup mutation documents","readonly",S=>C.Zt(S,_).next(A=>A?b.Wn.vn(S,A):Fe.resolve(null)))}(o.localStore,e);var _;null!==u?("pending"===t?yield Fh(o.remoteStore):"acknowledged"===t||"rejected"===t?(OC(o,e,r||null),xC(o,e),_=e,tt(tt(o.localStore).An).ee(_)):wt(),yield dl(o,u)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),LC.apply(this,arguments)}function VC(){return VC=(0,Ie.Z)(function*(n,e){const t=tt(n);if(hy(t),fy(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield BC(t,r.toArray());t.Wo=!0,yield ey(t.remoteStore,!0);for(const u of o)Hb(t.remoteStore,u)}else if(!1===e&&!1!==t.Wo){const r=[];let o=Promise.resolve();t.Mo.forEach((u,f)=>{t.sharedClientState.isLocalQueryTarget(f)?r.push(f):o=o.then(()=>(pg(t,f),Mc(t.localStore,f,!0))),og(t.remoteStore,f)}),yield o,yield BC(t,r),function(u){const f=tt(u);f.Uo.forEach((_,b)=>{og(f.remoteStore,b)}),f.qo.hs(),f.Uo=new Map,f.Bo=new Yr(mt.comparator)}(t),t.Wo=!1,yield ey(t.remoteStore,!1)}}),VC.apply(this,arguments)}function BC(n,e,t){return UC.apply(this,arguments)}function UC(){return UC=(0,Ie.Z)(function*(n,e,t){const r=tt(n),o=[],u=[];for(const f of e){let _;const b=r.Mo.get(f);if(b&&0!==b.length){_=yield lo(r.localStore,Cr(b[0]));for(const C of b){const S=r.Oo.get(C),A=yield NR(r,S);A.snapshot&&u.push(A.snapshot)}}else{const C=yield Ob(r.localStore,f);_=yield lo(r.localStore,C),yield iy(r,dy(C),f,!1)}o.push(_)}return r.Fo.Pr(u),o}),UC.apply(this,arguments)}function dy(n){return Z0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function jh(n){const e=tt(n);return tt(tt(e.localStore).persistence).Tn()}function jC(n,e,t,r){return uw.apply(this,arguments)}function uw(){return uw=(0,Ie.Z)(function*(n,e,t,r){const o=tt(n);if(o.Wo)ze("SyncEngine","Ignoring unexpected query state notification.");else if(o.Mo.has(e))switch(t){case"current":case"not-current":{const u=yield cC(o.localStore),f=da.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield dl(o,u,f);break}case"rejected":yield Mc(o.localStore,e,!0),pg(o,e,r);break;default:wt()}}),uw.apply(this,arguments)}function OA(n,e,t){return gg.apply(this,arguments)}function gg(){return gg=(0,Ie.Z)(function*(n,e,t){const r=hy(n);if(r.Wo){for(const o of e){if(r.Mo.has(o)){ze("SyncEngine","Adding an already active target "+o);continue}const u=yield Ob(r.localStore,o),f=yield lo(r.localStore,u);yield iy(r,dy(u),f.targetId,!1),Hb(r.remoteStore,f)}for(const o of t)r.Mo.has(o)&&(yield Mc(r.localStore,o,!1).then(()=>{og(r.remoteStore,o),pg(r,o)}).catch(Sh))}}),gg.apply(this,arguments)}function hy(n){const e=tt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MC.bind(null,e),e.Fo.Pr=CC.bind(null,e.eventManager),e.Fo.zo=TC.bind(null,e.eventManager),e}function fy(n){const e=tt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SA.bind(null,e),e}class kA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.k=vs(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return oC(this.persistence,new Nb,e.initialUser,this.k)}Yo(e){return new cA(Fb.ks,this.k)}Jo(e){return new gC}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cw extends kA{constructor(e,t,r){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield function(n){return Xp.apply(this,arguments)}(r.localStore),yield r.ta.initialize(r,e),yield fy(r.ta.syncEngine),yield Fh(r.ta.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return oC(this.persistence,new Nb,e.initialUser,this.k)}Xo(e){return new Ah(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=gu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new Jp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_C(),kh(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new gC}}class py extends cw{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.ta.syncEngine;r.sharedClientState instanceof Vb&&(r.sharedClientState.syncEngine={mi:MR.bind(null,o),gi:jC.bind(null,o),yi:OA.bind(null,o),Tn:jh.bind(null,o),_i:RA.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var u=(0,Ie.Z)(function*(f){yield function(n,e){return VC.apply(this,arguments)}(r.ta.syncEngine,f),r.gcScheduler&&(f&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):f||r.gcScheduler.stop())});return function(f){return u.apply(this,arguments)}}())})()}Jo(e){const t=_C();if(!Vb.bt(t))throw new Le(we.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=gu(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gy{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>NC(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=MA.bind(null,r.syncEngine),yield ey(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new DA}createDatastore(e){const t=vs(e.databaseInfo.databaseId),r=new ng(e.databaseInfo);return new mA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=_=>NC(this.syncEngine,_,0),f=mC.bt()?new mC:new hA,new _A(t,r,o,u,f);var t,r,o,u,f}createSyncEngine(e,t){return function(r,o,u,f,_,b,C){const S=new CA(r,o,u,f,_,b);return C&&(S.Wo=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=tt(t);ze("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield ul(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function PA(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class RR{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.oa();if(null===t)return null;const r=e.ia.decode(t),o=Number(r);isNaN(o)&&e.aa(`length string (${r}) is not valid number`);const u=yield e.ca(o);return new IR(JSON.parse(u),t.length+o)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,Ie.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ca(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const r=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.sa.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class FA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(we.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,f){const _=tt(u),b=gh(_.k)+"/documents",C={documents:f.map(H=>Hp(_.k,H))},S=yield _.ji("BatchGetDocuments",b,C),A=new Map;S.forEach(H=>{const ie=function(n,e){return"found"in e?function(t,r){Lt(!!r.found);const o=ha(t,r.found.name),u=Qt(r.found.updateTime),f=new Ii({mapValue:{fields:r.found.fields}});return nr.newFoundDocument(o,u,f)}(n,e):"missing"in e?function(t,r){Lt(!!r.missing),Lt(!!r.readTime);const o=ha(t,r.missing),u=Qt(r.readTime);return nr.newNoDocument(o,u)}(n,e):wt()}(_.k,H);A.set(ie.key.toString(),ie)});const F=[];return f.forEach(H=>{const ie=A.get(H.toString());Lt(!!ie),F.push(ie)}),F}),function(u,f){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=mt.fromPath(o);e.mutations.push(new rb(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const f=tt(o),_=gh(f.k)+"/documents",b={writes:u.map(C=>F_(f.k,C))};yield f.Bi("Commit",_,b)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wt();t=$t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(we.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual($t.min()))throw new Le(we.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class xR{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.la=5,this.ur=new Bb(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,Ie.Z)(function*(){const t=new FA(e.datastore),r=e.da(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.wa(u)}))}).catch(o=>{e.wa(o)})}))}da(e){try{const t=this.updateFunction(e);return!ou(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!R1(t)}return!1}}class $C{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=li.UNAUTHENTICATED,this.clientId=h1.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var f=(0,Ie.Z)(function*(_){ze("FirestoreClient","Received user=",_.uid),yield u.authCredentialListener(_),u.user=_});return function(_){return f.apply(this,arguments)}}()),this.appCheckCredentials.start(r,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(we.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Lh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function GC(n,e){return WC.apply(this,arguments)}function WC(){return WC=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield aC(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),WC.apply(this,arguments)}function LA(n,e){return mg.apply(this,arguments)}function mg(){return mg=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield hw(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(u=(0,Ie.Z)(function*(f,_){const b=tt(f);b.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const C=cl(b);b.Gr.add(3),yield ul(b),C&&b.Jr.set("Unknown"),yield b.remoteSyncer.handleCredentialChange(_),b.Gr.delete(3),yield sg(b)}),function(f,_){return u.apply(this,arguments)})(e.remoteStore,o);var u}),n.onlineComponents=e}),mg.apply(this,arguments)}function hw(n){return qC.apply(this,arguments)}function qC(){return qC=(0,Ie.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield GC(n,new kA)),n.offlineComponents}),qC.apply(this,arguments)}function fw(n){return pw.apply(this,arguments)}function pw(){return pw=(0,Ie.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield LA(n,new gy)),n.onlineComponents}),pw.apply(this,arguments)}function VA(n){return hw(n).then(e=>e.persistence)}function my(n){return hw(n).then(e=>e.localStore)}function zC(n){return fw(n).then(e=>e.remoteStore)}function ZC(n){return fw(n).then(e=>e.syncEngine)}function _g(n){return gw.apply(this,arguments)}function gw(){return gw=(0,Ie.Z)(function*(n){const e=yield fw(n),t=e.eventManager;return t.onListen=TA.bind(null,e.syncEngine),t.onUnlisten=IA.bind(null,e.syncEngine),t}),gw.apply(this,arguments)}function KC(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,f,_,b){const C=new dw({next:A=>{u.enqueueAndForget(()=>Jb(o,S));const F=A.docs.has(f);!F&&A.fromCache?b.reject(new Le(we.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&A.fromCache&&_&&"server"===_.source?b.reject(new Le(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):b.resolve(A)},error:A=>b.reject(A)}),S=new hg(xp(f.path),C,{includeMetadataChanges:!0,wo:!0});return ny(o,S)}(yield _g(n),n.asyncQueue,e,t,r)})),r.promise}function YC(n,e,t={}){const r=new Ti;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,f,_,b){const C=new dw({next:A=>{u.enqueueAndForget(()=>Jb(o,S)),A.fromCache&&"server"===_.source?b.reject(new Le(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):b.resolve(A)},error:A=>b.reject(A)}),S=new hg(f,C,{includeMetadataChanges:!0,wo:!0});return ny(o,S)}(yield _g(n),n.asyncQueue,e,t,r)})),r.promise}class $A{constructor(e,t,r,o,u,f,_,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=_,this.useFetchStreams=b}}class _u{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}const vw=new Map;function _y(n,e,t){if(!t)throw new Le(we.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QC(n,e,t,r){if(!0===e&&!0===r)throw new Le(we.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bw(n){if(!mt.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ww(n){if(mt.isDocumentKey(n))throw new Le(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":wt()}function pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yy(n);throw new Le(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vy(n,e){if(e<=0)throw new Le(we.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Dw{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,QC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hh{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dw({}),this._settingsFrozen=!1,e instanceof _u?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Le(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(o.options.projectId)}(e))}get app(){if(!this._app)throw new Le(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dw(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nh;switch(t.type){case"gapi":const r=t.client;return Lt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new d1(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Le(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=vw.get(e);t&&(ze("ComponentProvider","Removing Datastore"),vw.delete(e),t.terminate())}(this),Promise.resolve()}}class rr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rr(this.firestore,e,this._key)}}class Wn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wn(this.firestore,e,this._query)}}class ga extends Wn{constructor(e,t,r){super(e,t,xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rr(this.firestore,null,new mt(e))}withConverter(e){return new ga(this.firestore,e,this._path)}}function GA(n,e,...t){if(n=(0,nn.m9)(n),_y("collection","path",e),n instanceof Hh){const r=En.fromString(e,...t);return ww(r),new ga(n,null,r)}{if(!(n instanceof rr||n instanceof ga))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return ww(r),new ga(n.firestore,null,r)}}function Cw(n,e,...t){if(n=(0,nn.m9)(n),1===arguments.length&&(e=h1.A()),_y("doc","path",e),n instanceof Hh){const r=En.fromString(e,...t);return bw(r),new rr(n,null,new mt(r))}{if(!(n instanceof rr||n instanceof ga))throw new Le(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return bw(r),new rr(n.firestore,n instanceof ga?n.converter:null,new mt(r))}}function JC(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),(n instanceof rr||n instanceof ga)&&(e instanceof rr||e instanceof ga)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function XC(n,e){return n=(0,nn.m9)(n),e=(0,nn.m9)(e),n instanceof Wn&&e instanceof Wn&&n.firestore===e.firestore&&dh(n._query,e._query)&&n.converter===e.converter}class qA{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Bb(this,"async_queue_retry"),this.Ra=()=>{const t=kh();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=kh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=kh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new Ti;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!ol(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(r=>{throw this.Ta=r,this.Ea=!1,Or("INTERNAL UNHANDLED ERROR: ",function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),f}(r)),r}).then(r=>(this.Ea=!1,r))));return this.ma=t,t}enqueueAfterDelay(e,t,r){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const o=Kb.createAndSchedule(this,e,t,r,u=>this.Va(u));return this.pa.push(o),o}Pa(){this.Ta&&wt()}verifyOperationInProgress(){}Sa(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function eT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class zA{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends Hh{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new qA,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||KA(this),this._firestoreClient.terminate()}}function Jr(n){return n._firestoreClient||KA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KA(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $A(n._databaseId,u,n._persistenceKey,(_=t).host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,_.useFetchStreams));var u,_;n._firestoreClient=new $C(n._authCredentials,n._appCheckCredentials,n._queue,r)}function iT(n,e,t){const r=new Ti;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield GC(n,t),yield LA(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===we.FAILED_PRECONDITION||u.code===we.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function XA(n){if(n._initialized||n._terminated)throw new Le(we.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class yu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hl(kr.fromBase64String(e))}catch(t){throw new Le(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new hl(kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $h{constructor(e){this._methodName=e}}class Gh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}const eN=/^__.*__$/;class PR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lp(e,this.data,t,this.fieldTransforms)}}class oT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class by{constructor(e,t,r,o,u,f){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ka(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new by(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.Ma(e),o}La(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$a({path:r,Oa:!1});return o.ka(),o}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return Cy(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(aT(this.xa)&&eN.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class tN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||vs(e)}ja(e,t,r,o=!1){return new by({xa:e,methodName:t,Ka:r,path:Ar.emptyPath(),Oa:!1,qa:o},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function Wh(n){const e=n._freezeSettings(),t=vs(n._databaseId);return new tN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Iw(n,e,t,r,o,u={}){const f=n.ja(u.merge||u.mergeFields?2:0,e,t,o);fl("Data must be an object, but it was:",f,r);const _=cT(r,f);let b,C;if(u.merge)b=new Ec(f.fieldMask),C=f.fieldTransforms;else if(u.mergeFields){const S=[];for(const A of u.mergeFields){const F=Ey(e,A,t);if(!f.contains(F))throw new Le(we.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);Dg(S,F)||S.push(F)}b=new Ec(S),C=f.fieldTransforms.filter(A=>b.covers(A.field))}else b=null,C=f.fieldTransforms;return new PR(new Ii(_),b,C)}class wy extends $h{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wy}}function lT(n,e,t){return new by({xa:3,Ka:e.settings.Ka,methodName:n._methodName,Oa:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class vg extends $h{_toFieldTransform(e){return new fh(e.path,new rl)}isEqual(e){return e instanceof vg}}class di extends $h{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=lT(this,e,!0),r=this.Qa.map(u=>Rc(u,t)),o=new Sc(r);return new fh(e.path,o)}isEqual(e){return this===e}}class FR extends $h{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=lT(this,e,!0),r=this.Qa.map(u=>Rc(u,t)),o=new uu(r);return new fh(e.path,o)}isEqual(e){return this===e}}class uT extends $h{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new il(e.k,D1(e.k,this.Wa));return new fh(e.path,t)}isEqual(e){return this===e}}function Dy(n,e,t,r){const o=n.ja(1,e,t);fl("Data must be an object, but it was:",o,r);const u=[],f=Ii.empty();tl(r,(b,C)=>{const S=wg(e,b,t);C=(0,nn.m9)(C);const A=o.La(S);if(C instanceof wy)u.push(S);else{const F=Rc(C,A);null!=F&&(u.push(S),f.set(S,F))}});const _=new Ec(u);return new oT(f,_,o.fieldTransforms)}function Sw(n,e,t,r,o,u){const f=n.ja(1,e,t),_=[Ey(e,r,t)],b=[o];if(u.length%2!=0)throw new Le(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)_.push(Ey(e,u[F])),b.push(u[F+1]);const C=[],S=Ii.empty();for(let F=_.length-1;F>=0;--F)if(!Dg(C,_[F])){const H=_[F];let ie=b[F];ie=(0,nn.m9)(ie);const Se=f.La(H);if(ie instanceof wy)C.push(H);else{const Oe=Rc(ie,Se);null!=Oe&&(C.push(H),S.set(H,Oe))}}const A=new Ec(C);return new oT(S,A,f.fieldTransforms)}function bg(n,e,t,r=!1){return Rc(t,n.ja(r?4:3,e))}function Rc(n,e){if(Aw(n=(0,nn.m9)(n)))return fl("Unsupported field value:",e,n),cT(n,e);if(n instanceof $h)return function(t,r){if(!aT(r.xa))throw r.Ua(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ua(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const f of t){let _=Rc(f,r.Ba(u));null==_&&(_={nullValue:"NULL_VALUE"}),o.push(_),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,nn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return D1(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=ui.fromDate(t);return{timestampValue:Up(r.k,o)}}if(t instanceof ui){const o=new ui(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Up(r.k,o)}}if(t instanceof Gh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof hl)return{bytesValue:jp(r.k,t._byteString)};if(t instanceof rr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.Ua(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:V1(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ua(`Unsupported field value: ${yy(t)}`)}(n,e)}function cT(n,e){const t={};return MS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tl(n,(r,o)=>{const u=Rc(o,e.Fa(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Aw(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ui||n instanceof Gh||n instanceof hl||n instanceof rr||n instanceof $h)}function fl(n,e,t){if(!Aw(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=yy(t);throw e.Ua("an object"===r?n+" a custom object":n+" "+r)}var r}function Ey(n,e,t){if((e=(0,nn.m9)(e))instanceof yu)return e._internalPath;if("string"==typeof e)return wg(n,e);throw Cy("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const Nw=new RegExp("[~\\*/\\[\\]]");function wg(n,e,t){if(e.search(Nw)>=0)throw Cy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yu(...e.split("."))._internalPath}catch(r){throw Cy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Cy(n,e,t,r,o){const u=r&&!r.isEmpty(),f=void 0!==o;let _=`Function ${e}() called with invalid data`;t&&(_+=" (via `toFirestore()`)"),_+=". ";let b="";return(u||f)&&(b+=" (found",u&&(b+=` in field ${r}`),f&&(b+=` in document ${o}`),b+=")"),new Le(we.INVALID_ARGUMENT,_+n+b)}function Dg(n,e){return n.some(t=>t.isEqual(e))}class Eg{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new rr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mw extends Eg{data(){return super.data()}}function Cg(n,e){return"string"==typeof e?wg(n,e):e instanceof yu?e._internalPath:e._delegate._internalPath}class or{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vu extends Eg{constructor(e,t,r,o,u,f){super(e,t,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Tg extends vu{data(e={}){return super.data(e)}}class bu{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new or(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Tg(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(f=>({type:"added",doc:new Tg(r._firestore,r._userDataWriter,f.doc.key,f.doc,new or(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(f=>o||3!==f.type).map(f=>{const _=new Tg(r._firestore,r._userDataWriter,f.doc.key,f.doc,new or(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let b=-1,C=-1;return 0!==f.type&&(b=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),1!==f.type&&(u=u.add(f.doc),C=u.indexOf(f.doc.key)),{type:LR(f.type),doc:_,oldIndex:b,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function LR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}function Ig(n,e){return n instanceof vu&&e instanceof vu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof bu&&e instanceof bu&&n._firestore===e._firestore&&XC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dT(n){if(ch(n)&&0===n.explicitOrderBy.length)throw new Le(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ty{}function xc(n,...e){for(const t of e)n=t._apply(n);return n}class hT extends Ty{constructor(e,t,r){super(),this.Ga=e,this.za=t,this.Ha=r,this.type="where"}_apply(e){const t=Wh(e.firestore),r=function(o,u,f,_,b,C,S){let A;if(b.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on FieldPath.documentId().`);if("in"===C||"not-in"===C){mT(S,C);const H=[];for(const ie of S)H.push(Sg(_,o,ie));A={arrayValue:{values:H}}}else A=Sg(_,o,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||mT(S,C),A=bg(f,"where",S,"in"===C||"not-in"===C);const F=Qi.create(b,C,A);return function(H,ie){if(ie.V()){const Oe=K0(H);if(null!==Oe&&!Oe.isEqual(ie.field))throw new Le(we.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Oe.toString()}' and '${ie.field.toString()}'`);const dt=so(H);null!==dt&&_T(0,ie.field,dt)}const Se=function(Oe,dt){for(const at of Oe.filters)if(dt.indexOf(at.op)>=0)return at.op;return null}(H,function(Oe){switch(Oe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ie.op));if(null!==Se)throw new Le(we.INVALID_ARGUMENT,Se===ie.op?`Invalid query. You cannot use more than one '${ie.op.toString()}' filter.`:`Invalid query. You cannot use '${ie.op.toString()}' filters with '${Se.toString()}' filters.`)}(o,F),F}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Wn(e.firestore,e.converter,function(o,u){const f=o.filters.concat([u]);return new nl(o.path,o.collectionGroup,o.explicitOrderBy.slice(),f,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class rN extends Ty{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(we.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const f=new Mo(o,u);return function(_,b){if(null===so(_)){const C=K0(_);null!==C&&_T(0,C,b.field)}}(r,f),f}(e._query,this.Ga,this.Ja);return new Wn(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new nl(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class fT extends Ty{constructor(e,t,r){super(),this.type=e,this.Ya=t,this.Xa=r}_apply(e){return new Wn(e.firestore,e.converter,oo(e._query,this.Ya,this.Xa))}}class Rw extends Ty{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=Ow(e,this.type,this.Za,this.tc);return new Wn(e.firestore,e.converter,(o=t,new nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class xw extends Ty{constructor(e,t,r){super(),this.type=e,this.Za=t,this.tc=r}_apply(e){const t=Ow(e,this.type,this.Za,this.tc);return new Wn(e.firestore,e.converter,(o=t,new nl((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function Ow(n,e,t,r){if(t[0]=(0,nn.m9)(t[0]),t[0]instanceof Eg)return function(o,u,f,_,b){if(!_)throw new Le(we.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const C=[];for(const S of Ji(o))if(S.field.isKeyField())C.push(sh(u,_.key));else{const A=_.data.field(S.field);if(f1(A))throw new Le(we.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const F=S.field.canonicalString();throw new Le(we.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}C.push(A)}return new lh(C,b)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Wh(n.firestore);return function(u,f,_,b,C,S){const A=u.explicitOrderBy;if(C.length>A.length)throw new Le(we.INVALID_ARGUMENT,`Too many arguments provided to ${b}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let H=0;H<C.length;H++){const ie=C[H];if(A[H].field.isKeyField()){if("string"!=typeof ie)throw new Le(we.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${b}(), but got a ${typeof ie}`);if(!I_(u)&&-1!==ie.indexOf("/"))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${b}() must be a plain document ID, but '${ie}' contains a slash.`);const Se=u.path.child(En.fromString(ie));if(!mt.isDocumentKey(Se))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${b}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const Oe=new mt(Se);F.push(sh(f,Oe))}else{const Se=bg(_,b,ie);F.push(Se)}}return new lh(F,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Sg(n,e,t){if("string"==typeof(t=(0,nn.m9)(t))){if(""===t)throw new Le(we.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!I_(e)&&-1!==t.indexOf("/"))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!mt.isDocumentKey(r))throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sh(n,new mt(r))}if(t instanceof rr)return sh(n,t._key);throw new Le(we.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${yy(t)}.`)}function mT(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(we.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function _T(n,e,t){if(!t.isEqual(e))throw new Le(we.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class kw{convertValue(e,t="none"){switch(au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Er(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wt()}}convertObject(e,t){const r={};return tl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Gh(Er(e.latitude),Er(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=p1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ih(e));default:return null}}convertTimestamp(e){const t=ca(e);return new ui(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);Lt(hb(r));const o=new _u(r.get(1),r.get(3)),u=new mt(r.popFirst(5));return o.isEqual(t)||Or(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Sy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VR extends kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}class yT{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wh(e)}set(e,t,r){this._verifyNotCommitted();const o=wu(e,this._firestore),u=Sy(o.converter,t,r),f=Iw(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(f.toMutation(o._key,Nr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=wu(e,this._firestore);let f;return f="string"==typeof(t=(0,nn.m9)(t))||t instanceof yu?Sw(this._dataReader,"WriteBatch.update",u._key,t,r,o):Dy(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(f.toMutation(u._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wu(e,this._firestore);return this._mutations=this._mutations.concat(new Vp(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wu(n,e){if((n=(0,nn.m9)(n)).firestore!==e)throw new Le(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Oc extends kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new hl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rr(this.firestore,null,t)}}function Ag(n,e,t){n=pn(n,rr);const r=pn(n.firestore,pr),o=Sy(n.converter,e,t);return ma(r,[Iw(Wh(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Nr.none())])}function fN(n,e,t,...r){n=pn(n,rr);const o=pn(n.firestore,pr),u=Wh(o);let f;return f="string"==typeof(e=(0,nn.m9)(e))||e instanceof yu?Sw(u,"updateDoc",n._key,e,t,r):Dy(u,"updateDoc",n._key,e),ma(o,[f.toMutation(n._key,Nr.exists(!0))])}function pl(n,...e){var t,r,o;n=(0,nn.m9)(n);let u={includeMetadataChanges:!1},f=0;"object"!=typeof e[f]||eT(e[f])||(u=e[f],f++);const _={includeMetadataChanges:u.includeMetadataChanges};if(eT(e[f])){const A=e[f];e[f]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[f+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[f+2]=null===(o=A.complete)||void 0===o?void 0:o.bind(A)}let b,C,S;if(n instanceof rr)C=pn(n.firestore,pr),S=xp(n._key.path),b={next:A=>{e[f]&&e[f](vT(C,n,A))},error:e[f+1],complete:e[f+2]};else{const A=pn(n,Wn);C=pn(A.firestore,pr),S=A._query;const F=new Oc(C);b={next:H=>{e[f]&&e[f](new bu(C,F,A,H))},error:e[f+1],complete:e[f+2]},dT(n._query)}return function(A,F,H,ie){const Se=new dw(ie),Oe=new hg(F,Se,H);return A.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return ny(yield _g(A),Oe)})),()=>{Se.na(),A.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Jb(yield _g(A),Oe)}))}}(Jr(C),S,_,b)}function ma(n,e){return function(t,r){const o=new Ti;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(n,e,t){return iw.apply(this,arguments)}(yield ZC(t),r,o)})),o.promise}(Jr(n),e)}function vT(n,e,t){const r=t.docs.get(e._key),o=new Oc(n);return new vu(n,o,e._key,r,new or(t.hasPendingWrites,t.fromCache),e.converter)}class Ut extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wh(e)}get(e){const t=wu(e,this._firestore),r=new VR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return wt();const u=o[0];if(u.isFoundDocument())return new Eg(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Eg(this._firestore,r,t._key,null,t.converter);throw wt()})}set(e,t,r){const o=wu(e,this._firestore),u=Sy(o.converter,t,r),f=Iw(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,f),this}update(e,t,r,...o){const u=wu(e,this._firestore);let f;return f="string"==typeof(t=(0,nn.m9)(t))||t instanceof yu?Sw(this._dataReader,"Transaction.update",u._key,t,r,o):Dy(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,f),this}delete(e){const t=wu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wu(e,this._firestore),r=new Oc(this._firestore);return super.get(e).then(o=>new vu(this._firestore,r,t._key,o._document,new or(!1,!1),t.converter))}}function Ny(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Fw(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function _N(){if("undefined"==typeof atob)throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Sp=za.SDK_VERSION,(0,za._registerComponent)(new no.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new pr(o,new c1(t.getProvider("auth-internal")),new SS(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,za.registerVersion)(l1,"3.4.0",n),(0,za.registerVersion)(l1,"3.4.0","esm2017")}();class Mg{constructor(e){this._delegate=e}static fromBase64String(e){return _N(),new Mg(hl.fromBase64String(e))}static fromUint8Array(e){return Fw(),new Mg(hl.fromUint8Array(e))}toBase64(){return _N(),this._delegate.toBase64()}toUint8Array(){return Fw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lw(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class gr{enableIndexedDbPersistence(e,t){return function(n,e){XA(n=pn(n,pr));const t=Jr(n),r=n._freezeSettings(),o=new gy;return iT(t,o,new cw(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){XA(n=pn(n,pr));const e=Jr(n),t=n._freezeSettings(),r=new gy;return iT(e,r,new py(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Le(we.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!xo.bt())return Promise.resolve();const o=r+"main";yield xo.delete(o)}),function(r){return t.apply(this,arguments)})(gu(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class co{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _u||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const u=(n=pn(n,Hh))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&wc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let f,_;if("string"==typeof r.mockUserToken)f=r.mockUserToken,_=li.MOCK_USER;else{f=(0,nn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Le(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new li(b)}n._authCredentials=new TS(new u1(f,_))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield VA(n),t=yield zC(n);return e.setNetworkEnabled(!0),function(r){const o=tt(r);return o.Gr.delete(0),sg(o)}(t)}))}(Jr(n=pn(n,pr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield VA(n),t=yield zC(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=tt(o);u.Gr.add(0),yield ul(u),u.Jr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Jr(n=pn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,QC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(n,e){return cy.apply(this,arguments)}(yield ZC(e),t)})),t.promise}(Jr(n=pn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new dw(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield _g(n),o=t,tt(r).io.add(o),void o.next();var r,o})),()=>{t.na(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield _g(n),o=t,void tt(r).io.delete(o);var r,o}))}}(Jr(n=pn(n,pr)),eT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ko(this,GA(this._delegate,e))}catch(t){throw es(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bi(this,Cw(this._delegate,e))}catch(t){throw es(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xr(this,function(n,e){if(n=pn(n,Hh),_y("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(we.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wn(n,null,(t=e,new nl(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw es(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const r=yield(o=n,fw(o).then(u=>u.datastore));var o;new xR(n.asyncQueue,r,e,t).run()})),t.promise}(Jr(n=pn(n,pr)),t=>e(new Ut(n,t)))}(this._delegate,t=>e(new Vw(this,t)))}batch(){return Jr(this._delegate),new My(new yT(this._delegate,e=>ma(this._delegate,e)))}loadBundle(e){return function(n,e){const t=Jr(n=pn(n,pr)),r=new zA;return function(n,e,t,r){const o=function(u,f){let _;return _="string"==typeof u?(new TextEncoder).encode(u):u,b=function(b,C){if(b instanceof Uint8Array)return PA(b,C);if(b instanceof ArrayBuffer)return PA(new Uint8Array(b),C);if(b instanceof ReadableStream)return b.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(_),new RR(b,f);var b}(t,vs(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function(n,e,t){const r=tt(n);var o;(o=(0,Ie.Z)(function*(u,f,_){try{const b=yield f.getMetadata();if(yield function(F,H){const ie=tt(F),Se=Qt(H.createTime);return ie.persistence.runTransaction("hasNewerBundle","readonly",Oe=>ie.Ye.getBundleMetadata(Oe,H.id)).then(Oe=>!!Oe&&Oe.createTime.compareTo(Se)>=0)}(u.localStore,b))return yield f.close(),void _._completeWith((F=b,{taskState:"Success",documentsLoaded:F.totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}));_._updateProgress(ew(b));const C=new EA(b,u.localStore,f.k);let S=yield f.Ho();for(;S;){const F=yield C.yo(S);F&&_._updateProgress(F),S=yield f.Ho()}const A=yield C.complete();yield dl(u,A.In,void 0),yield function(F,H){const ie=tt(F);return ie.persistence.runTransaction("Save bundle","readwrite",Se=>ie.Ye.saveBundleMetadata(Se,H))}(u.localStore,b),_._completeWith(A.progress)}catch(b){wc("SyncEngine",`Loading bundle failed with ${b}`),_._failWith(b)}var F}),function(u,f,_){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield ZC(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=tt(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ye.getNamedQuery(u,r))}(yield my(n),e)}))}(Jr(n=pn(n,pr)),e).then(t=>t?new Wn(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xr(this,t):null)}}class Rg extends kw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mg(new hl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bi.forKey(t,this.firestore,null)}}class Vw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rg(e)}get(e){const t=Fc(e);return this._delegate.get(t).then(r=>new zh(this._firestore,new vu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Fc(e);return r?(Ny("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Fc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Fc(e);return this._delegate.delete(t),this}}class My{constructor(e){this._delegate=e}set(e,t,r){const o=Fc(e);return r?(Ny("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Fc(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Fc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ho{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Tg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pc(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ho.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new ho(e,new Rg(e),t),o.set(t,u)),u}}ho.INSTANCES=new WeakMap;class Bi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rg(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bi(t,new rr(t._delegate,r,new mt(e)))}static forKey(e,t,r){return new Bi(t,new rr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ko(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ko(this.firestore,GA(this._delegate,e))}catch(t){throw es(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,nn.m9)(e))instanceof rr&&JC(this._delegate,e)}set(e,t){t=Ny("DocumentReference.set",t);try{return t?Ag(this._delegate,e,t):Ag(this._delegate,e)}catch(r){throw es(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?fN(this._delegate,e):fN(this._delegate,e,t,...r)}catch(o){throw es(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return ma(pn(n.firestore,pr),[new Vp(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=Du(e),r=ET(e,o=>new zh(this.firestore,new vu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return pl(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=pn(n,rr);const e=pn(n.firestore,pr),t=Jr(e),r=new Oc(e);return function(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,f){try{const _=yield function(b,C){const S=tt(b);return S.persistence.runTransaction("read document","readonly",A=>S.Wn.Rn(A,C))}(o,u);_.isFoundDocument()?f.resolve(_):_.isNoDocument()?f.resolve(null):f.reject(new Le(we.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(_){const b=Lh(_,`Failed to get document '${u} from cache`);f.reject(b)}}),function(o,u,f){return r.apply(this,arguments)})(yield my(n),e,t);var r})),t.promise}(t,n._key).then(o=>new vu(e,r,n._key,o,new or(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=pn(n,rr);const e=pn(n.firestore,pr);return KC(Jr(e),n._key,{source:"server"}).then(t=>vT(e,n,t))}(this._delegate):function(n){n=pn(n,rr);const e=pn(n.firestore,pr);return KC(Jr(e),n._key).then(t=>vT(e,n,t))}(this._delegate),t.then(r=>new zh(this.firestore,new vu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Bi(this.firestore,this._delegate.withConverter(e?ho.getInstance(this.firestore,e):null))}}function es(n,e,t){return n.message=n.message.replace(e,t),n}function Du(n){for(const e of n)if("object"==typeof e&&!Lw(e))return e;return{}}function ET(n,e){var t,r;let o;return o=Lw(n[0])?n[0]:Lw(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class zh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ig(this._delegate,e._delegate)}}class Pc extends zh{data(e){const t=this._delegate.data(e);return function(n,e){n||wt()}(void 0!==t),t}}class Xr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rg(e)}where(e,t,r){try{return new Xr(this.firestore,xc(this._delegate,function(n,e,t){const r=e,o=Cg("where",n);return new hT(o,r,t)}(e,t,r)))}catch(o){throw es(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xr(this.firestore,xc(this._delegate,function(n,e="asc"){const t=e,r=Cg("orderBy",n);return new rN(r,t)}(e,t)))}catch(r){throw es(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xr(this.firestore,xc(this._delegate,function(n){return vy("limit",n),new fT("limit",n,"F")}(e)))}catch(t){throw es(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xr(this.firestore,xc(this._delegate,function(n){return vy("limitToLast",n),new fT("limitToLast",n,"L")}(e)))}catch(t){throw es(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xr(this.firestore,xc(this._delegate,function(...n){return new Rw("startAt",n,!0)}(...e)))}catch(t){throw es(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xr(this.firestore,xc(this._delegate,function(...n){return new Rw("startAfter",n,!1)}(...e)))}catch(t){throw es(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xr(this.firestore,xc(this._delegate,function(...n){return new xw("endBefore",n,!0)}(...e)))}catch(t){throw es(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xr(this.firestore,xc(this._delegate,function(...n){return new xw("endAt",n,!1)}(...e)))}catch(t){throw es(t,"endAt()","Query.endAt()")}}isEqual(e){return XC(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=pn(n,Wn);const e=pn(n.firestore,pr),t=Jr(e),r=new Oc(e);return function(n,e){const t=new Ti;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,f){try{const _=yield xb(o,u,!0),b=new IC(u,_.zn),C=b.bo(_.documents),S=b.applyChanges(C,!1);f.resolve(S.snapshot)}catch(_){const b=Lh(_,`Failed to execute query '${u} against cache`);f.reject(b)}}),function(o,u,f){return r.apply(this,arguments)})(yield my(n),e,t);var r})),t.promise}(t,n._query).then(o=>new bu(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=pn(n,Wn);const e=pn(n.firestore,pr),t=Jr(e),r=new Oc(e);return YC(t,n._query,{source:"server"}).then(o=>new bu(e,r,n,o))}(this._delegate):function(n){n=pn(n,Wn);const e=pn(n.firestore,pr),t=Jr(e),r=new Oc(e);return dT(n._query),YC(t,n._query).then(o=>new bu(e,r,n,o))}(this._delegate),t.then(r=>new Ry(this.firestore,new bu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Du(e),r=ET(e,o=>new Ry(this.firestore,new bu(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return pl(this._delegate,t,r)}withConverter(e){return new Xr(this.firestore,this._delegate.withConverter(e?ho.getInstance(this.firestore,e):null))}}class Bw{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Pc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ry{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Pc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Bw(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Pc(this._firestore,r))})}isEqual(e){return Ig(this._delegate,e._delegate)}}class ko extends Xr{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bi(this.firestore,e):null}doc(e){try{return new Bi(this.firestore,void 0===e?Cw(this._delegate):Cw(this._delegate,e))}catch(t){throw es(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=pn(n.firestore,pr),r=Cw(n),o=Sy(n.converter,e);return ma(t,[Iw(Wh(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Nr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Bi(this.firestore,t))}isEqual(e){return JC(this._delegate,e._delegate)}withConverter(e){return new ko(this.firestore,this._delegate.withConverter(e?ho.getInstance(this.firestore,e):null))}}function Fc(n){return pn(n,rr)}class Zh{constructor(...e){this._delegate=new yu(...e)}static documentId(){return new Zh(Ar.keyField().canonicalString())}isEqual(e){return(e=(0,nn.m9)(e))instanceof yu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Eu{constructor(e){this._delegate=e}static serverTimestamp(){const e=new vg("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Eu(e)}static delete(){const e=new wy("deleteField");return e._methodName="FieldValue.delete",new Eu(e)}static arrayUnion(...e){const t=function(...n){return new di("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Eu(t)}static arrayRemove(...e){const t=function(...n){return new FR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Eu(t)}static increment(e){const t=function(n){return new uT("increment",n)}(e);return t._methodName="FieldValue.increment",new Eu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const CT={Firestore:co,GeoPoint:Gh,Timestamp:ui,Blob:Mg,Transaction:Vw,WriteBatch:My,DocumentReference:Bi,DocumentSnapshot:zh,Query:Xr,QueryDocumentSnapshot:Pc,QuerySnapshot:Ry,CollectionReference:ko,FieldPath:Zh,FieldValue:Eu,setLogLevel:function(n){!function(n){bc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function(n){(function(n,e){n.INTERNAL.registerComponent(new no.wA("firestore-compat",t=>((e,t)=>new co(e,t,new gr))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},CT)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.9")}(Gv.Z);var Uw=M(3719);M(7713);const Yh=new Map,wN={activated:!1,tokenObservers:[]},DN={initialized:!1,enabled:!1};function hi(n){return Yh.get(n)||wN}function ya(n,e){Yh.set(n,e)}function jw(){return DN}class IN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new nn.BH,yield function(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new nn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ts=new nn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Fy(n){if(!hi(n).activated)throw ts.create("use-before-activation",{appName:n.name})}function Og(n,e){return Gw.apply(this,arguments)}function Gw(){return Gw=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const u={method:"POST",body:JSON.stringify(e),headers:r};let f,_;try{f=yield fetch(n,u)}catch(A){throw ts.create("fetch-network-error",{originalErrorMessage:A.message})}if(200!==f.status)throw ts.create("fetch-status-error",{httpStatus:f.status});try{_=yield f.json()}catch(A){throw ts.create("fetch-parse-error",{originalErrorMessage:A.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const C=1e3*Number(b[1]),S=Date.now();return{token:_.attestationToken,expireTimeMillis:S+C,issuedAtTimeMillis:S}}),Gw.apply(this,arguments)}function RN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const kg="firebase-app-check-store";let Cu=null;function AT(){return Cu||(Cu=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ts.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(kg,{keyPath:"compositeKey"})}}catch(t){e(ts.create("storage-open",{originalErrorMessage:t.message}))}}),Cu)}function qw(){return qw=(0,Ie.Z)(function*(n,e){const r=(yield AT()).transaction(kg,"readwrite"),u=r.objectStore(kg).put({compositeKey:n,value:e});return new Promise((f,_)=>{u.onsuccess=b=>{f()},r.onerror=b=>{var C;_(ts.create("storage-set",{originalErrorMessage:null===(C=b.target.error)||void 0===C?void 0:C.message}))}})}),qw.apply(this,arguments)}const Fg=new ia.Yd("@firebase/app-check");function OT(n,e){return(0,nn.hl)()?function(n,e){return function(n,e){return qw.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fg.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function PN(){return jw().enabled}function Ly(){return Kw.apply(this,arguments)}function Kw(){return Kw=(0,Ie.Z)(function*(){const n=jw();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Kw.apply(this,arguments)}const LN={error:"UNKNOWN_ERROR"};function VN(n){return nn.US.encodeString(JSON.stringify(n),!1)}function Vy(n){return Yw.apply(this,arguments)}function Yw(){return Yw=(0,Ie.Z)(function*(n,e=!1){const t=n.app;Fy(t);const r=hi(t);let u,o=r.token;if(!o){const b=yield r.cachedTokenPromise;b&&bs(b)&&(o=b)}if(!e&&o&&bs(o))return{token:o.token};let _,f=!1;if(PN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Og(RN(t,yield Ly()),n.platformLoggerProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),f=!0);const b=yield r.exchangeTokenPromise;return yield OT(t,b),ya(t,Object.assign(Object.assign({},r),{token:b})),{token:b.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(b=>(r.exchangeTokenPromise=void 0,b)),f=!0),o=yield r.exchangeTokenPromise}catch(b){"appCheck/throttled"===b.code?Fg.warn(b.message):Fg.error(b),u=b}return o?(_={token:o.token},ya(t,Object.assign(Object.assign({},r),{token:o})),yield OT(t,o)):_=Jw(u),f&&Qw(t,_),_}),Yw.apply(this,arguments)}function Lg(n,e){const t=hi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),ya(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function PT(n){const{app:e}=n,t=hi(e);let r=t.tokenRefresher;r||(r=function(n){const{app:e}=n;return new IN((0,Ie.Z)(function*(){let r;if(r=hi(e).token?yield Vy(n,!0):yield Vy(n),r.error)throw r.error}),()=>!0,()=>{const t=hi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),ya(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Qw(n,e){const t=hi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function bs(n){return n.expireTimeMillis-Date.now()>0}function Jw(n){return{token:VN(LN),error:n}}class BN{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=hi(this.app);for(const t of e)Lg(this.app,t.next);return Promise.resolve()}}const Hy="app-check-internal";(0,za._registerComponent)(new no.wA("app-check",n=>function(n,e){return new BN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Hy).initialize()})),(0,za._registerComponent)(new no.wA(Hy,n=>function(n){return{getToken:e=>Vy(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,u=hi(o),f={next:t,error:r,type:e};if(ya(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,f]})),u.token&&bs(u.token)){const _=u.token;Promise.resolve().then(()=>{t({token:_.token}),PT(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>PT(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,za.registerVersion)("@firebase/app-check","0.5.2");class Jh{constructor(){return(0,zr.vb)("app-check")}}"undefined"!=typeof window&&window;const iD=new d.OlP("angularfire2.auth.use-emulator"),Bg=new d.OlP("angularfire2.auth.settings"),WT=new d.OlP("angularfire2.auth.tenant-id"),qT=new d.OlP("angularfire2.auth.langugage-code"),zT=new d.OlP("angularfire2.auth.use-device-language"),ZT=new d.OlP("angularfire.auth.persistence"),sD=(n,e,t,r,o,u,f,_)=>(0,Ei.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const b=e.runOutsideAngular(()=>n.auth());if(t&&b.useEmulator(...t),r&&(b.tenantId=r),b.languageCode=o,u&&b.useDeviceLanguage(),f)for(const[C,S]of Object.entries(f))b.settings[C]=S;return _&&b.setPersistence(_),b},[t,r,o,u,f,_]);let oD=(()=>{class n{constructor(t,r,o,u,f,_,b,C,S,A,F,H){const ie=new xn.x,Se=pt(void 0).pipe((0,ks.Q)(f.outsideAngular),Dn(()=>u.runOutsideAngular(()=>Promise.resolve().then(M.bind(M,4802)))),(0,gt.U)(()=>(0,Ei.on)(t,u,r)),(0,gt.U)(Oe=>sD(Oe,u,_,C,S,A,b,F)),Hv({bufferSize:1,refCount:!1}));if(j(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pt(null);else{Se.pipe(ls()).subscribe();const dt=Se.pipe(Dn(ot=>ot.getRedirectResult().then(St=>St,()=>null)),zr.iC,Hv({bufferSize:1,refCount:!1})),at=Se.pipe(Dn(ot=>new An.y(St=>({unsubscribe:u.runOutsideAngular(()=>ot.onAuthStateChanged(Yt=>St.next(Yt),Yt=>St.error(Yt),()=>St.complete()))})))),kt=Se.pipe(Dn(ot=>new An.y(St=>({unsubscribe:u.runOutsideAngular(()=>ot.onIdTokenChanged(Yt=>St.next(Yt),Yt=>St.error(Yt),()=>St.complete()))}))));this.authState=dt.pipe(ip(at),(0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular)),this.user=dt.pipe(ip(kt),(0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular)),this.idToken=this.user.pipe(Dn(ot=>ot?(0,$n.D)(ot.getIdToken()):pt(null))),this.idTokenResult=this.user.pipe(Dn(ot=>ot?(0,$n.D)(ot.getIdTokenResult()):pt(null))),this.credential=(0,Uw.T)(dt,ie,this.authState.pipe(er(ot=>!ot))).pipe((0,gt.U)(ot=>(null==ot?void 0:ot.user)?ot:null),(0,So.R)(f.outsideAngular),(0,ks.Q)(f.insideAngular))}return(0,Ei.pX)(this,Se,u,{spy:{apply:(Oe,dt,at)=>{(Oe.startsWith("signIn")||Oe.startsWith("createUser"))&&at.then(kt=>ie.next(kt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ei.Dh),d.LFG(Ei.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(zr.HU),d.LFG(iD,8),d.LFG(Bg,8),d.LFG(WT,8),d.LFG(qT,8),d.LFG(zT,8),d.LFG(ZT,8),d.LFG(Jh,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function gl(n,e){return function(n,e=Km.z){return new An.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function jg(n,e){return gl(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function qy(n,e){return jg(n,e).pipe(kl(void 0),Ym(),(0,gt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(f=>({type:f.type,payload:f}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((f,_)=>{const b=o.find(S=>S.doc.ref.isEqual(f.ref)),C=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(f.ref));b&&JSON.stringify(b.doc.metadata)===JSON.stringify(f.metadata)||!b&&C&&JSON.stringify(C.metadata)===JSON.stringify(f.metadata)||u.push({type:"modified",payload:{oldIndex:_,newIndex:_,type:"modified",doc:f}})}),u}))}function KT(n,e,t){return qy(n,t).pipe(ad((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Hg(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Hg(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Hg(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function(n,e=xa.y){return n=null!=n?n:Qm,(0,Gr.e)((t,r)=>{let o,u=!0;t.subscribe(new jn.Q(r,f=>{const _=e(f);(u||!n(o,_))&&(u=!1,o=_,r.next(f))}))})}(),(0,gt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function Hg(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function aD(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lD{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qy(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(kl(void 0),Ym(),er(([r,o])=>o.length>0||!r),(0,gt.U)(([r,o])=>o),zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ad((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aD(e);return KT(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return jg(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),zr.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(zr.iC)}add(e){return this.ref.add(e)}doc(e){return new YT(this.ref.doc(e),this.afs)}}class YT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Gg(r,t);return new lD(o,u,this.afs)}snapshotChanges(){return function(n,e){return gl(n,e).pipe(kl(void 0),Ym(),(0,gt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,$n.D)(this.ref.get(e)).pipe(zr.iC)}}class oM{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qy(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),er(t=>t.length>0),zr.iC):qy(this.query,this.afs.schedulers.outsideAngular).pipe(zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ad((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=aD(e);return KT(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return jg(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),zr.iC)}get(e){return(0,$n.D)(this.query.get(e)).pipe(zr.iC)}}const QT=new d.OlP("angularfire2.enableFirestorePersistence"),ba=new d.OlP("angularfire2.firestore.persistenceSettings"),$g=new d.OlP("angularfire2.firestore.settings"),Xh=new d.OlP("angularfire2.firestore.use-emulator");function Gg(n,e=(t=>t)){return{query:e(n),ref:n}}let Tu=(()=>{class n{constructor(t,r,o,u,f,_,b,C,S,A,F,H,ie,Se,Oe,dt,at){this.schedulers=b;const kt=(0,Ei.on)(t,_,r),ot=S;A&&sD(kt,_,F,ie,Se,Oe,H,dt),[this.firestore,this.persistenceEnabled$]=(0,Ei.cc)(`${kt.name}.firestore`,"AngularFirestore",kt.name,()=>{const St=_.runOutsideAngular(()=>kt.firestore());if(u&&St.settings(u),ot&&St.useEmulator(...ot),o&&!j(f)){const Yt=()=>{try{return(0,$n.D)(St.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(yn){return"undefined"!=typeof console&&console.warn(yn),pt(!1)}};return[St,_.runOutsideAngular(Yt)]}return[St,pt(!1)]},[u,ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:f}=Gg(o,r),_=this.schedulers.ngZone.run(()=>u);return new lD(_,f,this)}collectionGroup(t,r){const o=r||(f=>f),u=this.firestore.collectionGroup(t);return new oM(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new YT(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ei.Dh),d.LFG(Ei.xv,8),d.LFG(QT,8),d.LFG($g,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(zr.HU),d.LFG(ba,8),d.LFG(Xh,8),d.LFG(oD,8),d.LFG(iD,8),d.LFG(Bg,8),d.LFG(WT,8),d.LFG(qT,8),d.LFG(zT,8),d.LFG(ZT,8),d.LFG(Jh,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aM=(()=>{class n{constructor(){dE.Z.registerVersion("angularfire",zr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:QT,useValue:!0},{provide:ba,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Tu]}),n})(),lM=(()=>{class n{constructor(t,r){this.mes=t,this.db=r,this.tokenColection=r.collection("tokens")}ngOnInit(){this.requestPermission(),this.listenNotifications()}requestPermission(){this.mes.requestToken.subscribe(t=>{console.log(t),t&&this.tokenColection.add({token:t})})}listenNotifications(){this.mes.messages.subscribe(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($v),d.Y36(Tu))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[qf],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}"]}),n})();var uM=M(1537);const JT=["addListener","removeListener"],XT=["addEventListener","removeEventListener"],eI=["on","off"];function fi(n,e,t,r){if((0,mn.m)(t)&&(r=t,t=void 0),r)return fi(n,e,t).pipe(Ho(r));const[o,u]=function(n){return(0,mn.m)(n.addEventListener)&&(0,mn.m)(n.removeEventListener)}(n)?XT.map(f=>_=>n[f](e,_,t)):function(n){return(0,mn.m)(n.addListener)&&(0,mn.m)(n.removeListener)}(n)?JT.map(zy(n,e)):function(n){return(0,mn.m)(n.on)&&(0,mn.m)(n.off)}(n)?eI.map(zy(n,e)):[];if(!o&&(0,uM.z)(n))return(0,wr.z)(f=>fi(f,e,t))((0,bo.Xf)(n));if(!o)throw new TypeError("Invalid event target");return new An.y(f=>{const _=(...b)=>f.next(1<b.length?b:b[0]);return o(_),()=>u(_)})}function zy(n,e){return t=>r=>n[t](e,r)}var Lc=M(7398);function cD(n=0,e,t=Km.P){let r=-1;return null!=e&&((0,Lc.K)(e)?t=e:r=e),new An.y(o=>{let u=function(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let f=0;return t.schedule(function(){o.closed||(o.next(f++),0<=r?this.schedule(void 0,r):o.complete())},u)})}const{isArray:hM}=Array;function fM(n){return 1===n.length&&hM(n[0])?n[0]:n}var dD=M(6921);const ml=new An.y(dD.Z);function hD(...n){const e=(0,as.jO)(n),t=fM(n);return t.length?new An.y(r=>{let o=t.map(()=>[]),u=t.map(()=>!1);r.add(()=>{o=u=null});for(let f=0;!r.closed&&f<t.length;f++)(0,bo.Xf)(t[f]).subscribe(new jn.Q(r,_=>{if(o[f].push(_),o.every(b=>b.length)){const b=o.map(C=>C.shift());r.next(e?e(...b):b),o.some((C,S)=>!C.length&&u[S])&&r.complete()}},()=>{u[f]=!0,!o[f].length&&r.complete()}));return()=>{o=u=null}}):Ms.E}function pi(n){return(0,Gr.e)((e,t)=>{(0,bo.Xf)(n).subscribe(new jn.Q(t,()=>t.complete(),dD.Z)),!t.closed&&e.subscribe(t)})}function nI(...n){const e=(0,as.jO)(n);return(0,Gr.e)((t,r)=>{const o=n.length,u=new Array(o);let f=n.map(()=>!1),_=!1;for(let b=0;b<o;b++)(0,bo.Xf)(n[b]).subscribe(new jn.Q(r,C=>{u[b]=C,!_&&!f[b]&&(f[b]=!0,(_=f.every(xa.y))&&(f=null))},dD.Z));t.subscribe(new jn.Q(r,b=>{if(_){const C=[b,...u];r.next(e?e(...C):C)}}))})}function mM(n,e){return e?t=>qi(e.pipe((0,dr.q)(1),(0,Gr.e)((n,e)=>{n.subscribe(new jn.Q(e,dD.Z))})),t.pipe(mM(n))):(0,wr.z)((t,r)=>n(t,r).pipe((0,dr.q)(1),function(n){return(0,gt.U)(()=>n)}(t)))}function _M(n,e=Km.z){const t=cD(n,e);return mM(()=>t)}let s=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),a=(()=>{class n extends s{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const l=new d.OlP("NgValueAccessor"),m={provide:l,useExisting:(0,d.Gpc)(()=>E),multi:!0},D=new d.OlP("CompositionEventMode");let E=(()=>{class n extends s{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(D,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([m]),d.qOj]}),n})();const x=new d.OlP("NgValidators"),V=new d.OlP("NgAsyncValidators");function Vc(n){return null!=n}function Bc(n){const e=(0,d.QGY)(n)?(0,$n.D)(n):n;return(0,d.CqO)(e),e}function Uc(n){let e={};return n.forEach(t=>{e=null!=t?Ct(Ct({},e),t):e}),0===Object.keys(e).length?null:e}function Zy(n,e){return e.map(t=>t(n))}function Ky(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function Wg(n){return null!=n?function(n){if(!n)return null;const e=n.filter(Vc);return 0==e.length?null:function(t){return Uc(Zy(t,e))}}(Ky(n)):null}function yM(n){return null!=n?function(n){if(!n)return null;const e=n.filter(Vc);return 0==e.length?null:function(t){return function(...n){const e=(0,as.jO)(n),{args:t,keys:r}=Df(n),o=new An.y(u=>{const{length:f}=t;if(!f)return void u.complete();const _=new Array(f);let b=f,C=f;for(let S=0;S<f;S++){let A=!1;(0,bo.Xf)(t[S]).subscribe(new jn.Q(u,F=>{A||(A=!0,C--),_[S]=F},()=>b--,void 0,()=>{(!b||!A)&&(C||u.next(r?Cf(r,_):_),u.complete())}))}});return e?o.pipe(Ho(e)):o}(Zy(t,e).map(Bc)).pipe((0,gt.U)(Uc))}}(Ky(n)):null}function ux(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vM(n){return n?Array.isArray(n)?n:[n]:[]}function rI(n,e){return Array.isArray(n)?n.includes(e):n===e}function hx(n,e){const t=vM(e);return vM(n).forEach(o=>{rI(t,o)||t.push(o)}),t}function fx(n,e){return vM(e).filter(t=>!rI(n,t))}class px{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Wg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=yM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class $s extends px{get formDirective(){return null}get path(){return null}}class ef extends px{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let bM=(()=>{class n extends class{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null==(t=this._cd)?void 0:t.submitted):!!(null==(o=null==(r=this._cd)?void 0:r.control)?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ef,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})();function pD(n,e){(function(n,e){const t=function(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ux(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ux(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();aI(e._rawValidators,o),aI(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&mx(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&mx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function aI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function uI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const gD="VALID",cI="INVALID",Qy="PENDING",mD="DISABLED";function IM(n){return(AM(n)?n.validators:n)||null}function vx(n){return Array.isArray(n)?Wg(n):n||null}function SM(n,e){return(AM(e)?e.asyncValidators:n)||null}function bx(n){return Array.isArray(n)?yM(n):n||null}function AM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class NM{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=vx(this._rawValidators),this._composedAsyncValidatorFn=bx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gD}get invalid(){return this.status===cI}get pending(){return this.status==Qy}get disabled(){return this.status===mD}get enabled(){return this.status!==mD}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=vx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=bx(e)}addValidators(e){this.setValidators(hx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(hx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fx(e,this._rawAsyncValidators))}hasValidator(e){return rI(this._rawValidators,e)}hasAsyncValidator(e){return rI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=mD,this.errors=null,this._forEachChild(r=>{r.disable(Ni(Ct({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ni(Ct({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=gD,this._forEachChild(r=>{r.enable(Ni(Ct({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ni(Ct({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gD||this.status===Qy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mD:gD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qy,this._hasOwnPendingAsyncValidator=!0;const t=Bc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof MM?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof Fk&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?mD:this.errors?cI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qy)?Qy:this._anyControlsHaveStatus(cI)?cI:gD}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){AM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dI extends NM{constructor(e=null,t,r){super(IM(t),SM(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uI(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uI(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class MM extends NM{constructor(e,t,r){super(IM(t),SM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof dI?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Fk extends NM{constructor(e,t,r){super(IM(t),SM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof dI?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Bk={provide:ef,useExisting:(0,d.Gpc)(()=>hI)},Ex=(()=>Promise.resolve(null))();let hI=(()=>{class n extends ef{constructor(t,r,o,u){super(),this.control=new dI,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===E?t=u:function(n){return Object.getPrototypeOf(n.constructor)===a}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(n,e){return[...e.path,n]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){pD(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ex.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Ex.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($s,9),d.Y36(x,10),d.Y36(V,10),d.Y36(l,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([Bk]),d.qOj,d.TTD]}),n})(),Tx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),cP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[Tx]]}),n})(),$x=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[cP]}),n})();Math,Math,Math;const vF=["*"],LF=["dialog"];function zg(n){return null!=n}function rv(n){return(n||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(n){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(n))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const oO={animation:!0,transitionTimerDelayMs:5},xL=()=>{},{transitionTimerDelayMs:OL}=oO,CD=new Map,Gs=(n,e,t,r)=>{let o=r.context||{};const u=CD.get(e);if(u)switch(r.runningTransition){case"continue":return Ms.E;case"stop":n.run(()=>u.transition$.complete()),o=Object.assign(u.context,o),CD.delete(e)}const f=t(e,r.animation,o)||xL;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>f()),pt(void 0).pipe(function(n){return e=>new An.y(t=>e.subscribe({next:f=>n.run(()=>t.next(f)),error:f=>n.run(()=>t.error(f)),complete:()=>n.run(()=>t.complete())}))}(n));const _=new xn.x,b=new xn.x,C=_.pipe(function(...n){return e=>qi(e,pt(...n))}(!0));CD.set(e,{transition$:_,complete:()=>{b.next(),b.complete()},context:o});const S=function(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const A=fi(e,"transitionend").pipe(pi(C),er(({target:H})=>H===e));(function(...n){return 1===(n=fM(n)).length?(0,bo.Xf)(n[0]):new An.y(function(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,bo.Xf)(n[r]).subscribe(new jn.Q(e,o=>{if(t){for(let u=0;u<t.length;u++)u!==r&&t[u].unsubscribe();t=null}e.next(o)})))}}(n))})(cD(S+OL).pipe(pi(C)),A,b).pipe(pi(C)).subscribe(()=>{CD.delete(e),n.run(()=>{f(),_.next(),_.complete()})})}),_.asObservable()};let vI=(()=>{class n{constructor(){this.animation=oO.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),fO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),gO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),yO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),vO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var Ai=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Ai||(Ai={})),Ai))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const wO=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function DO(n){const e=Array.from(n.querySelectorAll(wO)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let MO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr,$x]]}),n})(),eR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),OO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();class Qg{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let I2=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe((0,dr.q)(1)).subscribe(()=>{Gs(this._zone,this._el.nativeElement,(t,r)=>{r&&rv(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Gs(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,r){2&t&&(d.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),d.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class kO{close(e){}dismiss(e){}}class S2{constructor(e,t,r,o){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=o,this._closed=new xn.x,this._dismissed=new xn.x,this._hidden=new xn.x,e.instance.dismissEvent.subscribe(u=>{this.dismiss(u)}),this.result=new Promise((u,f)=>{this._resolve=u,this._reject=f}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(pi(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(pi(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():pt(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),hD(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var AD=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(AD||(AD={})),AD))();let A2=(()=>{class n{constructor(t,r,o){this._document=t,this._elRef=r,this._zone=o,this._closed$=new xn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new d.vpe,this.shown=new xn.x,this.hidden=new xn.x}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,dr.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},f=hD(Gs(this._zone,t,()=>t.classList.remove("show"),r),Gs(this._zone,this._dialogEl.nativeElement,()=>{},r));return f.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),f}_show(){const t={animation:this.animation,runningTransition:"continue"};hD(Gs(this._zone,this._elRef.nativeElement,(u,f)=>{f&&rv(u),u.classList.add("show")},t),Gs(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{fi(t,"keydown").pipe(pi(this._closed$),er(o=>o.which===Ai.Escape)).subscribe(o=>{this.keyboard?requestAnimationFrame(()=>{o.defaultPrevented||this._zone.run(()=>this.dismiss(AD.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;fi(this._dialogEl.nativeElement,"mousedown").pipe(pi(this._closed$),(0,Pn.b)(()=>r=!1),Dn(()=>fi(t,"mouseup").pipe(pi(this._closed$),(0,dr.q)(1))),er(({target:o})=>t===o)).subscribe(()=>{r=!0}),fi(t,"click").pipe(pi(this._closed$)).subscribe(({target:o})=>{t===o&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(AD.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),o=DO(t)[0];(r||o||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let o;o=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>o.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Gs(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(le),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&d.Gf(LF,7),2&t){let o;d.iGM(o=d.CRH())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),d.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),d.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:vF,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"div",0,1),d.TgZ(2,"div",2),d.Hsn(3),d.qZA(),d.qZA()),2&t&&d.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})();const N2=()=>{};let M2=(()=>{class n{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):N2}_adjustBody(t){const r=this._document.body,o=r.style.paddingRight,u=parseFloat(window.getComputedStyle(r)["padding-right"]);return r.style["padding-right"]=`${u+t}px`,()=>r.style["padding-right"]=o}_isPresent(t){const r=this._document.body.getBoundingClientRect();return window.innerWidth-(r.left+r.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const r=this._document.body;r.appendChild(t);const o=t.getBoundingClientRect().width-t.clientWidth;return r.removeChild(t),o}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(le))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R2=(()=>{class n{constructor(t,r,o,u,f,_){this._applicationRef=t,this._injector=r,this._document=o,this._scrollBar=u,this._rendererFactory=f,this._ngZone=_,this._activeWindowCmptHasChanged=new xn.x,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new d.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const b=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const o=fi(e,"focusin").pipe(pi(t),(0,gt.U)(u=>u.target));fi(e,"keydown").pipe(pi(t),er(u=>u.which===Ai.Tab),nI(o)).subscribe(([u,f])=>{const[_,b]=DO(e);(f===_||f===e)&&u.shiftKey&&(b.focus(),u.preventDefault()),f===b&&!u.shiftKey&&(_.focus(),u.preventDefault())}),r&&fi(e,"click").pipe(pi(t),nI(o),(0,gt.U)(u=>u[1])).subscribe(u=>u.focus())})})(0,b.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(b.location.nativeElement)}})}open(t,r,o,u){const f=u.container instanceof HTMLElement?u.container:zg(u.container)?this._document.querySelector(u.container):this._document.body,_=this._rendererFactory.createRenderer(null,null),b=this._scrollBar.compensate(),C=()=>{this._modalRefs.length||(_.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!f)throw new Error(`The specified modal container "${u.container||"body"}" was not found in the DOM.`);const S=new kO,A=this._getContentRef(t,u.injector||r,o,S,u);let F=!1!==u.backdrop?this._attachBackdrop(t,f):void 0,H=this._attachWindowComponent(t,f,A),ie=new S2(H,A,F,u.beforeDismiss);return this._registerModalRef(ie),this._registerWindowCmpt(H),ie.result.then(b,b),ie.result.then(C,C),S.close=Se=>{ie.close(Se)},S.dismiss=Se=>{ie.dismiss(Se)},this._applyWindowOptions(H.instance,u),1===this._modalRefs.length&&_.addClass(this._document.body,"modal-open"),F&&F.instance&&(this._applyBackdropOptions(F.instance,u),F.changeDetectorRef.detectChanges()),H.changeDetectorRef.detectChanges(),ie}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,r){let u=t.resolveComponentFactory(I2).create(this._injector);return this._applicationRef.attachView(u.hostView),r.appendChild(u.location.nativeElement),u}_attachWindowComponent(t,r,o){let f=t.resolveComponentFactory(A2).create(this._injector,o.nodes);return this._applicationRef.attachView(f.hostView),r.appendChild(f.location.nativeElement),f}_applyWindowOptions(t,r){this._windowAttributes.forEach(o=>{zg(r[o])&&(t[o]=r[o])})}_applyBackdropOptions(t,r){this._backdropAttributes.forEach(o=>{zg(r[o])&&(t[o]=r[o])})}_getContentRef(t,r,o,u,f){return o?o instanceof d.Rgc?this._createFromTemplateRef(o,u):function(n){return"string"==typeof n}(o)?this._createFromString(o):this._createFromComponent(t,r,o,u,f):new Qg([])}_createFromTemplateRef(t,r){const u=t.createEmbeddedView({$implicit:r,close(f){r.close(f)},dismiss(f){r.dismiss(f)}});return this._applicationRef.attachView(u),new Qg([u.rootNodes],u)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Qg([[r]])}_createFromComponent(t,r,o,u,f){const _=t.resolveComponentFactory(o),b=d.zs3.create({providers:[{provide:kO,useValue:u}],parent:r}),C=_.create(b),S=C.location.nativeElement;return f.scrollable&&S.classList.add("component-host-scrollable"),this._applicationRef.attachView(C.hostView),new Qg([[S]],C.hostView,C)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(o=>{o!==t&&"SCRIPT"!==o.nodeName&&(this._ariaHiddenValues.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const o=this._modalRefs.indexOf(t);o>-1&&(this._modalRefs.splice(o,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.z2F),d.LFG(d.zs3),d.LFG(le),d.LFG(M2),d.LFG(d.FYo),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x2=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(vI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O2=(()=>{class n{constructor(t,r,o,u){this._moduleCFR=t,this._injector=r,this._modalStack=o,this._config=u}open(t,r={}){const o=Ct(Ni(Ct({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._moduleCFR,this._injector,t,o)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d._Vd),d.LFG(d.zs3),d.LFG(R2),d.LFG(x2))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[O2]}),n})(),BO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),zO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),KO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),YO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),QO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),JO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),XO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})(),ek=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();new d.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let tk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cr]]}),n})();const K2=[hO,fO,gO,yO,vO,MO,OO,PO,BO,zO,KO,YO,QO,JO,XO,ek,tk];let Y2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[K2,hO,fO,gO,yO,vO,MO,OO,PO,BO,zO,KO,YO,QO,JO,XO,ek,tk]}),n})();const SI_firebaseConfig={apiKey:"AIzaSyARb3fUE70QrjRYvHyCoqw-mSYKQ1AzgOk",authDomain:"learningtogether-faae4.firebaseapp.com",projectId:"learningtogether-faae4",storageBucket:"learningtogether-faae4.appspot.com",messagingSenderId:"56880993418",appId:"1:56880993418:web:1781c04d5e16b4baa88973",measurementId:"G-XM85CRG2EV"};let ND=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-navbar"]],decls:14,vars:0,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],["rel","stylesheet","href","https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"],["data-toggle","collapse",1,"navbar","navbar-inverse","navbar-expand-sm"],[1,"container-fluid","navbar-expand-sm","collapse","navbar-collapse"],[1,"navbar-header"],[1,"navbar-brand","aling-left"],[1,"nav","navbar-nav"],["data-toggle","collapse",1,"progressier-install-buttonbtn","btn-primary","btn-block"]],template:function(t,r){1&t&&(d.TgZ(0,"html",0),d.TgZ(1,"head"),d._UZ(2,"meta",1),d._UZ(3,"meta",2),d._UZ(4,"link",3),d.qZA(),d.TgZ(5,"body"),d.TgZ(6,"nav",4),d.TgZ(7,"div",5),d.TgZ(8,"div",6),d.TgZ(9,"a",7),d._uU(10,"Learning Together"),d.qZA(),d.qZA(),d.TgZ(11,"ul",8),d.TgZ(12,"button",9),d._uU(13," Instalar "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA())},directives:[eR],styles:[".body[_ngcontent-%COMP%]{display:flex;grid-row-gap:3em;row-gap:3em;max-width:100%;height:auto;width:auto\\\t;background-color:#001c40}"]}),n})(),Q2=(()=>{class n{constructor(t,r){this.router=t,this.ar=r,this.topicid=this.ar.snapshot.params.topic}ngOnInit(){this.topicid=this.ar.snapshot.params.topic}enviar(t){console.log(this.topicid+t),this.router.navigate(["/preguntas",this.topicid,t])}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Di),d.Y36(si))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dificultad"]],decls:10,vars:0,consts:[[1,"p"],["data-toggle","collapse","type","button",1,"btn","btn-success","form-control","m-2",3,"click"],["data-toggle","collapse","type","button",1,"btn","btn-warning","form-control","m-2",3,"click"],["data-toggle","collapse","type","button",1,"btn","btn-danger","form-control","m-2",3,"click"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.TgZ(1,"div"),d.TgZ(2,"h1",0),d._uU(3,"Elije tu dificultad"),d.qZA(),d.TgZ(4,"button",1),d.NdJ("click",function(){return r.enviar("facil")}),d._uU(5," F\xe1cil "),d.qZA(),d.TgZ(6,"button",2),d.NdJ("click",function(){return r.enviar("medio")}),d._uU(7," Medio "),d.qZA(),d.TgZ(8,"button",3),d.NdJ("click",function(){return r.enviar("dificil")}),d._uU(9," Dif\xedcil "),d.qZA(),d.qZA())},directives:[ND],styles:[".p[_ngcontent-%COMP%]{text-align:center}.container[_ngcontent-%COMP%]{display:flex;background-color:brown;justify-content:center;align-items:center;width:100vw;height:100vh}"]}),n})(),J2=(()=>{class n{constructor(t){this.db=t,this.preguntasCollection=t.collection("preguntitas"),this.preguntas=this.preguntasCollection.snapshotChanges().pipe((0,gt.U)(r=>r.map(o=>{const u=o.payload.doc.data();return Object.assign({id:o.payload.doc.id},u)})))}getallpreguntas(){return this.preguntas}getpregunta(t,r){return this.preguntasCollection=this.db.collection("preguntitas",o=>o.where("dificultad","==",r).where("topic","==",t)),this.preguntas=this.preguntasCollection.snapshotChanges().pipe((0,gt.U)(o=>o.map(u=>{const f=u.payload.doc.data();return Object.assign({id:u.payload.doc.id},f)}))),this.preguntas}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Tu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function X2(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div"),d.TgZ(1,"h1"),d._uU(2),d.qZA(),d.TgZ(3,"button",3),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.revisar(o.pregunta.respuesta1,o.pregunta.correcta)}),d._uU(4),d.qZA(),d.TgZ(5,"button",3),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.revisar(o.pregunta.respuesta2,o.pregunta.correcta)}),d._uU(6),d.qZA(),d.TgZ(7,"button",3),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.revisar(o.pregunta.respuesta3,o.pregunta.correcta)}),d._uU(8),d.qZA(),d.TgZ(9,"button",3),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.revisar(o.pregunta.respuesta4,o.pregunta.correcta)}),d._uU(10),d.qZA(),d.qZA()}if(2&n){const t=d.oxw();d.xp6(2),d.Oqu(t.pregunta.pregunta),d.xp6(2),d.hij(" ",t.pregunta.respuesta1," "),d.xp6(2),d.hij(" ",t.pregunta.respuesta2," "),d.xp6(2),d.hij(" ",t.pregunta.respuesta3," "),d.xp6(2),d.hij(" ",t.pregunta.respuesta4," ")}}function eV(n,e){1&n&&(d.TgZ(0,"div",4),d.TgZ(1,"h1"),d._uU(2,"Espere mientras carga su pregunta"),d.qZA(),d._UZ(3,"img",5),d.qZA())}function tV(n,e){1&n&&d._UZ(0,"img",16)}function nV(n,e){1&n&&d._UZ(0,"img",17)}function rV(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",6),d.YNc(1,tV,1,0,"img",7),d.YNc(2,nV,1,0,"img",8),d.TgZ(3,"div",9),d.TgZ(4,"div",10),d.TgZ(5,"h5",11),d._uU(6),d.qZA(),d.TgZ(7,"p",12),d._uU(8),d.qZA(),d.TgZ(9,"a",13),d.NdJ("click",function(){return d.CHM(t),d.oxw().recargar()}),d._uU(10,"Otra pregunta"),d.qZA(),d.TgZ(11,"a",14),d._uU(12,"Escoger otro nivel"),d.qZA(),d.TgZ(13,"a",15),d._uU(14,"Escoger otro tema"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&n){const t=d.oxw();d.xp6(1),d.Q6J("ngIf",!t.incorrect),d.xp6(1),d.Q6J("ngIf",t.incorrect),d.xp6(4),d.Oqu(t.title),d.xp6(2),d.hij(" ",t.subtitle," "),d.xp6(3),d.MGl("href","/dificultad/",t.topicid,"",d.LSH)}}let iV=(()=>{class n{constructor(t,r){this.ps=t,this.ar=r,this.pregunta={correcta:"",pregunta:"",respuesta1:"",respuesta2:"",respuesta3:"",respuesta4:"",dificultad:"",topic:""},this.topicid=this.ar.snapshot.params.topic,this.dificultadid=this.ar.snapshot.params.dificultad,this.preguntas=[],this.preguntaId=null,this.contestado=!1,this.incorrect=!0,this.title="",this.subtitle=""}ngOnInit(){this.ps.getpregunta(this.topicid,this.dificultadid).subscribe(t=>{const r=Math.floor(Math.random()*t.length);this.pregunta=t[r],console.log(this.preguntaId),this.preguntaId=this.pregunta.id,console.log(this.preguntaId)})}revisar(t,r){this.contestado=!0,t==r?(this.incorrect=!1,this.title="Excelente",this.subtitle="Bien contestado"):(this.incorrect=!0,this.title="Ups respuesta incorrecta",this.subtitle="La respuesta correcta era: "+r)}recargar(){window.location.reload()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(J2),d.Y36(si))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-preguntas"]],decls:4,vars:3,consts:[[4,"ngIf"],["class","container-fluid","style","text-align: center",4,"ngIf"],["class","container-fluid",4,"ngIf"],["data-toggle","collapse","type","button",1,"btn","btn-primary","form-control","m-2",3,"click"],[1,"container-fluid",2,"text-align","center"],["src","../../../assets/loading/loading-11.gif",1,"p"],[1,"container-fluid"],["style","width: 300px; height: 300px; align-items: center;","src","../../../assets/answers/correct.png",4,"ngIf"],["style","width: 300px; height: 300px; align-items: center;","src","../../../assets/answers/incorrect.png",4,"ngIf"],[1,"card","text-center"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"href"],["href","/principal",1,"btn","btn-danger"],["src","../../../assets/answers/correct.png",2,"width","300px","height","300px","align-items","center"],["src","../../../assets/answers/incorrect.png",2,"width","300px","height","300px","align-items","center"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.YNc(1,X2,11,5,"div",0),d.YNc(2,eV,4,0,"div",1),d.YNc(3,rV,15,5,"div",2)),2&t&&(d.xp6(1),d.Q6J("ngIf",r.preguntaId&&!r.contestado),d.xp6(1),d.Q6J("ngIf",!r.preguntaId),d.xp6(1),d.Q6J("ngIf",r.preguntaId&&r.contestado))},directives:[ND,Ts],styles:["img[_ngcontent-%COMP%]{max-width:100%;height:auto;width:auto\\\t}div[_ngcontent-%COMP%]{text-align:center}a[_ngcontent-%COMP%]{margin:5px}"]}),n})();const sV=function(n){return["/dificultad",n]};function oV(n,e){if(1&n&&(d.TgZ(0,"div",1),d.TgZ(1,"button",2),d._uU(2),d.qZA(),d.qZA()),2&n){const t=e.$implicit;d.xp6(1),d.Q6J("routerLink",d.VKq(2,sV,t.id)),d.xp6(1),d.Oqu(t.nombre)}}let aV=(()=>{class n{constructor(t){this.router=t,this.temas=[{id:"1",nombre:"Pasado Simple"},{id:"2",nombre:"Pasado Continuo"},{id:"3",nombre:"Pasado Perfecto Simple"},{id:"4",nombre:"Pasado Perfecto Continuo"},{id:"5",nombre:"Condicional perfecto"}]}ngOnInit(){}selectTopic(t){}openModal(){}closeModal(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Di))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-principal"]],decls:3,vars:1,consts:[["class","p",4,"ngFor","ngForOf"],[1,"p"],["data-toggle","collapse","type","button",1,"btn","btn-danger","form-control","m-2","btn-block",3,"routerLink"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.YNc(1,oV,3,4,"div",0),d._UZ(2,"br")),2&t&&(d.xp6(1),d.Q6J("ngForOf",r.temas))},directives:[ND,Ws,Hm],styles:[".p[_ngcontent-%COMP%]{display:flex;padding:5px;justify-content:center;width:100%;height:150%}"]}),n})(),nk=(()=>{class n{constructor(t){this.afauth=t}register(t,r){var o=this;return(0,Ie.Z)(function*(){try{return yield o.afauth.createUserWithEmailAndPassword(t,r)}catch(u){return console.log("error en login: ",u),null}})()}login(t,r){var o=this;return(0,Ie.Z)(function*(){try{return yield o.afauth.signInWithEmailAndPassword(t,r)}catch(u){return console.log("error en login: ",u),null}})()}loginWithGoogle(t,r){var o=this;return(0,Ie.Z)(function*(){try{return yield o.afauth.signInWithPopup(new Gv.Z.auth.GoogleAuthProvider)}catch(u){return console.log("error en login con google: ",u),null}})()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(oD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lV=[{path:"login",component:(()=>{class n{constructor(t,r){this.authService=t,this.router=r,this.usuario={email:"",password:""}}ngOnInit(){}Ingresar(){console.log(this.usuario);const{email:t,password:r}=this.usuario;this.authService.login(t,r).then(o=>{null!=o&&this.router.navigate(["/principal"]),console.log("ingreso como: ",o)})}IngresaConGoogle(){console.log(this.usuario);const{email:t,password:r}=this.usuario;this.authService.loginWithGoogle(t,r).then(o=>{null!=o&&this.router.navigate(["/principal"]),console.log("ingreso como: ",o)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(nk),d.Y36(Di))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:21,vars:3,consts:[[1,"container","login"],[1,"card","text-center","ancho"],[1,"card-header"],[1,"card-body","p-4"],[2,"float","left"],["type","email","placeholder","Ingresa correo electronico",1,"form-control","m-2",3,"ngModel","ngModelChange"],["type","password","placeholder","Ingresa contrase\xf1a",1,"form-control","m-2",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"btn","btn-info","btn-block",3,"click"],["href","/register"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.TgZ(1,"div",0),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"b"),d._uU(5,"LOGIN"),d.qZA(),d.qZA(),d.TgZ(6,"div",3),d.TgZ(7,"label",4),d._uU(8," Correo electronico"),d.qZA(),d.TgZ(9,"input",5),d.NdJ("ngModelChange",function(u){return r.usuario.email=u}),d.qZA(),d.TgZ(10,"label",4),d._uU(11," Contrase\xf1a"),d.qZA(),d.TgZ(12,"input",6),d.NdJ("ngModelChange",function(u){return r.usuario.password=u}),d.qZA(),d.TgZ(13,"button",7),d.NdJ("click",function(){return r.Ingresar()}),d._uU(14," Ingresar "),d.qZA(),d.TgZ(15,"button",8),d.NdJ("click",function(){return r.IngresaConGoogle()}),d._uU(16," Ingresar con google "),d.qZA(),d.TgZ(17,"label"),d._uU(18," Aun no tienes cuenta? "),d.TgZ(19,"a",9),d._uU(20," Registrate aqu\xed"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(9),d.Q6J("ngModel",r.usuario.email),d.xp6(3),d.Q6J("ngModel",r.usuario.password),d.xp6(1),d.Q6J("disabled",!r.usuario.email||!r.usuario.password))},directives:[ND,E,bM,hI],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100vw;height:100vh}.body[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-row-gap:3em;row-gap:3em;height:200%;align-items:center;background-color:#001c40}.login[_ngcontent-%COMP%]{width:100%;max-width:330px;text-align:center;color:#fff;border-radius:30px;height:100%}.ancho[_ngcontent-%COMP%]{width:100%;height:150%;background:#39CCD5;color:#424242;border-radius:20px}.ancho1[_ngcontent-%COMP%]{width:100%;height:150%;background:#39CCD5;color:#fff;border-radius:20px}.fondo[_ngcontent-%COMP%]{background-color:#001c40;width:100%;height:200%}.tam[_ngcontent-%COMP%]{min-width:100%;min-height:100%;width:auto;height:auto;position:fixed;top:50%;left:50%;background-size:cover}"]}),n})()},{path:"register",component:(()=>{class n{constructor(t){this.authService=t,this.usuario={nombre:"",email:"",password:""}}ngOnInit(){}Ingresar(){console.log(this.usuario);const{email:t,password:r}=this.usuario;this.authService.register(t,r).then(o=>{console.log("Se registro: ",o)})}IngresaConGoogle(){console.log(this.usuario);const{email:t,password:r}=this.usuario;this.authService.loginWithGoogle(t,r).then(o=>{console.log("Se registro: ",o)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(nk))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],decls:24,vars:3,consts:[[1,"container","login"],[1,"card","text-center","ancho"],[1,"card-header"],[1,"p-4"],[2,"float","left"],["type","email","placeholder","Ingresa tu nombre",1,"form-control","m-2",3,"ngModel","ngModelChange"],["type","email","placeholder","Ingresa correo electronico",1,"form-control","m-2",3,"ngModel","ngModelChange"],["type","password","placeholder","Ingresa contrase\xf1a",1,"form-control","m-2",3,"ngModel","ngModelChange"],["href","/login",1,"btn","btn-primary","btn-block",3,"click"],[1,"btn","btn-info","btn-block",3,"click"],["href","/login"]],template:function(t,r){1&t&&(d._UZ(0,"app-navbar"),d.TgZ(1,"div",0),d.TgZ(2,"div",1),d.TgZ(3,"div",2),d.TgZ(4,"b"),d._uU(5,"REGISTRO"),d.qZA(),d.qZA(),d.TgZ(6,"div",3),d.TgZ(7,"label",4),d._uU(8," Nombre"),d.qZA(),d.TgZ(9,"input",5),d.NdJ("ngModelChange",function(u){return r.usuario.nombre=u}),d.qZA(),d.TgZ(10,"label",4),d._uU(11," Correo electronico"),d.qZA(),d.TgZ(12,"input",6),d.NdJ("ngModelChange",function(u){return r.usuario.email=u}),d.qZA(),d.TgZ(13,"label",4),d._uU(14," Contrase\xf1a"),d.qZA(),d.TgZ(15,"input",7),d.NdJ("ngModelChange",function(u){return r.usuario.password=u}),d.qZA(),d.TgZ(16,"button",8),d.NdJ("click",function(){return r.Ingresar()}),d._uU(17," Registro "),d.qZA(),d.TgZ(18,"button",9),d.NdJ("click",function(){return r.IngresaConGoogle()}),d._uU(19," Registrar con google "),d.qZA(),d.TgZ(20,"label"),d._uU(21," Ya tienes cuenta? "),d.TgZ(22,"a",10),d._uU(23," Ingresa aqu\xed"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(9),d.Q6J("ngModel",r.usuario.nombre),d.xp6(3),d.Q6J("ngModel",r.usuario.email),d.xp6(3),d.Q6J("ngModel",r.usuario.password))},directives:[ND,E,bM,hI],styles:[".body[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-row-gap:3em;row-gap:3em;height:200%;align-items:center;background-color:#001c40}.login[_ngcontent-%COMP%]{width:100%;max-width:330px;text-align:center;color:#fff;border-radius:30px;height:100%}.ancho[_ngcontent-%COMP%]{width:100%;height:150%;background:#39CCD5;color:#424242;border-radius:20px}.ancho1[_ngcontent-%COMP%]{width:100%;height:150%;background:#39CCD5;color:#fff;border-radius:20px}.fondo[_ngcontent-%COMP%]{background-color:#001c40;width:100%;height:200%}.tam[_ngcontent-%COMP%]{min-width:100%;min-height:100%;width:auto;height:auto;position:fixed;top:50%;left:50%;background-size:cover}"]}),n})()},{path:"principal",component:aV},{path:"preguntas/:topic/:dificultad",component:iV},{path:"dificultad/:topic",component:Q2},{path:"**",redirectTo:"/login",pathMatch:"full"}];let uV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[kd.forRoot(lV)],kd]}),n})();const hV={connector:()=>new xn.x};function rk(n,e=hV){const{connector:t}=e;return(0,Gr.e)((r,o)=>{const u=t();(0,$n.D)(n(function(n){return new An.y(e=>n.subscribe(e))}(u))).subscribe(o),o.add(r.subscribe(u))})}const MD="Service workers are disabled or not supported by this browser";class AI{constructor(e){if(this.serviceWorker=e,e){const r=fi(e,"controllerchange").pipe((0,gt.U)(()=>e.controller)),u=qi(If(()=>pt(e.controller)),r);this.worker=u.pipe(er(S=>!!S)),this.registration=this.worker.pipe(Dn(()=>e.getRegistration()));const C=fi(e,"message").pipe((0,gt.U)(S=>S.data)).pipe(er(S=>S&&S.type)).pipe(function(n){return n?e=>rk(n)(e):e=>function(n,e){const t=(0,mn.m)(n)?n:()=>n;return(0,mn.m)(e)?rk(e,{connector:t}):r=>new ym(r,t)}(new xn.x)(e)}());C.connect(),this.events=C}else this.worker=this.events=this.registration=function(n){return If(()=>function(n,e){const t=(0,mn.m)(n)?n:()=>n;return new An.y(o=>o.error(t()))}(new Error(n)))}(MD)}postMessage(e,t){return this.worker.pipe((0,dr.q)(1),(0,Pn.b)(r=>{r.postMessage(Ct({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const o=this.waitForOperationCompleted(r),u=this.postMessage(e,t);return Promise.all([u,o]).then(([,f])=>f)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(er(t))}nextEventOfType(e){return this.eventsOfType(e).pipe((0,dr.q)(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(er(t=>t.nonce===e),(0,dr.q)(1),(0,gt.U)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let mV=(()=>{class n{constructor(t){if(this.sw=t,this.subscriptionChanges=new xn.x,!t.isEnabled)return this.messages=ml,this.notificationClicks=ml,void(this.subscription=ml);this.messages=this.sw.eventsOfType("PUSH").pipe((0,gt.U)(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,gt.U)(o=>o.data)),this.pushManager=this.sw.registration.pipe((0,gt.U)(o=>o.pushManager));const r=this.pushManager.pipe(Dn(o=>o.getSubscription()));this.subscription=(0,Uw.T)(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(t){if(!this.sw.isEnabled)return Promise.reject(new Error(MD));const r={userVisibleOnly:!0};let o=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),u=new Uint8Array(new ArrayBuffer(o.length));for(let f=0;f<o.length;f++)u[f]=o.charCodeAt(f);return r.applicationServerKey=u,this.pushManager.pipe(Dn(f=>f.subscribe(r)),(0,dr.q)(1)).toPromise().then(f=>(this.subscriptionChanges.next(f),f))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,dr.q)(1),Dn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(MD))}decodeBase64(t){return atob(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(AI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_V=(()=>{class n{constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=ml,this.available=ml,this.activated=ml,void(this.unrecoverable=ml);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY"]),this.available=this.versionUpdates.pipe(er(r=>"VERSION_READY"===r.type),(0,gt.U)(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(MD));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(MD));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(AI))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class iR{}const ik=new d.OlP("NGSW_REGISTER_SCRIPT");function yV(n,e,t,r){return()=>{if(!k(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;let u;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof t.registrationStrategy)u=t.registrationStrategy();else{const[_,...b]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(_){case"registerImmediately":u=pt(null);break;case"registerWithDelay":u=sk(+b[0]||0);break;case"registerWhenStable":u=b[0]?(0,Uw.T)(ok(n),sk(+b[0])):ok(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}n.get(d.R0b).runOutsideAngular(()=>u.pipe((0,dr.q)(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(_=>console.error("Service worker registration failed with:",_))))}}function sk(n){return pt(null).pipe(_M(n))}function ok(n){return n.get(d.z2F).isStable.pipe(er(t=>t))}function vV(n,e){return new AI(k(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}let ak=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[{provide:ik,useValue:t},{provide:iR,useValue:r},{provide:AI,useFactory:vV,deps:[iR,d.Lbi]},{provide:d.ip1,useFactory:yV,deps:[d.zs3,ik,iR,d.Lbi],multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[mV,_V]}),n})(),bV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[lM]}),n.\u0275inj=d.cJS({providers:[],imports:[[_f,kd,uV,Y2,$x,Ht,aM,Ei.hO.initializeApp(SI_firebaseConfig),ak.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"}),ak.register("firebase-messaging-sw.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]]}),n})();(0,d.G48)(),Hu().bootstrapModule(bV).catch(n=>console.error(n))},9162:(et,De,M)=>{"use strict";function fe(O,L,q,Y){return new(q||(q=Promise))(function(Q,je){function yt(ut){try{He(Y.next(ut))}catch(nt){je(nt)}}function Zt(ut){try{He(Y.throw(ut))}catch(nt){je(nt)}}function He(ut){ut.done?Q(ut.value):function(Q){return Q instanceof q?Q:new q(function(je){je(Q)})}(ut.value).then(yt,Zt)}He((Y=Y.apply(O,L||[])).next())})}function ae(O){return this instanceof ae?(this.v=O,this):new ae(O)}function ee(O,L,q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,Y=q.apply(O,L||[]),Q=[];return se={},je("next"),je("throw"),je("return"),se[Symbol.asyncIterator]=function(){return this},se;function je(Vt){Y[Vt]&&(se[Vt]=function(kn){return new Promise(function(qn,Jt){Q.push([Vt,kn,qn,Jt])>1||yt(Vt,kn)})})}function yt(Vt,kn){try{!function(Vt){Vt.value instanceof ae?Promise.resolve(Vt.value.v).then(He,ut):nt(Q[0][2],Vt)}(Y[Vt](kn))}catch(qn){nt(Q[0][3],qn)}}function He(Vt){yt("next",Vt)}function ut(Vt){yt("throw",Vt)}function nt(Vt,kn){Vt(kn),Q.shift(),Q.length&&yt(Q[0][0],Q[0][1])}}function Ae(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var q,L=O[Symbol.asyncIterator];return L?L.call(O):(O=function(O){var L="function"==typeof Symbol&&Symbol.iterator,q=L&&O[L],Y=0;if(q)return q.call(O);if(O&&"number"==typeof O.length)return{next:function(){return O&&Y>=O.length&&(O=void 0),{value:O&&O[Y++],done:!O}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")}(O),q={},Y("next"),Y("throw"),Y("return"),q[Symbol.asyncIterator]=function(){return this},q);function Y(Q){q[Q]=O[Q]&&function(je){return new Promise(function(yt,Zt){!function(Q,je,yt,Zt){Promise.resolve(Zt).then(function(He){Q({value:He,done:yt})},je)}(yt,Zt,(je=O[Q](je)).done,je.value)})}}}M.d(De,{mG:()=>fe,qq:()=>ae,FC:()=>ee,KL:()=>Ae})},4762:(et,De,M)=>{"use strict";function ve(O,L){var q={};for(var Y in O)Object.prototype.hasOwnProperty.call(O,Y)&&L.indexOf(Y)<0&&(q[Y]=O[Y]);if(null!=O&&"function"==typeof Object.getOwnPropertySymbols){var se=0;for(Y=Object.getOwnPropertySymbols(O);se<Y.length;se++)L.indexOf(Y[se])<0&&Object.prototype.propertyIsEnumerable.call(O,Y[se])&&(q[Y[se]]=O[Y[se]])}return q}function fe(O,L,q,Y){return new(q||(q=Promise))(function(Q,je){function yt(ut){try{He(Y.next(ut))}catch(nt){je(nt)}}function Zt(ut){try{He(Y.throw(ut))}catch(nt){je(nt)}}function He(ut){ut.done?Q(ut.value):function(Q){return Q instanceof q?Q:new q(function(je){je(Q)})}(ut.value).then(yt,Zt)}He((Y=Y.apply(O,L||[])).next())})}M.d(De,{_T:()=>ve,mG:()=>fe})},3668:(et,De,M)=>{"use strict";M.d(De,{deG:()=>ym,tb:()=>HC,AFp:()=>jC,ip1:()=>dy,CZH:()=>jh,hGG:()=>hN,z2F:()=>yg,sBO:()=>aT,Sil:()=>mw,_Vd:()=>Bs,EJc:()=>gy,SBq:()=>Xi,qLn:()=>qa,vpe:()=>vs,tBr:()=>Ba,XFs:()=>lt,OlP:()=>Xn,zs3:()=>_n,ZZ4:()=>Iy,aQg:()=>Sg,soG:()=>py,YKP:()=>Mc,h0i:()=>lo,PXZ:()=>pr,R0b:()=>js,FiY:()=>Rs,Lbi:()=>fy,g9A:()=>hy,Qsj:()=>rC,FYo:()=>H_,JOm:()=>Ki,Tiy:()=>Jp,q3G:()=>tr,tp0:()=>wi,Rgc:()=>ig,dDg:()=>bw,q4F:()=>Mh,GfV:()=>Nh,s_b:()=>Ph,ifc:()=>Qe,eFA:()=>ZA,G48:()=>rr,Gpc:()=>W,X6Q:()=>Ew,_c5:()=>yT,VLi:()=>pn,c2e:()=>cw,zSh:()=>Ya,wAp:()=>Nt,vHH:()=>Ye,EiD:()=>Qo,mCW:()=>To,qzn:()=>Yo,JVY:()=>Gl,pB0:()=>Vf,eBb:()=>wd,L6k:()=>Mm,LAX:()=>Lf,cg1:()=>ph,Tjo:()=>bu,kL8:()=>sb,yhl:()=>Nm,dqk:()=>Xt,sIi:()=>Ps,CqO:()=>io,QGY:()=>mt,F4k:()=>au,RDi:()=>rt,AaK:()=>fe,z3N:()=>si,qOj:()=>T0,TTD:()=>xi,_Bn:()=>ll,xp6:()=>Km,uIk:()=>Xd,Tol:()=>I_,ekj:()=>ch,Suo:()=>DC,Xpm:()=>dn,lG2:()=>Ds,Yz7:()=>Jt,cJS:()=>It,oAB:()=>Mi,Yjl:()=>Ri,Y36:()=>Ar,_UZ:()=>Cc,qZA:()=>Er,TgZ:()=>ca,EpF:()=>B0,n5z:()=>_m,Ikx:()=>M_,SDv:()=>L_,QtT:()=>bb,pQV:()=>V_,LFG:()=>On,$8M:()=>Tf,$Z:()=>Ec,NdJ:()=>Tc,CRH:()=>J_,oxw:()=>T_,Hsn:()=>H0,F$t:()=>j0,Q6J:()=>V0,s9C:()=>oh,MGl:()=>lu,VKq:()=>Qr,WLB:()=>hC,kEZ:()=>fC,iGM:()=>wC,MAs:()=>r1,CHM:()=>Bo,LSH:()=>$a,Udp:()=>uh,YNc:()=>O0,W1O:()=>ty,_uU:()=>uu,Oqu:()=>A_,hij:()=>il,Gf:()=>Q_});var d=M(273),ne=M(7908),P=M(8305),ve=M(3719),ue=M(3174);function be(i){for(let s in i)if(i[s]===be)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function fe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(fe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const G=be({__forward_ref__:be});function W(i){return i.__forward_ref__=W,i.toString=function(){return fe(this())},i}function te(i){return Ge(i)?i():i}function Ge(i){return"function"==typeof i&&i.hasOwnProperty(G)&&i.__forward_ref__===W}class Ye extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function ee(i){return"string"==typeof i?i:null==i?"":String(i)}function ye(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ee(i)}function xe(i,s){const a=s?` in ${s}`:"";throw new Ye("201",`No provider for ${ye(i)} found${a}`)}function nt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}function Jt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function It(i){return{providers:i.providers||[],imports:i.imports||[]}}function Vn(i){return Ir(i,Br)||Ir(i,mr)}function Ir(i,s){return i.hasOwnProperty(s)?i[s]:null}function ei(i){return i&&(i.hasOwnProperty(Ur)||i.hasOwnProperty(jr))?i[Ur]:null}const Br=be({\u0275prov:be}),Ur=be({\u0275inj:be}),mr=be({ngInjectableDef:be}),jr=be({ngInjectorDef:be});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let gn;function ar(i){const s=gn;return gn=i,s}function Dt(i,s,a){const l=Vn(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&lt.Optional?null:void 0!==s?s:void xe(fe(i),"Injector")}function Kt(i){return{toString:i}.toString()}var jt=(()=>((jt=jt||{})[jt.OnPush=0]="OnPush",jt[jt.Default=1]="Default",jt))(),Qe=(()=>{return(i=Qe||(Qe={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Qe;var i})();const vt="undefined"!=typeof globalThis&&globalThis,Sr="undefined"!=typeof window&&window,ti="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Xt=vt||"undefined"!=typeof global&&global||Sr||ti,z={},U=[],Z=be({\u0275cmp:be}),Ne=be({\u0275dir:be}),oe=be({\u0275pipe:be}),it=be({\u0275mod:be}),ft=be({\u0275fac:be}),zt=be({__NG_ELEMENT_ID__:be});let Rn=0;function dn(i){return Kt(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===jt.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||U,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Qe.Emulated,id:"c",styles:i.styles||U,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,h=i.features,m=i.pipes;return l.id+=Rn++,l.inputs=Hi(i.inputs,a),l.outputs=Hi(i.outputs),h&&h.forEach(y=>y(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(Pt):null,l.pipeDefs=m?()=>("function"==typeof m?m():m).map(Cn):null,l})}function Pt(i){return Tn(i)||function(i){return i[Ne]||null}(i)}function Cn(i){return function(i){return i[oe]||null}(i)}const lr={};function Mi(i){return Kt(()=>{const s={type:i.type,bootstrap:i.bootstrap||U,declarations:i.declarations||U,imports:i.imports||U,exports:i.exports||U,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(lr[i.id]=i.type),s})}function Hi(i,s){if(null==i)return z;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),a[c]=l,s&&(s[c]=h)}return a}const Ds=dn;function Ri(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Tn(i){return i[Z]||null}function ln(i,s){const a=i[it]||null;if(!a&&!0===s)throw new Error(`Type ${fe(i)} does not have '\u0275mod' property.`);return a}function _i(i){return Array.isArray(i)&&"object"==typeof i[1]}function $i(i){return Array.isArray(i)&&!0===i[1]}function Tl(i){return 0!=(8&i.flags)}function Ca(i){return 2==(2&i.flags)}function Lo(i){return 1==(1&i.flags)}function Gi(i){return null!==i.template}function go(i){return 0!=(512&i[2])}function br(i,s){return i.hasOwnProperty(ft)?i[ft]:null}class Sa{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function xi(){return Zc}function Zc(i){return i.type.prototype.ngOnChanges&&(i.setInput=cr),av}function av(){const i=Aa(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===z)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function cr(i,s,a,l){const c=Aa(i)||function(i,s){return i[ku]=s}(i,{previous:z,current:null}),h=c.current||(c.current={}),m=c.previous,y=this.declaredInputs[a],D=m[y];h[y]=new Sa(D&&D.currentValue,s,m===z),i[l]=s}xi.ngInherit=!0;const ku="__ngSimpleChanges__";function Aa(i){return i[ku]||null}let We;function rt(i){We=i}function Rt(){return void 0!==We?We:"undefined"!=typeof document?document:void 0}function Tt(i){return!!i.listen}const wn={createRenderer:(i,s)=>Rt()};function an(i){for(;Array.isArray(i);)i=i[0];return i}function _o(i,s){return an(s[i])}function Kn(i,s){return an(s[i.index])}function Wi(i,s){return i.data[s]}function yi(i,s){const a=s[i];return _i(a)?a:a[0]}function Pu(i){return 4==(4&i[2])}function Fu(i){return 128==(128&i[2])}function Zs(i,s){return null==s?null:i[s]}function lv(i){i[18]=0}function Kc(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const Mt={lFrame:nd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function am(){return Mt.bindingsEnabled}function Pe(){return Mt.lFrame.lView}function un(){return Mt.lFrame.tView}function Bo(i){return Mt.lFrame.contextLView=i,i[8]}function Yn(){let i=Sl();for(;null!==i&&64===i.type;)i=i.parent;return i}function Sl(){return Mt.lFrame.currentTNode}function Al(){const i=Mt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}function ri(i,s){const a=Mt.lFrame;a.currentTNode=i,a.isParent=s}function Qc(){return Mt.lFrame.isParent}function Na(){Mt.lFrame.isParent=!1}function Ma(){return Mt.isInCheckNoChangesMode}function Jc(i){Mt.isInCheckNoChangesMode=i}function vi(){const i=Mt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Ns(){return Mt.lFrame.bindingIndex++}function Ks(i){const s=Mt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Xc(i){Mt.lFrame.inI18n=i}function Vu(i,s){const a=Mt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Nl(s)}function Nl(i){Mt.lFrame.currentDirectiveIndex=i}function ed(){return Mt.lFrame.currentQueryIndex}function hf(i){Mt.lFrame.currentQueryIndex=i}function ff(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function td(i,s,a){if(a&lt.SkipSelf){let c=s,h=i;for(;!(c=c.parent,null!==c||a&lt.Host||(c=ff(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;s=c,i=h}const l=Mt.lFrame=pf();return l.currentTNode=s,l.lView=i,!0}function Bu(i){const s=pf(),a=i[1];Mt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function pf(){const i=Mt.lFrame,s=null===i?null:i.child;return null===s?nd(i):s}function nd(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function hm(){const i=Mt.lFrame;return Mt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ml=hm;function Uu(){const i=hm();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function bi(){return Mt.lFrame.selectedIndex}function Uo(i){Mt.lFrame.selectedIndex=i}function Qn(){const i=Mt.lFrame;return Wi(i.tView,i.selectedIndex)}function gf(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:y,ngAfterViewInit:D,ngAfterViewChecked:E,ngOnDestroy:T}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),y&&((i.contentHooks||(i.contentHooks=[])).push(a,y),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,y)),D&&(i.viewHooks||(i.viewHooks=[])).push(-a,D),E&&((i.viewHooks||(i.viewHooks=[])).push(a,E),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,E)),null!=T&&(i.destroyHooks||(i.destroyHooks=[])).push(a,T)}}function Rl(i,s,a){dv(i,s,3,a)}function Ys(i,s,a,l){(3&i[2])===a&&dv(i,s,a,l)}function ju(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function dv(i,s,a,l){const h=null!=l?l:-1,m=s.length-1;let y=0;for(let D=void 0!==l?65535&i[18]:0;D<m;D++)if("number"==typeof s[D+1]){if(y=s[D],null!=l&&y>=l)break}else s[D]<0&&(i[18]+=65536),(y<h||-1==h)&&(UD(i,a,s,D),i[18]=(4294901760&i[18])+D+2),D++}function UD(i,s,a,l){const c=a[l]<0,h=a[l+1],y=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(y)}finally{}}}else try{h.call(y)}finally{}}class Hu{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function yf(i,s,a){const l=Tt(i);let c=0;for(;c<a.length;){const h=a[c];if("number"==typeof h){if(0!==h)break;c++;const m=a[c++],y=a[c++],D=a[c++];l?i.setAttribute(s,y,D,m):s.setAttributeNS(m,y,D)}else{const m=h,y=a[++c];id(m)?l&&i.setProperty(s,m,y):l?i.setAttribute(s,m,y):s.setAttribute(m,y),c++}}return c}function $u(i){return 3===i||4===i||6===i}function id(i){return 64===i.charCodeAt(0)}function os(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||fv(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function fv(i,s,a,l,c){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const y=i[h++];if("number"==typeof y){if(y===s){m=-1;break}if(y>s){m=h-1;break}}}for(;h<i.length;){const y=i[h];if("number"==typeof y)break;if(y===a){if(null===l)return void(null!==c&&(i[h+1]=c));if(l===i[h+1])return void(i[h+2]=c)}h++,null!==l&&h++,null!==c&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==l&&i.splice(h++,0,l),null!==c&&i.splice(h++,0,c)}function pv(i){return-1!==i}function yo(i){return 32767&i}function Jn(i,s){let a=function(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let vf=!0;function Gu(i){const s=vf;return vf=i,s}let $D=0;function as(i,s){const a=xn(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,pt(l.data,i),pt(s,null),pt(l.blueprint,null));const c=Un(i,s),h=i.injectorIndex;if(pv(c)){const m=yo(c),y=Jn(c,s),D=y[1].data;for(let E=0;E<8;E++)s[h+E]=y[m+E]|D[m+E]}return s[h+8]=c,h}function pt(i,s){i.push(0,0,0,0,0,0,0,0,s)}function xn(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Un(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const h=c[1],m=h.type;if(l=2===m?h.declTNode:1===m?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function An(i,s,a){!function(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(zt)&&(l=a[zt]),null==l&&(l=a[zt]=$D++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function sd(i,s,a){if(a&lt.Optional)return i;xe(s,"NodeInjector")}function wf(i,s,a,l){if(a&lt.Optional&&void 0===l&&(l=null),0==(a&(lt.Self|lt.Host))){const c=i[9],h=ar(void 0);try{return c?c.get(s,l,a&lt.Optional):Dt(s,l,a&lt.Optional)}finally{ar(h)}}return sd(l,s,a)}function od(i,s,a,l=lt.Default,c){if(null!==i){const h=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(zt)?i[zt]:void 0;return"number"==typeof s?s>=0?255&s:Ef:s}(a);if("function"==typeof h){if(!td(s,i,l))return l&lt.Host?sd(c,a,l):wf(s,a,l,c);try{const m=h(l);if(null!=m||l&lt.Optional)return m;xe(a)}finally{Ml()}}else if("number"==typeof h){let m=null,y=xn(i,s),D=-1,E=l&lt.Host?s[16][6]:null;for((-1===y||l&lt.SkipSelf)&&(D=-1===y?Un(i,s):s[y+8],-1!==D&&Cf(l,!1)?(m=s[1],y=yo(D),s=Jn(D,s)):y=-1);-1!==y;){const T=s[1];if(Ho(h,y,T.data)){const N=xa(y,s,a,m,l,E);if(N!==Df)return N}D=s[y+8],-1!==D&&Cf(l,s[1].data[y+8]===E)&&Ho(h,y,s)?(m=T,y=yo(D),s=Jn(D,s)):y=-1}}}return wf(s,a,l,c)}const Df={};function Ef(){return new jn(Yn(),Pe())}function xa(i,s,a,l,c,h){const m=s[1],y=m.data[i+8],T=gt(y,m,a,null==l?Ca(y)&&vf:l!=m&&0!=(3&y.type),c&lt.Host&&h===y);return null!==T?Wu(s,m,T,y):Df}function gt(i,s,a,l,c){const h=i.providerIndexes,m=s.data,y=1048575&h,D=i.directiveStart,T=h>>20,x=c?y+T:i.directiveEnd;for(let V=l?y:y+T;V<x;V++){const J=m[V];if(V<D&&a===J||V>=D&&J.type===a)return V}if(c){const V=m[D];if(V&&Gi(V)&&V.type===a)return D}return null}function Wu(i,s,a,l){let c=i[a];const h=s.data;if(function(i){return i instanceof Hu}(c)){const m=c;m.resolving&&function(i,s){throw new Ye("200",`Circular dependency in DI detected for ${i}`)}(ye(h[a]));const y=Gu(m.canSeeViewProviders);m.resolving=!0;const D=m.injectImpl?ar(m.injectImpl):null;td(i,l,lt.Default);try{c=i[a]=m.factory(void 0,h,i,l),s.firstCreatePass&&a>=l.directiveStart&&function(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:h}=s.type.prototype;if(l){const m=Zc(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==D&&ar(D),Gu(y),m.resolving=!1,Ml()}}return c}function Ho(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Cf(i,s){return!(i&lt.Self||i&lt.Host&&s)}class jn{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return od(this._tNode,this._lView,s,l,a)}}function _m(i){return Kt(()=>{const s=i.prototype.constructor,a=s[ft]||Oa(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const h=c[ft]||Oa(c);if(h&&h!==a)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Oa(i){return Ge(i)?()=>{const s=Oa(te(i));return s&&s()}:br(i)}function Tf(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const h=a[c];if($u(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(h===s)return a[c+1];c+=2}}}return null}(Yn(),i)}const ka="__parameters__";function qi(i,s,a){return Kt(()=>{const l=function(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...h){if(this instanceof c)return l.apply(this,h),this;const m=new c(...h);return y.annotation=m,y;function y(D,E,T){const N=D.hasOwnProperty(ka)?D[ka]:Object.defineProperty(D,ka,{value:[]})[ka];for(;N.length<=T;)N.push(null);return(N[T]=N[T]||[]).push(m),D}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Xn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Jt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ym=new Xn("AnalyzeForEntryComponents");function ii(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),ii(l,s)):s!==i&&s.push(l)}return s}function Qs(i,s){i.forEach(a=>Array.isArray(a)?Qs(a,s):s(a))}function ls(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Pn(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Oi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}function Zi(i,s,a){let l=Wo(i,s);return l>=0?i[1|l]=a:(l=~l,function(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Mf(i,s){const a=Wo(i,s);if(a>=0)return i[1|a]}function Wo(i,s){return function(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const h=l+(c-l>>1),m=i[h<<a];if(s===m)return h<<a;m>s?c=h:l=h+1}return~(c<<a)}(i,s,1)}const qo={},Zu="__NG_DI_FLAG__",La="ngTempTokenPath",bv=/\n/gm,Ll="__source",cd=be({provide:String,useValue:be});let Vl;function Va(i){const s=Vl;return Vl=i,s}function Wr(i,s=lt.Default){if(void 0===Vl)throw new Error("inject() must be called from an injection context");return null===Vl?Dt(i,void 0,s):Vl.get(i,s&lt.Optional?null:void 0,s)}function On(i,s=lt.Default){return(gn||Wr)(te(i),s)}function Xs(i){const s=[];for(let a=0;a<i.length;a++){const l=te(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Error("Arguments array must have arguments.");let c,h=lt.Default;for(let m=0;m<l.length;m++){const y=l[m],D=Of(y);"number"==typeof D?-1===D?c=y.token:h|=D:c=y}s.push(On(c,h))}else s.push(On(l))}return s}function Do(i,s){return i[Zu]=s,i.prototype[Zu]=s,i}function Of(i){return i[Zu]}function hd(i,s,a,l){const c=i[La];throw s[Ll]&&c.unshift(s[Ll]),i.message=function(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=fe(s);if(Array.isArray(s))c=s.map(fe).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let y=s[m];h.push(m+":"+("string"==typeof y?JSON.stringify(y):fe(y)))}c=`{${h.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(bv,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[La]=null,i}const Ba=Do(qi("Inject",i=>({token:i})),-1),Rs=Do(qi("Optional"),8),wi=Do(qi("SkipSelf"),4);let md;function jl(i){var s;return(null==(s=function(){if(void 0===md&&(md=null,Xt.trustedTypes))try{md=Xt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return md}())?void 0:s.createHTML(i))||i}class Eo{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Co extends Eo{getTypeName(){return"HTML"}}class $l extends Eo{getTypeName(){return"Style"}}class bd extends Eo{getTypeName(){return"Script"}}class Am extends Eo{getTypeName(){return"URL"}}class Ff extends Eo{getTypeName(){return"ResourceURL"}}function si(i){return i instanceof Eo?i.changingThisBreaksApplicationSecurity:i}function Yo(i,s){const a=Nm(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function Nm(i){return i instanceof Eo&&i.getTypeName()||null}function Gl(i){return new Co(i)}function Mm(i){return new $l(i)}function wd(i){return new bd(i)}function Lf(i){return new Am(i)}function Vf(i){return new Ff(i)}function Dd(i){const s=new Ed(i);return function(){try{return!!(new window.DOMParser).parseFromString(jl(""),"text/html")}catch(i){return!1}}()?new Cv(s):s}class Cv{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(jl(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Ed{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=jl(s),a;const l=this.inertDocument.createElement("body");return l.innerHTML=jl(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(s){const a=s.attributes;for(let c=a.length-1;0<c;c--){const m=a.item(c).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let l=s.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Tv=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Wl=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function To(i){return(i=String(i)).match(Tv)||i.match(Wl)?i:"unsafe:"+i}function ql(i){return(i=String(i)).split(",").map(s=>To(s.trim())).join(", ")}function xs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function zl(...i){const s={};for(const a of i)for(const l in a)a.hasOwnProperty(l)&&(s[l]=!0);return s}const Cd=xs("area,br,col,hr,img,wbr"),Td=xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Rm=xs("rp,rt"),Zl=zl(Cd,zl(Td,xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zl(Rm,xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),zl(Rm,Td)),Bf=xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yu=xs("srcset"),jf=zl(Bf,Yu,xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Av=xs("script,style,template");class Hf{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let c=this.checkClobberedElement(a,a.nextSibling);if(c){a=c;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!Zl.hasOwnProperty(a))return this.sanitizedSomething=!0,!Av.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=s.attributes;for(let c=0;c<l.length;c++){const h=l.item(c),m=h.name,y=m.toLowerCase();if(!jf.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let D=h.value;Bf[y]&&(D=To(D)),Yu[y]&&(D=ql(D)),this.buf.push(" ",m,'="',Io(D),'"')}return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();Zl.hasOwnProperty(a)&&!Cd.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(Io(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const $f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gf=/([^\#-~ |!])/g;function Io(i){return i.replace(/&/g,"&amp;").replace($f,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(Gf,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ha;function Qo(i,s){let a=null;try{Ha=Ha||Dd(i);let l=s?String(s):"";a=Ha.getInertBodyElement(l);let c=5,h=l;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,l=h,h=a.innerHTML,a=Ha.getInertBodyElement(l)}while(l!==h);return jl((new Hf).sanitizeChildren(Wf(a)||a))}finally{if(a){const l=Wf(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function Wf(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function $a(i){const s=function(){const i=Pe();return i&&i[12]}();return s?s.sanitize(tr.URL,i)||"":Yo(i,"URL")?si(i):To(ee(i))}const Ju="__ngContext__";function hr(i,s){i[Ju]=s}function Ga(i){const s=function(i){return i[Ju]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Xu(i){return i.ngOriginalError}function ec(i,...s){i.error(...s)}class qa{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=this._findContext(s),c=(i=s)&&i.ngErrorLogger||ec;var i;c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a),l&&c(this._console,"ERROR CONTEXT",l)}_findContext(s){return s?s.ngDebugContext||this._findContext(Xu(s)):null}_findOriginalError(s){let a=s&&Xu(s);for(;a&&Xu(a);)a=Xu(a);return a||null}}const nc=/^>|^->|<!--|-->|--!>|<!-$/g,Ov=/(<|>)/;const I=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Xt))();function st(i){return i instanceof Function?i():i}var Ki=(()=>((Ki=Ki||{})[Ki.Important=1]="Important",Ki[Ki.DashCase=2]="DashCase",Ki))();let rc;function Md(i,s){return rc(i,s)}function ta(i){const s=i[3];return $i(s)?s[3]:s}function ic(i){return Bm(i[13])}function Od(i){return Bm(i[4])}function Bm(i){for(;null!==i&&!$i(i);)i=i[4];return i}function na(i,s,a,l,c){if(null!=l){let h,m=!1;$i(l)?h=l:_i(l)&&(m=!0,l=l[0]);const y=an(l);0===i&&null!==a?null==c?rE(s,a,y):oc(s,a,y,c||null,!0):1===i&&null!==a?oc(s,a,y,c||null,!0):2===i?aE(s,y,m):3===i&&s.destroyNode(y),null!=h&&function(i,s,a,l,c){const h=a[7];h!==an(a)&&na(s,i,l,h,c);for(let y=10;y<a.length;y++){const D=a[y];rp(D[1],D,i,s,l,h)}}(s,i,h,a,c)}}function Pv(i,s){return Tt(i)?i.createText(s):i.createTextNode(s)}function XD(i,s,a){Tt(i)?i.setValue(s,a):s.textContent=a}function PI(i,s){return i.createComment(function(i){return i.replace(nc,s=>s.replace(Ov,"\u200b$1\u200b"))}(s))}function tp(i,s,a){return Tt(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function nE(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Kc(c,-1)),a.splice(l,1)}function Fv(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&nE(c,l),s>0&&(i[a-1][4]=l[4]);const h=Pn(i,10+s);!function(i,s){rp(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const m=h[19];null!==m&&m.detachView(h[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Di(i,s){if(!(256&s[2])){const a=s[11];Tt(a)&&a.destroyNode&&rp(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return Lv(i[1],i);for(;s;){let a=null;if(_i(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)_i(s)&&Lv(s[1],s),s=s[3];null===s&&(s=i),_i(s)&&Lv(s[1],s),a=s&&s[4]}s=a}}(s)}}function Lv(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Hu)){const h=a[l+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const y=c[h[m]],D=h[m+1];try{D.call(y)}finally{}}else try{h.call(c)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],y="function"==typeof m?m(s):an(s[m]),D=l[c=a[h+2]],E=a[h+3];"boolean"==typeof E?y.removeEventListener(a[h],D,E):E>=0?l[c=E]():l[c=-E].unsubscribe(),h+=2}else{const m=l[c=a[h+1]];a[h].call(m)}if(null!==l){for(let h=c+1;h<l.length;h++)l[h]();s[7]=null}}(i,s),1===s[1].type&&Tt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&$i(s[3])){a!==s[3]&&nE(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function $m(i,s,a){return sc(i,s.parent,a)}function sc(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Qe.None||c===Qe.Emulated)return null}return Kn(l,a)}function oc(i,s,a,l,c){Tt(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function rE(i,s,a){Tt(i)?i.appendChild(s,a):s.appendChild(a)}function Vv(i,s,a,l,c){null!==l?oc(i,s,a,l,c):rE(i,s,a)}function np(i,s){return Tt(i)?i.parentNode(s):s.parentNode}function Gm(i,s,a){return Ql(i,s,a)}function jI(i,s,a){return 40&i.type?Kn(i,a):null}let Wm,Ql=jI;function sE(i,s){Ql=i,Wm=s}function qm(i,s,a,l){const c=$m(i,l,s),h=s[11],y=Gm(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let D=0;D<a.length;D++)Vv(h,c,a[D],y,!1);else Vv(h,c,a,y,!1);void 0!==Wm&&Wm(h,l,s,a,c)}function kd(i,s){if(null!==s){const a=s.type;if(3&a)return Kn(s,i);if(4&a)return Bv(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return kd(i,l);{const c=i[s.index];return $i(c)?Bv(-1,c):an(c)}}if(32&a)return Md(s,i)()||an(i[s.index]);{const l=oE(i,s);return null!==l?Array.isArray(l)?l[0]:kd(ta(i[16]),l):kd(i,s.next)}}return null}function oE(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Bv(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return kd(l,c)}return s[7]}function aE(i,s,a){const l=np(i,s);l&&function(i,s,a,l){Tt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}function zm(i,s,a,l,c,h,m){for(;null!=a;){const y=l[a.index],D=a.type;if(m&&0===s&&(y&&hr(an(y),l),a.flags|=4),64!=(64&a.flags))if(8&D)zm(i,s,a.child,l,c,h,!1),na(s,i,c,y,h);else if(32&D){const E=Md(a,l);let T;for(;T=E();)na(s,i,c,T,h);na(s,i,c,y,h)}else 16&D?lE(i,s,l,a,c,h):na(s,i,c,y,h);a=m?a.projectionNext:a.next}}function rp(i,s,a,l,c,h){zm(a,l,i.firstChild,s,c,h,!1)}function lE(i,s,a,l,c,h){const m=a[16],D=m[6].projection[l.projection];if(Array.isArray(D))for(let E=0;E<D.length;E++)na(s,i,c,D[E],h);else zm(i,s,D,m[3],c,h,!0)}function uE(i,s,a){Tt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function Zm(i,s,a){Tt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function cE(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const h=s.length;if(c+h===l||i.charCodeAt(c+h)<=32)return c}a=c+1}}const jv="ng-template";function So(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==cE(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function ks(i){return 4===i.type&&i.value!==jv}function GI(i,s,a){return s===(4!==i.type||a?i.value:jv)}function WI(i,s,a){let l=4;const c=i.attrs||[],h=function(i){for(let s=0;s<i.length;s++)if($u(i[s]))return s;return i.length}(c);let m=!1;for(let y=0;y<s.length;y++){const D=s[y];if("number"!=typeof D){if(!m)if(4&l){if(l=2|1&l,""!==D&&!GI(i,D,a)||""===D&&1===s.length){if(Ao(l))return!1;m=!0}}else{const E=8&l?D:s[++y];if(8&l&&null!==i.attrs){if(!So(i.attrs,E,a)){if(Ao(l))return!1;m=!0}continue}const N=Hv(8&l?"class":D,c,ks(i),a);if(-1===N){if(Ao(l))return!1;m=!0;continue}if(""!==E){let x;x=N>h?"":c[N+1].toLowerCase();const V=8&l?x:null;if(V&&-1!==cE(V,E,0)||2&l&&E!==x){if(Ao(l))return!1;m=!0}}}}else{if(!m&&!Ao(l)&&!Ao(D))return!1;if(m&&Ao(D))continue;m=!1,l=D|1&l}}return Ao(l)||m}function Ao(i){return 0==(1&i)}function Hv(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let h=!1;for(;c<s.length;){const m=s[c];if(m===i)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let y=s[++c];for(;"string"==typeof y;)y=s[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function ip(i,s,a=!1){for(let l=0;l<s.length;l++)if(WI(i,s[l],a))return!0;return!1}function dE(i,s){e:for(let a=0;a<s.length;a++){const l=s[a];if(i.length===l.length){for(let c=0;c<i.length;c++)if(i[c]!==l[c])continue e;return!0}}return!1}function hE(i,s){return i?":not("+s.trim()+")":s}function zI(i){let s=i[0],a=1,l=2,c="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&l){const y=i[++a];c+="["+m+(y.length>0?'="'+y+'"':"")+"]"}else 8&l?c+="."+m:4&l&&(c+=" "+m);else""!==c&&!Ao(m)&&(s+=hE(h,c),c=""),l=m,h=h||!Ao(l);a++}return""!==c&&(s+=hE(h,c)),s}const Ht={};function Km(i){Ym(un(),Pe(),bi()+i,Ma())}function Ym(i,s,a,l){if(!l)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&Rl(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Ys(s,h,0,a)}Uo(a)}function Qm(i,s){return i<<17|s<<2}function ra(i){return i>>17&32767}function za(i){return 2|i}function no(i){return(131068&i)>>2}function ia(i,s){return-131069&i|s<<2}function Wv(i){return 1|i}function n_(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],h=a[l+1];if(-1!==h){const m=i.data[h];hf(c),m.contentQueries(2,s[h],h)}}}function lp(i,s,a,l,c,h,m,y,D,E){const T=s.blueprint.slice();return T[0]=c,T[2]=140|l,lv(T),T[3]=T[15]=i,T[8]=a,T[10]=m||i&&i[10],T[11]=y||i&&i[11],T[12]=D||i&&i[12]||null,T[9]=E||i&&i[9]||null,T[6]=h,T[16]=2==s.type?i[16]:T,T}function Pd(i,s,a,l,c){let h=i.data[s];if(null===h)h=up(i,s,a,l,c),Mt.lFrame.inI18n&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=l,h.attrs=c;const m=Al();h.injectorIndex=null===m?-1:m.injectorIndex}return ri(h,!0),h}function up(i,s,a,l,c){const h=Sl(),m=Qc(),D=i.data[s]=function(i,s,a,l,c,h){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=D),null!==h&&(m?null==h.child&&null!==D.parent&&(h.child=D):null===h.next&&(h.next=D)),D}function uc(i,s,a,l){if(0===a)return-1;const c=s.length;for(let h=0;h<a;h++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function cp(i,s,a){Bu(s);try{const l=i.viewQuery;null!==l&&hc(1,l,a);const c=i.template;null!==c&&Ld(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&n_(i,s),i.staticViewQueries&&hc(2,i.viewQuery,a);const h=i.components;null!==h&&function(i,s){for(let a=0;a<s.length;a++)c_(i,s[a])}(s,h)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Uu()}}function Fd(i,s,a,l){const c=s[2];if(256==(256&c))return;Bu(s);const h=Ma();try{lv(s),function(i){Mt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ld(i,s,a,2,l);const m=3==(3&c);if(!h)if(m){const E=i.preOrderCheckHooks;null!==E&&Rl(s,E,null)}else{const E=i.preOrderHooks;null!==E&&Ys(s,E,0,null),ju(s,0)}if(function(i){for(let s=ic(i);null!==s;s=Od(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],h=c[3];0==(1024&c[2])&&Kc(h,1),c[2]|=1024}}}(s),function(i){for(let s=ic(i);null!==s;s=Od(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];Fu(l)&&Fd(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&n_(i,s),!h)if(m){const E=i.contentCheckHooks;null!==E&&Rl(s,E)}else{const E=i.contentHooks;null!==E&&Ys(s,E,1),ju(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Uo(~c);else{const h=c,m=a[++l],y=a[++l];Vu(m,h),y(2,s[h])}}}finally{Uo(-1)}}(i,s);const y=i.components;null!==y&&function(i,s){for(let a=0;a<s.length;a++)FE(i,s[a])}(s,y);const D=i.viewQuery;if(null!==D&&hc(2,D,l),!h)if(m){const E=i.viewCheckHooks;null!==E&&Rl(s,E)}else{const E=i.viewHooks;null!==E&&Ys(s,E,2),ju(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),h||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Kc(s[3],-1))}finally{Uu()}}function Fi(i,s,a,l){const c=s[10],h=!Ma(),m=Pu(s);try{h&&!m&&c.begin&&c.begin(),m&&cp(i,s,l),Fd(i,s,a,l)}finally{h&&!m&&c.end&&c.end()}}function Ld(i,s,a,l,c){const h=bi(),m=2&l;try{Uo(-1),m&&s.length>20&&Ym(i,s,20,Ma()),a(l,c)}finally{Uo(h)}}function cc(i,s,a){!am()||(function(i,s,a,l){const c=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||as(a,s),hr(l,s);const m=a.initialInputs;for(let y=c;y<h;y++){const D=i.data[y],E=Gi(D);E&&OE(s,a,D);const T=Wu(s,i,y,a);hr(T,s),null!==m&&l0(0,y-c,T,D,0,m),E&&(yi(a.index,s)[8]=T)}}(i,s,a,Kn(a,s)),128==(128&a.flags)&&function(i,s,a){const l=a.directiveStart,c=a.directiveEnd,m=a.index,y=Mt.lFrame.currentDirectiveIndex;try{Uo(m);for(let D=l;D<c;D++){const E=i.data[D],T=s[D];Nl(D),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&s0(E,T)}}finally{Uo(-1),Nl(y)}}(i,s,a))}function e0(i,s,a=Kn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let h=0;h<l.length;h+=2){const m=l[h+1],y=-1===m?a(s,i):i[m];i[c++]=y}}}function CE(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=dc(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function dc(i,s,a,l,c,h,m,y,D,E){const T=20+l,N=T+c,x=function(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ht);return a}(T,N),V="function"==typeof E?E():E;return x[1]={type:i,blueprint:x,template:a,queries:null,viewQuery:y,declTNode:s,data:x.slice().fill(null,T),bindingStartIndex:T,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:D,consts:V,incompleteFirstPass:!1}}function o_(i,s,a,l){const c=h0(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Bd(i).push(l,c.length-1))}function t0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function fs(i,s,a,l,c,h,m,y){const D=Kn(s,a);let T,E=s.inputs;!y&&null!=E&&(T=E[l])?(f_(i,a,T,l,c),Ca(s)&&function(i,s){const a=yi(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=m?m(c,s.value||"",l):c,Tt(h)?h.setProperty(D,l,c):id(l)||(D.setProperty?D.setProperty(l,c):D[l]=c))}function Zr(i,s,a,l){let c=!1;if(am()){const h=function(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let h=0;h<l.length;h++){const m=l[h];ip(a,m.selectors,!1)&&(c||(c=[]),An(as(a,s),i,m.type),Gi(m)?(RE(i,a),c.unshift(m)):c.push(m))}return c}(i,s,a),m=null===l?null:{"":-1};if(null!==h){c=!0,xE(a,i.data.length,h.length);for(let T=0;T<h.length;T++){const N=h[T];N.providersResolver&&N.providersResolver(N)}let y=!1,D=!1,E=uc(i,s,h.length,null);for(let T=0;T<h.length;T++){const N=h[T];a.mergedAttrs=os(a.mergedAttrs,N.hostAttrs),l_(i,a,s,E,N),a0(E,N,m),null!==N.contentQueries&&(a.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=128);const x=N.type.prototype;!y&&(x.ngOnChanges||x.ngOnInit||x.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!D&&(x.ngOnChanges||x.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),D=!0),E++}!function(i,s){const l=s.directiveEnd,c=i.data,h=s.attrs,m=[];let y=null,D=null;for(let E=s.directiveStart;E<l;E++){const T=c[E],N=T.inputs,x=null===h||ks(s)?null:u0(N,h);m.push(x),y=t0(N,E,y),D=t0(T.outputs,E,D)}null!==y&&(y.hasOwnProperty("class")&&(s.flags|=16),y.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=y,s.outputs=D}(i,a)}m&&function(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const h=a[s[c+1]];if(null==h)throw new Ye("301",`Export of name '${s[c+1]}' not found!`);l.push(s[c],h)}}}(a,l,m)}return a.mergedAttrs=os(a.mergedAttrs,a.attrs),c}function dp(i,s,a,l,c,h){const m=h.hostBindings;if(m){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const D=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=D&&y.push(D),y.push(l,c,m)}}function s0(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function RE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function a0(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Gi(s)&&(a[""]=i)}}function xE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function l_(i,s,a,l,c){i.data[l]=c;const h=c.factory||(c.factory=br(c.type)),m=new Hu(h,Gi(c),null);i.blueprint[l]=m,a[l]=m,dp(i,s,0,l,uc(i,a,c.hostVars,Ht),c)}function OE(i,s,a){const l=Kn(s,i),c=CE(a),h=i[10],m=d_(i,lp(i,c,null,a.onPush?64:16,l,s,h,h.createRenderer(l,a),null,null));i[s.index]=m}function Vd(i,s,a,l,c,h,m){if(null==h)Tt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const y=null==m?ee(h):m(h,l||"",c);Tt(i)?i.setAttribute(s,c,y,a):a?s.setAttributeNS(a,c,y):s.setAttribute(c,y)}}function l0(i,s,a,l,c,h){const m=h[s];if(null!==m){const y=l.setInput;for(let D=0;D<m.length;){const E=m[D++],T=m[D++],N=m[D++];null!==y?l.setInput(a,N,E,T):a[T]=N}}}function u0(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function kE(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function FE(i,s){const a=yi(s,i);if(Fu(a)){const l=a[1];80&a[2]?Fd(l,a,l.template,a[8]):a[5]>0&&u_(a)}}function u_(i){for(let l=ic(i);null!==l;l=Od(l))for(let c=10;c<l.length;c++){const h=l[c];if(1024&h[2]){const m=h[1];Fd(m,h,m.template,h[8])}else h[5]>0&&u_(h)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=yi(a[l],i);Fu(c)&&c[5]>0&&u_(c)}}function c_(i,s){const a=yi(s,i),l=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),cp(l,a,a[8])}function d_(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function tu(i){for(;i;){i[2]|=64;const s=ta(i);if(go(i)&&!s)return i;i=s}return null}function Ka(i,s,a){const l=s[10];l.begin&&l.begin();try{Fd(i,s,i.template,a)}catch(c){throw f0(s,c),c}finally{l.end&&l.end()}}function d0(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Ga(a),c=l[1];Fi(c,l,c.template,a)}}(i[8])}function hc(i,s,a){hf(0),s(i,a)}const Yi=(()=>Promise.resolve(null))();function h0(i){return i[7]||(i[7]=[])}function Bd(i){return i.cleanup||(i.cleanup=[])}function f0(i,s){const a=i[9],l=a?a.get(qa,null):null;l&&l.handleError(s)}function f_(i,s,a,l,c){for(let h=0;h<a.length;){const m=a[h++],y=a[h++],D=s[m],E=i.data[m];null!==E.setInput?E.setInput(D,c,l,y):D[y]=c}}function pp(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const y=s[m];"number"==typeof y?h=y:1==h?c=ce(c,y):2==h&&(l=ce(l,y+": "+s[++m]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const fc=new Xn("INJECTOR",-1);class mp{get(s,a=qo){if(a===qo){const l=new Error(`NullInjectorError: No provider for ${fe(s)}!`);throw l.name="NullInjectorError",l}return a}}const Ya=new Xn("Set Injector scope."),Ud={},dS={};let _p;function yp(){return void 0===_p&&(_p=new mp),_p}function m0(i,s=null,a=null,l){return new BE(i,a,s||yp(),l)}class BE{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];a&&Qs(a,y=>this.processProvider(y,s,a)),Qs([s],y=>this.processInjectorType(y,[],h)),this.records.set(fc,Qa(void 0,this));const m=this.records.get(Ya);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof s?null:fe(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=qo,l=lt.Default){this.assertNotDestroyed();const c=Va(this),h=ar(void 0);try{if(!(l&lt.SkipSelf)){let y=this.records.get(s);if(void 0===y){const D=("function"==typeof(i=s)||"object"==typeof i&&i instanceof Xn)&&Vn(s);y=D&&this.injectableDefInScope(D)?Qa(p_(s),Ud):null,this.records.set(s,y)}if(null!=y)return this.hydrate(s,y)}return(l&lt.Self?yp():this.parent).get(s,a=l&lt.Optional&&a===qo?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[La]=m[La]||[]).unshift(fe(s)),c)throw m;return hd(m,s,"R3InjectorError",this.source)}throw m}finally{ar(h),Va(c)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(fe(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,l){if(!(s=te(s)))return!1;let c=ei(s);const h=null==c&&s.ngModule||void 0,m=void 0===h?s:h,y=-1!==l.indexOf(m);if(void 0!==h&&(c=ei(h)),null==c)return!1;if(null!=c.imports&&!y){let T;l.push(m);try{Qs(c.imports,N=>{this.processInjectorType(N,a,l)&&(void 0===T&&(T=[]),T.push(N))})}finally{}if(void 0!==T)for(let N=0;N<T.length;N++){const{ngModule:x,providers:V}=T[N];Qs(V,J=>this.processProvider(J,x,V||U))}}this.injectorDefTypes.add(m);const D=br(m)||(()=>new m);this.records.set(m,Qa(D,Ud));const E=c.providers;if(null!=E&&!y){const T=s;Qs(E,N=>this.processProvider(N,T,E))}return void 0!==h&&void 0!==s.providers}processProvider(s,a,l){let c=Hd(s=te(s))?s:te(s&&s.provide);const h=(i=s,jd(i)?Qa(void 0,i.useValue):Qa(_0(i),Ud));var i;if(Hd(s)||!0!==s.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=Qa(void 0,Ud,!0),m.factory=()=>Xs(m.multi),this.records.set(c,m)),c=s,m.multi.push(s)}this.records.set(c,h)}hydrate(s,a){return a.value===Ud&&(a.value=dS,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=te(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function p_(i){const s=Vn(i),a=null!==s?s.factory:br(i);if(null!==a)return a;if(i instanceof Xn)throw new Error(`Token ${fe(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const l=Oi(s,"?");throw new Error(`Can't resolve all parameters for ${fe(i)}: (${l.join(", ")}).`)}const a=function(i){const s=i&&(i[Br]||i[mr]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function _0(i,s,a){let l;if(Hd(i)){const c=te(i);return br(c)||p_(c)}if(jd(i))l=()=>te(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Xs(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))l=()=>On(te(i.useExisting));else{const c=te(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return br(c)||p_(c);l=()=>new c(...Xs(i.deps))}return l}function Qa(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function jd(i){return null!==i&&"object"==typeof i&&cd in i}function Hd(i){return"function"==typeof i}const nu=function(i,s,a){return function(i,s=null,a=null,l){const c=m0(i,s,a,l);return c._resolveInjectorDefTypes(),c}({name:a},s,i,a)};let _n=(()=>{class i{static create(a,l){return Array.isArray(a)?nu(a,l,""):nu(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=qo,i.NULL=new mp,i.\u0275prov=Jt({token:i,providedIn:"any",factory:()=>On(fc)}),i.__NG_ELEMENT_ID__=-1,i})();function JE(i,s){gf(Ga(i)[1],Yn())}function T0(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Gi(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");c=s.\u0275dir}if(c){if(a){l.push(c);const m=i;m.inputs=b_(i.inputs),m.declaredInputs=b_(i.declaredInputs),m.outputs=b_(i.outputs);const y=c.hostBindings;y&&bS(i,y);const D=c.viewQuery,E=c.contentQueries;if(D&&yS(i,D),E&&vS(i,E),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),Gi(c)&&c.data.animation){const T=i.data;T.animation=(T.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let m=0;m<h.length;m++){const y=h[m];y&&y.ngInherit&&y(i),y===T0&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=os(c.hostAttrs,a=os(a,c.hostAttrs))}}(l)}function b_(i){return i===z?{}:i===U?[]:i}function yS(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function vS(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,h)=>{s(l,c,h),a(l,c,h)}:s}function bS(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Ep=null;function Xa(){if(!Ep){const i=Xt.Symbol;if(i&&i.iterator)Ep=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ep=l)}}}return Ep}function Ps(i){return!!Cp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Xa()in i)}function Cp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ps(i,s,a){return i[s]=a}function ai(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function la(i,s,a,l){const c=ai(i,s,a);return ai(i,s+1,l)||c}function Xd(i,s,a,l){const c=Pe();return ai(c,Ns(),s)&&(un(),function(i,s,a,l,c,h){const m=Kn(i,s);Vd(s[11],m,h,i.value,a,l,c)}(Qn(),c,i,s,a,l)),Xd}function mc(i,s,a,l){return ai(i,Ns(),a)?s+ee(a)+l:Ht}function O0(i,s,a,l,c,h,m,y){const D=Pe(),E=un(),T=i+20,N=E.firstCreatePass?function(i,s,a,l,c,h,m,y,D){const E=s.consts,T=Pd(s,i,4,m||null,Zs(E,y));Zr(s,a,T,Zs(E,D)),gf(s,T);const N=T.tViews=dc(2,T,l,c,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,E);return null!==s.queries&&(s.queries.template(s,T),N.queries=s.queries.embeddedTView(T)),T}(T,E,D,s,a,l,c,h,m):E.data[T];ri(N,!1);const x=D[11].createComment("");qm(E,D,x,N),hr(x,D),d_(D,D[T]=kE(x,D,x,N)),Lo(N)&&cc(E,D,N),null!=m&&e0(D,N,y)}function r1(i){return function(i,s){return i[s]}(Mt.lFrame.contextLView,20+i)}function Ar(i,s=lt.Default){const a=Pe();return null===a?On(i,s):od(Yn(),a,te(i),s)}function Ec(){throw new Error("invalid")}function V0(i,s,a){const l=Pe();return ai(l,Ns(),s)&&fs(un(),Qn(),l,i,s,l[11],a,!1),V0}function kr(i,s,a,l,c){const m=c?"class":"style";f_(i,a,s.inputs[m],m,l)}function ca(i,s,a,l){const c=Pe(),h=un(),m=20+i,y=c[11],D=c[m]=tp(y,s,Mt.lFrame.currentNamespace),E=h.firstCreatePass?function(i,s,a,l,c,h,m){const y=s.consts,E=Pd(s,i,2,c,Zs(y,h));return Zr(s,a,E,Zs(y,m)),null!==E.attrs&&pp(E,E.attrs,!1),null!==E.mergedAttrs&&pp(E,E.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,E),E}(m,h,c,0,s,a,l):h.data[m];ri(E,!0);const T=E.mergedAttrs;null!==T&&yf(y,D,T);const N=E.classes;null!==N&&Zm(y,D,N);const x=E.styles;null!==x&&uE(y,D,x),64!=(64&E.flags)&&qm(h,c,D,E),0===Mt.lFrame.elementDepthCount&&hr(D,c),Mt.lFrame.elementDepthCount++,Lo(E)&&(cc(h,c,E),function(i,s,a){if(Tl(s)){const c=s.directiveEnd;for(let h=s.directiveStart;h<c;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}(h,E,c)),null!==l&&e0(c,E)}function Er(){let i=Yn();Qc()?Na():(i=i.parent,ri(i,!1));const s=i;Mt.lFrame.elementDepthCount--;const a=un();a.firstCreatePass&&(gf(a,i),Tl(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&kr(a,s,Pe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&kr(a,s,Pe(),s.stylesWithoutHost,!1)}function Cc(i,s,a,l){ca(i,s,a,l),Er()}function B0(){return Pe()}function mt(i){return!!i&&"function"==typeof i.then}function au(i){return!!i&&"function"==typeof i.subscribe}const io=au;function Tc(i,s,a,l){const c=Pe(),h=un(),m=Yn();return function(i,s,a,l,c,h,m,y){const D=Lo(l),T=i.firstCreatePass&&Bd(i),N=s[8],x=h0(s);let V=!0;if(3&l.type||y){const re=Kn(l,s),Ue=y?y(re):re,Me=x.length,bt=y?xt=>y(an(xt[l.index])):l.index;if(Tt(a)){let xt=null;if(!y&&D&&(xt=function(i,s,a,l){const c=i.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const m=c[h];if(m===a&&c[h+1]===l){const y=s[7],D=c[h+2];return y.length>D?y[D]:null}"string"==typeof m&&(h+=2)}return null}(i,s,c,l.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=h,xt.__ngLastListenerFn__=h,V=!1;else{h=sh(l,s,N,h,!1);const rn=a.listen(Ue,c,h);x.push(h,rn),T&&T.push(c,bt,Me,Me+1)}}else h=sh(l,s,N,h,!0),Ue.addEventListener(c,h,m),x.push(h),T&&T.push(c,bt,Me,m)}else h=sh(l,s,N,h,!1);const J=l.outputs;let _e;if(V&&null!==J&&(_e=J[c])){const re=_e.length;if(re)for(let Ue=0;Ue<re;Ue+=2){const Lr=s[_e[Ue]][_e[Ue+1]].subscribe(h),Hs=x.length;x.push(h,Lr),T&&T.push(c,l.index,Hs,-(Hs+1))}}}(h,c,c[11],m,i,s,!!a,l),Tc}function C_(i,s,a,l){try{return!1!==a(l)}catch(c){return f0(i,c),!1}}function sh(i,s,a,l,c){return function h(m){if(m===Function)return l;const y=2&i.flags?yi(i.index,s):s;0==(32&s[2])&&tu(y);let D=C_(s,0,l,m),E=h.__ngNextListenerFn__;for(;E;)D=C_(s,0,E,m)&&D,E=E.__ngNextListenerFn__;return c&&!1===D&&(m.preventDefault(),m.returnValue=!1),D}}function T_(i=1){return function(i){return(Mt.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,Mt.lFrame.contextLView))[8]}(i)}function U0(i,s){let a=null;const l=function(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(0==(1&a))return s[a+1]}return null}(i);for(let c=0;c<s.length;c++){const h=s[c];if("*"!==h){if(null===l?ip(i,h,!0):dE(l,h))return c}else a=c}return a}function j0(i){const s=Pe()[16][6];if(!s.projection){const l=s.projection=Oi(i?i.length:1,null),c=l.slice();let h=s.child;for(;null!==h;){const m=i?U0(h,i):0;null!==m&&(c[m]?c[m].projectionNext=h:l[m]=h,c[m]=h),h=h.next}}}function H0(i,s=0,a){const l=Pe(),c=un(),h=Pd(c,20+i,16,null,a||null);null===h.projection&&(h.projection=s),Na(),64!=(64&h.flags)&&function(i,s,a){lE(s[11],0,s,a,$m(i,a,s),Gm(a.parent||s[6],a,s))}(c,l,h)}function oh(i,s,a){return lu(i,"",s,"",a),oh}function lu(i,s,a,l,c){const h=Pe(),m=mc(h,s,a,l);return m!==Ht&&fs(un(),Qn(),h,i,m,h[11],c,!1),lu}function y1(i,s,a,l,c){const h=i[a+1],m=null===s;let y=l?ra(h):no(h),D=!1;for(;0!==y&&(!1===D||m);){const T=i[y+1];OS(i[y],s)&&(D=!0,i[y+1]=l?Wv(T):za(T)),y=l?ra(T):no(T)}D&&(i[a+1]=l?za(h):Wv(h))}function OS(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Wo(i,s)>=0}const Kr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function q0(i){return i.substring(Kr.key,Kr.keyEnd)}function v1(i,s){const a=Kr.textEnd;return a===s?-1:(s=Kr.keyEnd=function(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,Kr.key=s,a),Mo(i,s,a))}function Mo(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function uh(i,s,a){return Cr(i,s,a,!1),uh}function ch(i,s){return Cr(i,s,null,!0),ch}function I_(i){!function(i,s,a,l){const c=un(),h=Ks(2);c.firstUpdatePass&&Y0(c,null,h,l);const m=Pe();if(a!==Ht&&ai(m,h,a)){const y=c.data[bi()];if(X0(y,l)&&!dh(c,h)){let D=l?y.classesWithoutHost:y.stylesWithoutHost;null!==D&&(a=ce(D,a||"")),kr(c,y,m,a,l)}else!function(i,s,a,l,c,h,m,y){c===Ht&&(c=U);let D=0,E=0,T=0<c.length?c[0]:null,N=0<h.length?h[0]:null;for(;null!==T||null!==N;){const x=D<c.length?c[D+1]:void 0,V=E<h.length?h[E+1]:void 0;let _e,J=null;T===N?(D+=2,E+=2,x!==V&&(J=N,_e=V)):null===N||null!==T&&T<N?(D+=2,J=T):(E+=2,J=N,_e=V),null!==J&&E1(i,s,a,l,J,_e,m,y),T=D<c.length?c[D]:null,N=E<h.length?h[E]:null}}(c,y,m,m[11],m[h+1],m[h+1]=function(i,s,a){if(null==a||""===a)return U;const l=[],c=si(a);if(Array.isArray(c))for(let h=0;h<c.length;h++)i(l,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&i(l,h,c[h]);else"string"==typeof c&&s(l,c);return l}(i,s,a),l,h)}}(Zi,Ji,i,!0)}function Ji(i,s){for(let a=function(i){return function(i){Kr.key=0,Kr.keyEnd=0,Kr.value=0,Kr.valueEnd=0,Kr.textEnd=i.length}(i),v1(i,Mo(i,0,Kr.textEnd))}(s);a>=0;a=v1(s,a))Zi(i,q0(s),!0)}function Cr(i,s,a,l){const c=Pe(),h=un(),m=Ks(2);h.firstUpdatePass&&Y0(h,i,m,l),s!==Ht&&ai(c,m,s)&&E1(h,h.data[bi()],c,c[11],i,c[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=fe(si(i)))),i}(s,a),l,m)}function dh(i,s){return s>=i.expandoStartIndex}function Y0(i,s,a,l){const c=i.data;if(null===c[a+1]){const h=c[bi()],m=dh(i,a);X0(h,l)&&null===s&&!m&&(s=!1),s=function(i,s,a,l){const c=function(i){const s=Mt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let h=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=hh(a=S_(null,i,s,a,l),s.attrs,l),h=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==c)if(a=S_(c,i,s,a,l),null===h){let D=function(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==no(l))return i[ra(l)]}(i,s,l);void 0!==D&&Array.isArray(D)&&(D=S_(null,i,s,D[1],l),D=hh(D,s.attrs,l),function(i,s,a,l){i[ra(a?s.classBindings:s.styleBindings)]=l}(i,s,l,D))}else h=function(i,s,a){let l;const c=s.directiveEnd;for(let h=1+s.directiveStylingLast;h<c;h++)l=hh(l,i[h].hostAttrs,a);return hh(l,s.attrs,a)}(i,s,l)}return void 0!==h&&(l?s.residualClasses=h:s.residualStyles=h),a}(c,h,s,l),function(i,s,a,l,c,h){let m=h?s.classBindings:s.styleBindings,y=ra(m),D=no(m);i[l]=a;let T,E=!1;if(Array.isArray(a)){const N=a;T=N[1],(null===T||Wo(N,T)>0)&&(E=!0)}else T=a;if(c)if(0!==D){const x=ra(i[y+1]);i[l+1]=Qm(x,y),0!==x&&(i[x+1]=ia(i[x+1],l)),i[y+1]=function(i,s){return 131071&i|s<<17}(i[y+1],l)}else i[l+1]=Qm(y,0),0!==y&&(i[y+1]=ia(i[y+1],l)),y=l;else i[l+1]=Qm(D,0),0===y?y=l:i[D+1]=ia(i[D+1],l),D=l;E&&(i[l+1]=za(i[l+1])),y1(i,T,l,!0),y1(i,T,l,!1),function(i,s,a,l,c){const h=c?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof s&&Wo(h,s)>=0&&(a[l+1]=Wv(a[l+1]))}(s,T,i,l,h),m=Qm(y,D),h?s.classBindings=m:s.styleBindings=m}(c,h,s,a,m,l)}}function S_(i,s,a,l,c){let h=null;const m=a.directiveEnd;let y=a.directiveStylingLast;for(-1===y?y=a.directiveStart:y++;y<m&&(h=s[y],l=hh(l,h.hostAttrs,c),h!==i);)y++;return null!==i&&(a.directiveStylingLast=y),l}function hh(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let h=0;h<s.length;h++){const m=s[h];"number"==typeof m?c=m:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Zi(i,m,!!a||s[++h]))}return void 0===i?null:i}function E1(i,s,a,l,c,h,m,y){if(!(3&s.type))return;const D=i.data,E=D[y+1];rl(function(i){return 1==(1&i)}(E)?J0(D,s,a,c,no(E),m):void 0)||(rl(h)||function(i){return 2==(2&i)}(E)&&(h=J0(D,null,a,c,y,m)),function(i,s,a,l,c){const h=Tt(i);if(s)c?h?i.addClass(a,l):a.classList.add(l):h?i.removeClass(a,l):a.classList.remove(l);else{let m=-1===l.indexOf("-")?void 0:Ki.DashCase;if(null==c)h?i.removeStyle(a,l,m):a.style.removeProperty(l);else{const y="string"==typeof c&&c.endsWith("!important");y&&(c=c.slice(0,-10),m|=Ki.Important),h?i.setStyle(a,l,c,m):a.style.setProperty(l,c,y?"important":"")}}}(l,m,_o(bi(),a),c,h))}function J0(i,s,a,l,c,h){const m=null===s;let y;for(;c>0;){const D=i[c],E=Array.isArray(D),T=E?D[1]:D,N=null===T;let x=a[c+1];x===Ht&&(x=N?U:void 0);let V=N?Mf(x,l):T===l?x:void 0;if(E&&!rl(V)&&(V=Mf(D,l)),rl(V)&&(y=V,m))return y;const J=i[c+1];c=m?ra(J):no(J)}if(null!==s){let D=h?s.residualClasses:s.residualStyles;null!=D&&(y=Mf(D,l))}return y}function rl(i){return void 0!==i}function X0(i,s){return 0!=(i.flags&(s?16:32))}function uu(i,s=""){const a=Pe(),l=un(),c=i+20,h=l.firstCreatePass?Pd(l,c,1,s,null):l.data[c],m=a[c]=Pv(a[11],s);qm(l,a,m,h),ri(h,!1)}function A_(i){return il("",i,""),A_}function il(i,s,a){const l=Pe(),c=mc(l,i,s,a);return c!==Ht&&function(i,s,a){const l=_o(s,i);XD(i[11],l,a)}(l,bi(),c),il}function M_(i,s,a){const l=Pe();return ai(l,Ns(),s)&&fs(un(),Qn(),l,i,s,l[11],a,!0),M_}const hn=void 0;var R_=["en",[["a","p"],["AM","PM"],hn],[["AM","PM"],hn,hn],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hn,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hn,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hn,"{1} 'at' {0}",hn],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let da={};function ph(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ob(s);if(a)return a;const l=s.split("-")[0];if(a=ob(l),a)return a;if("en"===l)return R_;throw new Error(`Missing locale data for the locale "${i}".`)}function sb(i){return ph(i)[Nt.PluralCase]}function ob(i){return i in da||(da[i]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[i]),da[i]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const WS=["zero","one","two","few","many"],O_="en-US",jp={marker:"element"},k_={marker:"ICU"};var Qt=(()=>((Qt=Qt||{})[Qt.SHIFT=2]="SHIFT",Qt[Qt.APPEND_EAGERLY=1]="APPEND_EAGERLY",Qt[Qt.COMMENT=2]="COMMENT",Qt))();let ab=O_;function P_(i,s,a){const l=s.insertBeforeIndex,c=Array.isArray(l)?l[0]:l;return null===c?jI(i,0,a):an(a[c])}function lb(i,s,a,l,c){const h=s.insertBeforeIndex;if(Array.isArray(h)){let m=l,y=null;if(3&s.type||(y=m,m=c),null!==m&&0==(2&s.flags))for(let D=1;D<h.length;D++)oc(i,m,a[h[D]],y,!1)}}function gh(i,s){if(i.push(s),i.length>1)for(let a=i.length-2;a>=0;a--){const l=i[a];ub(l)||B1(l,s)&&null===U1(l)&&zS(l,s.index)}}function ub(i){return!(64&i.type)}function B1(i,s){return ub(s)||i.index>s.index}function U1(i){const s=i.insertBeforeIndex;return Array.isArray(s)?s[0]:s}function zS(i,s){const a=i.insertBeforeIndex;Array.isArray(a)?a[0]=s:(sE(P_,lb),i.insertBeforeIndex=s)}function $p(i,s){const a=i.data[s];return null===a||"string"==typeof a?null:a.hasOwnProperty("currentCaseLViewIndex")?a:a.value}function ZS(i,s,a){const l=up(i,a,64,null,null);return gh(s,l),l}function Gp(i,s){const a=s[i.currentCaseLViewIndex];return null===a?a:a<0?~a:a}function cb(i){return i>>>17}function db(i){return(131070&i)>>>1}let mh=0,_h=0;function Ac(i,s,a,l){const c=a[11];let m,h=null;for(let y=0;y<s.length;y++){const D=s[y];if("string"==typeof D){const E=s[++y];null===a[E]&&(a[E]=Pv(c,D))}else if("number"==typeof D)switch(1&D){case 0:const E=cb(D);let T,N;if(null===h&&(h=E,m=np(c,l)),E===h?(T=l,N=m):(T=null,N=an(a[E])),null!==N){const _e=db(D);oc(c,N,a[_e],T,!1);const Ue=$p(i,_e);if(null!==Ue&&"object"==typeof Ue){const Me=Gp(Ue,a);null!==Me&&Ac(i,Ue.create[Me],a,a[Ue.anchorIdx])}}break;case 1:const V=s[++y],J=s[++y];Vd(c,_o(D>>>1,a),null,null,V,J,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${D}"`)}else switch(D){case k_:const E=s[++y],T=s[++y];null===a[T]&&hr(a[T]=PI(c,E),a);break;case jp:const N=s[++y],x=s[++y];null===a[x]&&hr(a[x]=tp(c,N,null),a)}}}function G1(i,s,a,l,c){for(let h=0;h<a.length;h++){const m=a[h],y=a[++h];if(m&c){let D="";for(let E=h+1;E<=h+y;E++){const T=a[E];if("string"==typeof T)D+=T;else if("number"==typeof T)if(T<0)D+=ee(s[l-T]);else{const N=T>>>2;switch(3&T){case 1:const x=a[++E],V=a[++E],J=i.data[N];"string"==typeof J?Vd(s[11],s[N],null,J,x,D,V):fs(i,J,s,x,D,s[11],V,!1);break;case 0:const _e=s[N];null!==_e&&XD(s[11],_e,D);break;case 2:QS(i,$p(i,N),s,D);break;case 3:W1(i,$p(i,N),l,s)}}}}else{const D=a[h+1];if(D>0&&3==(3&D)){const T=$p(i,D>>>2);s[T.currentCaseLViewIndex]<0&&W1(i,T,l,s)}}h+=y}}function W1(i,s,a,l){let c=l[s.currentCaseLViewIndex];if(null!==c){let h=mh;c<0&&(c=l[s.currentCaseLViewIndex]=~c,h=-1),G1(i,l,s.update[c],a,h)}}function QS(i,s,a,l){const c=function(i,s){let a=i.cases.indexOf(s);if(-1===a)switch(i.type){case 1:{const l=function(i,s){const a=sb(s)(parseInt(i,10)),l=WS[a];return void 0!==l?l:"other"}(s,ab);a=i.cases.indexOf(l),-1===a&&"other"!==l&&(a=i.cases.indexOf("other"));break}case 0:a=i.cases.indexOf("other")}return-1===a?null:a}(s,l);if(Gp(s,a)!==c&&(hb(i,s,a),a[s.currentCaseLViewIndex]=null===c?null:~c,null!==c)){const m=a[s.anchorIdx];m&&Ac(i,s.create[c],a,m)}}function hb(i,s,a){let l=Gp(s,a);if(null!==l){const c=s.remove[l];for(let h=0;h<c.length;h++){const m=c[h];if(m>0){const y=_o(m,a);null!==y&&aE(a[11],y)}else hb(i,$p(i,~m),a)}}}function JS(){const i=[];let a,l,s=-1;function h(y,D){s=0;const E=Gp(y,D);l=null!==E?y.remove[E]:U}function m(){if(s<l.length){const y=l[s++];return y>0?a[y]:(i.push(s,l),h(a[1].data[~y],a),m())}return 0===i.length?null:(l=i.pop(),s=i.pop(),m())}return function(y,D){for(a=D;i.length;)i.pop();return h(y.value,D),m}}const Fn=/\ufffd(\d+):?\d*\ufffd/gi,eA=/\ufffd(\d+)\ufffd/,q1=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,fa=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,_s=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Si=/\uE500/g;function pa(i,s,a,l,c,h,m){const y=uc(i,l,1,null);let D=y<<Qt.SHIFT,E=Al();s===E&&(E=null),null===E&&(D|=Qt.APPEND_EAGERLY),m&&(D|=Qt.COMMENT,function(i){void 0===rc&&(rc=i())}(JS)),c.push(D,null===h?"":h);const T=up(i,y,m?32:1,null===h?"":h,null);gh(a,T);const N=T.index;return ri(T,!1),null!==E&&s!==E&&function(i,s){let a=i.insertBeforeIndex;null===a?(sE(P_,lb),a=i.insertBeforeIndex=[null,s]):(function(i,s,a){i!=s&&nt(a,i,s,"==")}(Array.isArray(a),!0,"Expecting array here"),a.push(s))}(E,N),T}function vh(i,s,a,l,c,h,m){const y=m.match(Fn),D=pa(i,s,a,h,l,y?null:m,!1);y&&wh(c,m,D.index,null,0,null)}function wh(i,s,a,l,c,h){const m=i.length,y=m+1;i.push(null,null);const D=m+2,E=s.split(Fn);let T=0;for(let N=0;N<E.length;N++){const x=E[N];if(1&N){const V=c+parseInt(x,10);i.push(-1-V),T|=fb(V)}else""!==x&&i.push(x)}return i.push(a<<2|(l?1:0)),l&&i.push(l,h),i[m]=T,i[y]=i.length-D,T}function fb(i){return 1<<Math.min(i,31)}function Wp(i){let s,h,a="",l=0,c=!1;for(;null!==(s=fa.exec(i));)c?s[0]===`\ufffd/*${h}\ufffd`&&(l=s.index,c=!1):(a+=i.substring(l,s.index+s[0].length),h=s[1],c=!0);return a+=i.substr(l),a}function Z1(i,s,a,l,c,h){let m=0;const y={type:c.type,currentCaseLViewIndex:uc(i,s,1,null),anchorIdx:h,cases:[],create:[],remove:[],update:[]};(function(i,s,a){i.push(fb(s.mainBinding),2,-1-s.mainBinding,a<<2|2)})(a,c,h),function(i,s,a){const l=i.data[s];null===l?i.data[s]=a:l.value=a}(i,h,y);const D=c.values;for(let E=0;E<D.length;E++){const T=D[E],N=[];for(let x=0;x<T.length;x++){const V=T[x];if("string"!=typeof V){const J=N.push(V)-1;T[x]=`\x3c!--\ufffd${J}\ufffd--\x3e`}}m=tA(i,y,s,a,l,c.cases[E],T.join(""),N)|m}m&&function(i,s,a){i.push(s,1,a<<2|3)}(a,m,h)}function qp(i){const s=[],a=[];let l=1,c=0;const h=ol(i=i.replace(q1,function(m,y,D){return l="select"===D?0:1,c=parseInt(y.substr(1),10),""}));for(let m=0;m<h.length;){let y=h[m++].trim();1===l&&(y=y.replace(/\s*(?:=)?(\w+)\s*/,"$1")),y.length&&s.push(y);const D=ol(h[m++]);s.length>a.length&&a.push(D)}return{type:l,mainBinding:c,cases:s,values:a}}function ol(i){if(!i)return[];let s=0;const a=[],l=[],c=/[{}]/g;let h;for(c.lastIndex=0;h=c.exec(i);){const y=h.index;if("}"==h[0]){if(a.pop(),0==a.length){const D=i.substring(s,y);q1.test(D)?l.push(qp(D)):l.push(D),s=y+1}}else{if(0==a.length){const D=i.substring(s,y);l.push(D),s=y+1}a.push("{")}}const m=i.substring(s);return l.push(m),l}function tA(i,s,a,l,c,h,m,y){const D=[],E=[],T=[];s.cases.push(h),s.create.push(D),s.remove.push(E),s.update.push(T);const x=Dd(Rt()).getInertBodyElement(m),V=Wf(x)||x;return V?hu(i,s,a,l,D,E,T,V,c,y,0):0}function hu(i,s,a,l,c,h,m,y,D,E,T){let N=0,x=y.firstChild;for(;x;){const V=uc(i,a,1,null);switch(x.nodeType){case Node.ELEMENT_NODE:const J=x,_e=J.tagName.toLowerCase();if(Zl.hasOwnProperty(_e)){zp(c,jp,_e,D,V),i.data[V]=_e;const bt=J.attributes;for(let xt=0;xt<bt.length;xt++){const rn=bt.item(xt),Lr=rn.name.toLowerCase();rn.value.match(Fn)?jf.hasOwnProperty(Lr)&&wh(m,rn.value,V,rn.name,0,Bf[Lr]?To:Yu[Lr]?ql:null):mb(c,V,rn)}N=hu(i,s,a,l,c,h,m,x,V,E,T+1)|N,pb(h,V,T)}break;case Node.TEXT_NODE:const re=x.textContent||"",Ue=re.match(Fn);zp(c,null,Ue?"":re,D,V),pb(h,V,T),Ue&&(N=wh(m,re,V,null,0,null)|N);break;case Node.COMMENT_NODE:const Me=eA.exec(x.textContent||"");if(Me){const xt=E[parseInt(Me[1],10)];zp(c,k_,"",D,V),Z1(i,a,l,D,xt,V),gb(h,V,T)}}x=x.nextSibling}return N}function pb(i,s,a){0===a&&i.push(s)}function gb(i,s,a){0===a&&(i.push(~s),i.push(s))}function zp(i,s,a,l,c){null!==s&&i.push(s),i.push(a,c,function(i,s,a){return 0|s<<17|a<<1}(0,l,c))}function mb(i,s,a){i.push(s<<1|1,a.name,a.value)}function Th(i,s,a=-1){const l=un(),c=Pe(),h=20+i,m=Zs(l.consts,s),y=Al();l.firstCreatePass&&function(i,s,a,l,c,h){const m=Al(),y=[],D=[],E=[[]];c=function(i,s){if(function(i){return-1===i}(s))return Wp(i);{const a=i.indexOf(`:${s}\ufffd`)+2+s.toString().length,l=i.search(new RegExp(`\ufffd\\/\\*\\d+:${s}\ufffd`));return Wp(i.substring(a,l))}}(c,h);const T=function(i){return i.replace(Si," ")}(c).split(_s);for(let N=0;N<T.length;N++){let x=T[N];if(0==(1&N)){const V=ol(x);for(let J=0;J<V.length;J++){let _e=V[J];if(0==(1&J)){const re=_e;""!==re&&vh(i,m,E[0],y,D,a,re)}else{const re=_e;if("object"!=typeof re)throw new Error(`Unable to parse ICU expression in "${c}" message.`);Z1(i,a,D,s,re,pa(i,m,E[0],a,y,"",!0).index)}}}else{const V=47===x.charCodeAt(0),_e=(x.charCodeAt(V?1:0),20+Number.parseInt(x.substring(V?2:1)));if(V)E.shift(),ri(Al(),!1);else{const re=ZS(i,E[0],_e);E.unshift([]),ri(re,!0)}}}i.data[l]={create:y,update:D}}(l,null===y?0:y.index,c,h,m,a);const D=l.data[h],T=sc(l,y===c[6]?null:y,c);(function(i,s,a,l){const c=i[11];for(let h=0;h<s.length;h++){const m=s[h++],y=s[h],D=(m&Qt.COMMENT)===Qt.COMMENT,E=(m&Qt.APPEND_EAGERLY)===Qt.APPEND_EAGERLY,T=m>>>Qt.SHIFT;let N=i[T];null===N&&(N=i[T]=D?c.createComment(y):Pv(c,y)),E&&null!==a&&oc(c,a,N,l,!1)}})(c,D.create,T,y&&8&y.type?c[y.index]:null),Xc(!0)}function L_(i,s,a){Th(i,s,a),Xc(!1)}function V_(i){return function(i){i&&(mh|=1<<Math.min(_h,31)),_h++}(ai(Pe(),Ns(),i)),V_}function bb(i){!function(i,s,a){if(_h>0){const l=i.data[a];G1(i,s,Array.isArray(l)?l:l.update,Mt.lFrame.bindingIndex-_h-1,mh)}mh=0,_h=0}(un(),Pe(),i+20)}function Db(i,s,a,l,c){if(i=te(i),Array.isArray(i))for(let h=0;h<i.length;h++)Db(i[h],s,a,l,c);else{const h=un(),m=Pe();let y=Hd(i)?i:te(i.provide),D=_0(i);const E=Yn(),T=1048575&E.providerIndexes,N=E.directiveStart,x=E.providerIndexes>>20;if(Hd(i)||!i.multi){const V=new Hu(D,c,Ar),J=Vi(y,s,c?T:T+x,N);-1===J?(An(as(E,m),h,y),B_(h,i,s.length),s.push(y),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),a.push(V),m.push(V)):(a[J]=V,m[J]=V)}else{const V=Vi(y,s,T+x,N),J=Vi(y,s,T,T+x),_e=V>=0&&a[V],re=J>=0&&a[J];if(c&&!re||!c&&!_e){An(as(E,m),h,y);const Ue=function(i,s,a,l,c){const h=new Hu(i,a,Ar);return h.multi=[],h.index=s,h.componentProviders=0,Eb(h,c,l&&!a),h}(c?U_:X1,a.length,c,l,D);!c&&re&&(a[J].providerFactory=Ue),B_(h,i,s.length,0),s.push(y),E.directiveStart++,E.directiveEnd++,c&&(E.providerIndexes+=1048576),a.push(Ue),m.push(Ue)}else B_(h,i,V>-1?V:J,Eb(a[c?J:V],D,!c&&l));!c&&l&&re&&a[J].componentProviders++}}}function B_(i,s,a,l){const c=Hd(s);if(c||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const y=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const D=y.indexOf(a);-1===D?y.push(a,[l,m]):y[D+1].push(l,m)}else y.push(a,m)}}}function Eb(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Vi(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function X1(i,s,a,l){return Zp(this.multi,[])}function U_(i,s,a,l){const c=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,y=Wu(a,a[1],this.providerFactory.index,l);h=y.slice(0,m),Zp(c,h);for(let D=m;D<y.length;D++)h.push(y[D])}else h=[],Zp(c,h);return h}function Zp(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function ll(i,s=[]){return a=>{a.providersResolver=(l,c)=>function(i,s,a){const l=un();if(l.firstCreatePass){const c=Gi(i);Db(a,l.data,l.blueprint,c,!0),Db(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Cb{}const tC="ngComponent";class nC{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${fe(i)}. Did you add it to @NgModule.entryComponents?`);return s[tC]=i,s}(s)}}let Bs=(()=>{class i{}return i.NULL=new nC,i})();function Qp(...i){}function Ah(i,s){return new Xi(Kn(i,s))}const j_=function(){return Ah(Yn(),Pe())};let Xi=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=j_,i})();function Tb(i){return i instanceof Xi?i.nativeElement:i}class H_{}let rC=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>oA(),i})();const oA=function(){const i=Pe(),a=yi(Yn().index,i);return function(i){return i[11]}(_i(a)?a:i)};let Jp=(()=>{class i{}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:()=>null}),i})();class Nh{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Mh=new Nh("13.0.2"),gu={};function $_(i,s,a,l,c=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&l.push(an(h)),$i(h))for(let y=10;y<h.length;y++){const D=h[y],E=D[1].firstChild;null!==E&&$_(D[1],D,E,l)}const m=a.type;if(8&m)$_(i,s,a.child,l);else if(32&m){const y=Md(a,s);let D;for(;D=y();)l.push(D)}else if(16&m){const y=oE(s,a);if(Array.isArray(y))l.push(...y);else{const D=ta(s[16]);$_(D[1],D,y,l,!0)}}a=c?a.projectionNext:a.next}return l}class Rh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return $_(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if($i(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Fv(s,l),Pn(a,l))}this._attachedToViewContainer=!1}Di(this._lView[1],this._lView)}onDestroy(s){o_(this._lView[1],this._lView,null,s)}markForCheck(){tu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ka(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){Jc(!0);try{Ka(i,s,a)}finally{Jc(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,rp(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class Ab extends Rh{constructor(s){super(s),this._view=s}detectChanges(){d0(this._view)}checkNoChanges(){!function(i){Jc(!0);try{d0(i)}finally{Jc(!1)}}(this._view)}get context(){return null}}class Nb extends Bs{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Tn(s);return new Rb(a,this.ngModule)}}function sC(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const aC=new Xn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>I});class Rb extends Cb{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(zI).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return sC(this.componentDef.inputs)}get outputs(){return sC(this.componentDef.outputs)}create(s,a,l,c){const h=(c=c||this.ngModule)?function(i,s){return{get:(a,l,c)=>{const h=i.get(a,gu,c);return h!==gu||l===gu?h:s.get(a,l,c)}}}(s,c.injector):s,m=h.get(H_,wn),y=h.get(Jp,null),D=m.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",T=l?function(i,s,a){if(Tt(i))return i.selectRootElement(s,a===Qe.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(D,l,this.componentDef.encapsulation):tp(m.createRenderer(null,this.componentDef),E,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(E)),N=this.componentDef.onPush?576:528,x=function(i,s){return{components:[],scheduler:i||I,clean:Yi,playerHandler:s||null,flags:0}}(),V=dc(0,null,null,1,0,null,null,null,null,null),J=lp(null,V,x,N,null,null,m,D,y,h);let _e,re;Bu(J);try{const Ue=function(i,s,a,l,c,h){const m=a[1];a[20]=i;const D=Pd(m,20,2,"#host",null),E=D.mergedAttrs=s.hostAttrs;null!==E&&(pp(D,E,!0),null!==i&&(yf(c,i,E),null!==D.classes&&Zm(c,i,D.classes),null!==D.styles&&uE(c,i,D.styles)));const T=l.createRenderer(i,s),N=lp(a,CE(s),null,s.onPush?64:16,a[20],D,l,T,h||null,null);return m.firstCreatePass&&(An(as(D,a),m,s.type),RE(m,D),xE(D,a.length,1)),d_(a,N),a[20]=N}(T,this.componentDef,J,m,D);if(T)if(l)yf(D,T,["ng-version",Mh.full]);else{const{attrs:Me,classes:bt}=function(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let h=i[l];if("string"==typeof h)2===c?""!==h&&s.push(h,i[++l]):8===c&&a.push(h);else{if(!Ao(c))break;c=h}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Me&&yf(D,T,Me),bt&&bt.length>0&&Zm(D,T,bt.join(" "))}if(re=Wi(V,20),void 0!==a){const Me=re.projection=[];for(let bt=0;bt<this.ngContentSelectors.length;bt++){const xt=a[bt];Me.push(null!=xt?Array.from(xt):null)}}_e=function(i,s,a,l,c){const h=a[1],m=function(i,s,a){const l=Yn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),l_(i,l,s,uc(i,s,1,null),a));const c=Wu(s,i,l.directiveStart,l);hr(c,s);const h=Kn(l,s);return h&&hr(h,s),c}(h,a,s);if(l.components.push(m),i[8]=m,c&&c.forEach(D=>D(m,s)),s.contentQueries){const D=Yn();s.contentQueries(1,m,D.directiveStart)}const y=Yn();return!h.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Uo(y.index),dp(a[1],y,0,y.directiveStart,y.directiveEnd,s),s0(s,m)),m}(Ue,this.componentDef,J,x,[JE]),cp(V,J,null)}finally{Uu()}return new uC(this.componentType,_e,Ah(re,J),J,re)}}class uC extends class{}{constructor(s,a,l,c,h){super(),this.location=l,this._rootLView=c,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new Ab(c),this.componentType=s}get injector(){return new jn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class lo{}class Mc{}const mu=new Map;class G_ extends lo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Nb(this);const l=ln(s);this._bootstrapComponents=st(l.bootstrap),this._r3Injector=m0(s,a,[{provide:lo,useValue:this},{provide:Bs,useValue:this.componentFactoryResolver}],fe(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=_n.THROW_IF_NOT_FOUND,l=lt.Default){return s===_n||s===lo||s===fc?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class kb extends Mc{constructor(s){super(),this.moduleType=s,null!==ln(s)&&function(i){const s=new Set;!function a(l){const c=ln(l,!0),h=c.id;null!==h&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${fe(s)} vs ${fe(s.name)}`)}(h,mu.get(h),l),mu.set(h,l));const m=st(c.imports);for(const y of m)s.has(y)||(s.add(y),a(y))}(i)}(s)}create(s){return new G_(this.moduleType,s)}}function Qr(i,s,a,l){return function(i,s,a,l,c,h){const m=s+a;return ai(i,m,c)?ps(i,m+1,h?l.call(h,c):l(c)):xh(i,m+1)}(Pe(),vi(),i,s,a,l)}function hC(i,s,a,l,c){return function(i,s,a,l,c,h,m){const y=s+a;return la(i,y,c,h)?ps(i,y+2,m?l.call(m,c,h):l(c,h)):xh(i,y+2)}(Pe(),vi(),i,s,a,l,c)}function fC(i,s,a,l,c,h){return function(i,s,a,l,c,h,m,y){const D=s+a;return function(i,s,a,l,c){const h=la(i,s,a,l);return ai(i,s+2,c)||h}(i,D,c,h,m)?ps(i,D+3,y?l.call(y,c,h,m):l(c,h,m)):xh(i,D+3)}(Pe(),vi(),i,s,a,l,c,h)}function xh(i,s){const a=i[s];return a===Ht?void 0:a}function kh(i){return s=>{setTimeout(i,void 0,s)}}const vs=class extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var D,E,T;let c=s,h=a||(()=>null),m=l;if(s&&"object"==typeof s){const N=s;c=null==(D=N.next)?void 0:D.bind(N),h=null==(E=N.error)?void 0:E.bind(N),m=null==(T=N.complete)?void 0:T.bind(N)}this.__isAsync&&(h=kh(h),c&&(c=kh(c)),m&&(m=kh(m)));const y=super.subscribe({next:c,error:h,complete:m});return s instanceof ne.w0&&s.add(y),y}};function Bb(){return this._results[Xa()]()}class rg{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Xa(),l=rg.prototype;l[a]||(l[a]=Bb)}get changes(){return this._changes||(this._changes=new vs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=ii(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],h=s[l];if(a&&(c=a(c),h=a(h)),h!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;const mA=function(){return ul(Yn(),Pe())};let ig=(()=>{class i{}return i.__NG_ELEMENT_ID__=mA,i})();const _A=ig,sg=class extends _A{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=lp(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(l[19]=h.createEmbeddedView(a)),cp(a,l,s),new Rh(l)}};function ul(i,s){return 4&i.type?new sg(s,i,Ah(i,s)):null}const og=function(){return vC(Yn(),Pe())};let Ph=(()=>{class i{}return i.__NG_ELEMENT_ID__=og,i})();const $b=Ph,z_=class extends $b{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Ah(this._hostTNode,this._hostLView)}get injector(){return new jn(this._hostTNode,this._hostLView)}get parentInjector(){const s=Un(this._hostTNode,this._hostLView);if(pv(s)){const a=Jn(s,this._hostLView),l=yo(s);return new jn(a[1].data[l+8],a)}return new jn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=cl(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,h){const m=s&&!("function"==typeof s);let y;if(m)y=a;else{const N=a||{};y=N.index,l=N.injector,c=N.projectableNodes,h=N.ngModuleRef}const D=m?s:new Rb(Tn(s)),E=l||this.parentInjector;if(!h&&null==D.ngModule&&E){const N=E.get(lo,null);N&&(h=N)}const T=D.create(E,c,void 0,h);return this.insert(T.hostView,y),T}insert(s,a){const l=s._lView,c=l[1];if($i(l[3])){const T=this.indexOf(s);if(-1!==T)this.detach(T);else{const N=l[3],x=new z_(N,N[6],N[3]);x.detach(x.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function(i,s,a,l){const c=10+l,h=a.length;l>0&&(a[c-1][4]=s),l<h-10?(s[4]=a[c],ls(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const y=s[19];null!==y&&y.insertView(i),s[2]|=128}(c,l,m,h);const y=Bv(h,m),D=l[11],E=np(D,m[7]);return null!==E&&function(i,s,a,l,c,h){l[0]=c,l[6]=s,rp(i,l,a,1,c,h)}(c,m[6],D,l,E,y),s.attachToViewContainerRef(),ls(Z_(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=cl(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Fv(this._lContainer,a);l&&(Pn(Z_(this._lContainer),a),Di(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Fv(this._lContainer,a);return l&&null!=Pn(Z_(this._lContainer),a)?new Rh(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function cl(i){return i[8]}function Z_(i){return i[8]||(i[8]=[])}function vC(i,s){let a;const l=s[i.index];if($i(l))a=l;else{let c;if(8&i.type)c=an(l);else{const h=s[11];c=h.createComment("");const m=Kn(i,s);oc(h,np(h,m),c,function(i,s){return Tt(i)?i.nextSibling(s):s.nextSibling}(h,m),!1)}s[i.index]=a=kE(l,s,c,i),d_(s,a)}return new z_(a,i,s)}class Wb{constructor(s){this.queryList=s,this.matches=null}clone(){return new Wb(this.queryList)}setDirty(){this.queryList.setDirty()}}class ag{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let h=0;h<l;h++){const m=a.getByIndex(h);c.push(this.queries[m.indexInDeclarationView].clone())}return new ag(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==ey(s,a).matches&&this.queries[a].setDirty()}}class lg{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class ug{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,h=this.getByIndex(l).embeddedTView(s,c);h&&(h.indexInDeclarationView=l,null!==a?a.push(h):a=[h])}return null!==a?new ug(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class K_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new K_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const h=l[c];this.matchTNodeWithReadOption(s,a,Fh(a,h)),this.matchTNodeWithReadOption(s,a,gt(a,s,h,!1,!1))}else l===ig?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,gt(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Xi||c===Ph||c===ig&&4&a.type)this.addMatch(a.index,-2);else{const h=gt(a,s,c,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Fh(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function vA(i,s,a,l){return-1===a?function(i,s){return 11&i.type?Ah(i,s):4&i.type?ul(i,s):null}(s,i):-2===a?function(i,s,a){return a===Xi?Ah(s,i):a===ig?ul(s,i):a===Ph?vC(s,i):void 0}(i,s,l):Wu(i,i[1],a,s)}function zb(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const h=i.data,m=a.matches,y=[];for(let D=0;D<m.length;D+=2){const E=m[D];y.push(E<0?null:vA(s,h[E],m[D+1],a.metadata.read))}c.matches=y}return c.matches}function Y_(i,s,a,l){const c=i.queries.getByIndex(a),h=c.matches;if(null!==h){const m=zb(i,s,c,a);for(let y=0;y<h.length;y+=2){const D=h[y];if(D>0)l.push(m[y/2]);else{const E=h[y+1],T=s[-D];for(let N=10;N<T.length;N++){const x=T[N];x[17]===x[3]&&Y_(x[1],x,E,l)}if(null!==T[9]){const N=T[9];for(let x=0;x<N.length;x++){const V=N[x];Y_(V[1],V,E,l)}}}}}return l}function wC(i){const s=Pe(),a=un(),l=ed();hf(l+1);const c=ey(a,l);if(i.dirty&&Pu(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const h=c.crossesNgTemplate?Y_(a,s,l,[]):zb(a,s,c,l);i.reset(h,Tb),i.notifyOnChanges()}return!0}return!1}function Q_(i,s,a){const l=un();l.firstCreatePass&&(EC(l,new lg(i,s,a),-1),2==(2&s)&&(l.staticViewQueries=!0)),X_(l,Pe(),s)}function DC(i,s,a,l){const c=un();if(c.firstCreatePass){const h=Yn();EC(c,new lg(s,a,l),h.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}X_(c,Pe(),a)}function J_(){return i=Pe(),s=ed(),i[19].queries[s].queryList;var i,s}function X_(i,s,a){const l=new rg(4==(4&a));o_(i,s,l,l.destroy),null===s[19]&&(s[19]=new ag),s[19].queries.push(new Wb(l))}function EC(i,s,a){null===i.queries&&(i.queries=new ug),i.queries.track(new K_(s,a))}function ey(i,s){return i.queries.getByIndex(s)}function ty(i,s){return ul(i,s)}const dy=new Xn("Application Initializer");let jh=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Qp,this.reject=Qp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if(mt(h))a.push(h);else if(io(h)){const m=new Promise((y,D)=>{h.subscribe({complete:y,error:D})});a.push(m)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(On(dy,8))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const jC=new Xn("AppId"),OA={provide:jC,useFactory:function(){return`${gg()}${gg()}${gg()}`},deps:[]};function gg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const hy=new Xn("Platform Initializer"),fy=new Xn("Platform ID"),HC=new Xn("appBootstrapListener");let cw=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const py=new Xn("LocaleId"),gy=new Xn("DefaultCurrencyCode");class GC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const mg=function(i){return new kb(i)},hw=mg,pw=function(i){return Promise.resolve(mg(i))},my=function(i){const s=mg(i),l=st(ln(i).declarations).reduce((c,h)=>{const m=Tn(h);return m&&c.push(new Rb(m)),c},[]);return new GC(s,l)},zC=my,gw=function(i){return Promise.resolve(my(i))};let mw=(()=>{class i{constructor(){this.compileModuleSync=hw,this.compileModuleAsync=pw,this.compileModuleAndAllComponentsSync=zC,this.compileModuleAndAllComponentsAsync=gw}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();const KC=(()=>Promise.resolve(0))();function _w(i){"undefined"==typeof Zone?KC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class js{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vs(!1),this.onMicrotaskEmpty=new vs(!1),this.onStable=new vs(!1),this.onError=new vs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let i=Xt.requestAnimationFrame,s=Xt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Xt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,_u(i),i.isCheckStableRunning=!0,yw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),_u(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,h,m,y)=>{try{return vw(i),a.invokeTask(c,h,m,y)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),_y(i)}},onInvoke:(a,l,c,h,m,y,D)=>{try{return vw(i),a.invoke(c,h,m,y,D)}finally{i.shouldCoalesceRunChangeDetection&&s(),_y(i)}},onHasTask:(a,l,c,h)=>{a.hasTask(c,h),l===c&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,_u(i),yw(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,l,c,h)=>(a.handleError(c,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!js.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(js.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,s,jA,Qp,Qp);try{return h.runTask(m,a,l)}finally{h.cancelTask(m)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const jA={};function yw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function _u(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function vw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function _y(i){i._nesting--,yw(i)}class QC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vs,this.onMicrotaskEmpty=new vs,this.onStable=new vs,this.onError=new vs}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let bw=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{js.assertNotInAngularZone(),_w(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_w(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let h=-1;l&&l>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(On(js))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})(),ww=(()=>{class i{constructor(){this._applications=new Map,vy.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return vy.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();class yy{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function pn(i){vy=i}let vy=new yy,Dw=!0,Hh=!1;function Ew(){return Hh=!0,Dw}function rr(){if(Hh)throw new Error("Cannot enable prod mode after platform setup.");Dw=!1}let Wn;const tT=new Xn("AllowMultipleToken");class pr{constructor(s,a){this.name=s,this.token=a}}function ZA(i,s,a=[]){const l=`Platform: ${s}`,c=new Xn(l);return(h=[])=>{let m=nT();if(!m||m.injector.get(tT,!1))if(i)i(a.concat(h).concat({provide:c,useValue:!0}));else{const y=a.concat(h).concat({provide:c,useValue:!0},{provide:Ya,useValue:"platform"});!function(i){if(Wn&&!Wn.destroyed&&!Wn.injector.get(tT,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Wn=i.get(rT);const s=i.get(hy,null);s&&s.forEach(a=>a())}(_n.create({providers:y,name:l}))}return function(i){const s=nT();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(c)}}function nT(){return Wn&&!Wn.destroyed?Wn:null}let rT=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const y=function(i,s){let a;return a="noop"===i?new QC:("zone.js"===i?void 0:i)||new js({enableLongStackTrace:Ew(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:js,useValue:y}];return y.run(()=>{const E=_n.create({providers:D,parent:this.injector,name:a.moduleType.name}),T=a.create(E),N=T.injector.get(qa,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const x=y.onError.subscribe({next:V=>{N.handleError(V)}});T.onDestroy(()=>{Tw(this._modules,T),x.unsubscribe()})}),function(i,s,a){try{const l=a();return mt(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(N,y,()=>{const x=T.injector.get(jh);return x.runInitializers(),x.donePromise.then(()=>(function(i){(function(i,s){null==i&&nt(s,i,null,"!=")})(i,"Expected localeId to be defined"),"string"==typeof i&&(ab=i.toLowerCase().replace(/_/g,"-"))}(T.injector.get(py,O_)||O_),this._moduleDoBootstrap(T),T))})})}bootstrapModule(a,l=[]){const c=sT({},l);return function(i,s,a){const l=new kb(a);return Promise.resolve(l)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(a){const l=a.injector.get(yg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${fe(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(On(_n))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();function sT(i,s){return Array.isArray(s)?s.reduce(sT,i):Ct(Ct({},i),s)}let yg=(()=>{class i{constructor(a,l,c,h,m){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new P.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),D=new P.y(E=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{js.assertNotInAngularZone(),_w(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{js.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{T.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ve.T)(y,D.pipe((0,ue.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=a instanceof Cb?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const h=function(i){return i.isBoundToModule}(c)?void 0:this._injector.get(lo),y=c.create(_n.NULL,[],l||c.selector,h),D=y.location.nativeElement,E=y.injector.get(bw,null),T=E&&y.injector.get(ww);return E&&T&&T.registerApplication(D,E),y.onDestroy(()=>{this.detachView(y.hostView),Tw(this.components,y),T&&T.unregisterApplication(D)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Tw(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(HC,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(On(js),On(_n),On(qa),On(Bs),On(jh))},i.\u0275prov=Jt({token:i,factory:i.\u0275fac}),i})();function Tw(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}const oT=function(i){return function(i,s,a){if(Ca(i)&&!a){const l=yi(i.index,s);return new Rh(l,l)}return 47&i.type?new Rh(s[16],s):null}(Yn(),Pe(),16==(16&i))};let aT=(()=>{class i{}return i.__NG_ELEMENT_ID__=oT,i})();const bu=function(i){return null};class hT{constructor(){}supports(s){return Ps(s)}create(s){return new rN(s)}}const nN=(i,s)=>s;class rN{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||nN}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,h=null;for(;a||l;){const m=!l||a&&a.currentIndex<gT(l,c,h)?a:l,y=gT(m,c,h),D=m.currentIndex;if(m===l)c--,l=l._nextRemoved;else if(a=a._next,null==m.previousIndex)c++;else{h||(h=[]);const E=y-c,T=D-c;if(E!=T){for(let x=0;x<E;x++){const V=x<h.length?h[x]:h[x]=0,J=V+x;T<=J&&J<E&&(h[x]=V+1)}h[m.previousIndex]=T-E}}y!==D&&s(m,y,D)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ps(s))throw new Error(`Error trying to diff '${fe(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,h,m,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)h=s[y],m=this._trackByFn(y,h),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,h,m,y)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,y),l=!0),a=a._next}else c=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Xa()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,y=>{m=this._trackByFn(c,y),null!==a&&Object.is(a.trackById,m)?(l&&(a=this._verifyReinsertion(a,y,m,c)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,m,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,c)):s=this._addAfter(new iN(a,l),h,c),s}_verifyReinsertion(s,a,l,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==h?s=this._reinsertAfter(h,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,h=s._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new pT),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pT),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class iN{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class pT{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new fT,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gT(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Rw{constructor(){}supports(s){return s instanceof Map||Cp(s)}create(){return new sN}}class sN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Cp(s)))throw new Error(`Error trying to diff '${fe(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const l=new oN(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class oN{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xw(){return new Iy([new hT])}let Iy=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||xw()),deps:[[i,new wi,new Rs]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:xw}),i})();function Ow(){return new Sg([new Rw])}let Sg=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ow()),deps:[[i,new wi,new Rs]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(l)return l;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=Jt({token:i,providedIn:"root",factory:Ow}),i})();const mT=[new Rw],kw=new Iy([new hT]),Sy=new Sg(mT),yT=ZA(null,"core",[{provide:fy,useValue:"unknown"},{provide:rT,deps:[_n]},{provide:ww,deps:[]},{provide:cw,deps:[]}]),cN=[{provide:yg,useClass:yg,deps:[js,_n,qa,Bs,jh]},{provide:aC,deps:[js],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:jh,useClass:jh,deps:[[new Rs,dy]]},{provide:mw,useClass:mw,deps:[]},OA,{provide:Iy,useFactory:function(){return kw},deps:[]},{provide:Sg,useFactory:function(){return Sy},deps:[]},{provide:py,useFactory:function(i){return i||"undefined"!=typeof $localize&&$localize.locale||O_},deps:[[new Ba(py),new Rs,new wi]]},{provide:gy,useValue:"USD"}];let hN=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(On(yg))},i.\u0275mod=Mi({type:i}),i.\u0275inj=It({providers:cN}),i})()},6293:(et,De,M)=>{"use strict";M.d(De,{Z:()=>Ye});var d=M(4213),ne=M(1177),P=M(1572),ve=M(3855);class ue{constructor(ae,ee){this._delegate=ae,this.firebase=ee,(0,P._addComponent)(ae,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=ae.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ae){this._delegate.automaticDataCollectionEnabled=ae}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ae=>{this._delegate.checkDestroyed(),ae()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(ae,ee=P._DEFAULT_ENTRY_NAME){var ye;this._delegate.checkDestroyed();const Ae=this._delegate.container.getProvider(ae);return!Ae.isInitialized()&&"EXPLICIT"===(null===(ye=Ae.getComponent())||void 0===ye?void 0:ye.instantiationMode)&&Ae.initialize(),Ae.getImmediate({identifier:ee})}_removeServiceInstance(ae,ee=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ae).clearInstance(ee)}_addComponent(ae){(0,P._addComponent)(this._delegate,ae)}_addOrOverwriteComponent(ae){(0,P._addOrOverwriteComponent)(this._delegate,ae)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ce(){const Ve=function(Ve){const ae={},ee={__esModule:!0,initializeApp:function(Xe,de={}){const O=P.initializeApp(Xe,de);if((0,d.r3)(ae,O.name))return ae[O.name];const L=new Ve(O,ee);return ae[O.name]=L,L},app:Ae,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function(Xe){const de=Xe.name,O=de.replace("-compat","");if(P._registerComponent(Xe)&&"PUBLIC"===Xe.type){const L=(q=Ae())=>{if("function"!=typeof q[O])throw le.create("invalid-app-argument",{appName:de});return q[O]()};void 0!==Xe.serviceProps&&(0,d.ZB)(L,Xe.serviceProps),ee[O]=L,Ve.prototype[O]=function(...q){return this._getService.bind(this,de).apply(this,Xe.multipleInstances?q:[])}}return"PUBLIC"===Xe.type?ee[O]:null},removeApp:function(Xe){delete ae[Xe]},useAsService:function(Xe,de){return"serverAuth"===de?null:de},modularAPIs:P}};function Ae(Xe){if(!(0,d.r3)(ae,Xe=Xe||P._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Xe});return ae[Xe]}return ee.default=ee,Object.defineProperty(ee,"apps",{get:function(){return Object.keys(ae).map(Xe=>ae[Xe])}}),Ae.App=Ve,ee}(ue);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function(ee){(0,d.ZB)(Ve,ee)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ve}(),W=new ve.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ye=G;(0,P.registerVersion)("@firebase/app-compat","0.1.11",undefined)},1572:(et,De,M)=>{"use strict";M.r(De),M.d(De,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>Bn,_DEFAULT_ENTRY_NAME:()=>Zt,_addComponent:()=>Vt,_addOrOverwriteComponent:()=>kn,_apps:()=>ut,_clearComponents:()=>It,_components:()=>nt,_getProvider:()=>Jt,_registerComponent:()=>qn,_removeServiceInstance:()=>Gt,deleteApp:()=>mr,getApp:()=>Br,getApps:()=>Ur,initializeApp:()=>ei,onLog:()=>gn,registerVersion:()=>lt,setLogLevel:()=>zn});var d=M(8239),ne=M(1177),P=M(3855),ve=M(4213);class ue{constructor(_t){this.container=_t}getPlatformInfoString(){return this.container.getProviders().map(Kt=>{if(function(Dt){const _t=Dt.getComponent();return"VERSION"===(null==_t?void 0:_t.type)}(Kt)){const jt=Kt.getImmediate();return`${jt.library}/${jt.version}`}return null}).filter(Kt=>Kt).join(" ")}}const le="@firebase/app",ce=new P.Yd("@firebase/app"),Zt="[DEFAULT]",He={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ut=new Map,nt=new Map;function Vt(Dt,_t){try{Dt.container.addComponent(_t)}catch(Kt){ce.debug(`Component ${_t.name} failed to register with FirebaseApp ${Dt.name}`,Kt)}}function kn(Dt,_t){Dt.container.addOrOverwriteComponent(_t)}function qn(Dt){const _t=Dt.name;if(nt.has(_t))return ce.debug(`There were multiple attempts to register component ${_t}.`),!1;nt.set(_t,Dt);for(const Kt of ut.values())Vt(Kt,Dt);return!0}function Jt(Dt,_t){return Dt.container.getProvider(_t)}function Gt(Dt,_t,Kt=Zt){Jt(Dt,_t).clearInstance(Kt)}function It(){nt.clear()}const Ir=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class gi{constructor(_t,Kt,jt){this._isDeleted=!1,this._options=Object.assign({},_t),this._config=Object.assign({},Kt),this._name=Kt.name,this._automaticDataCollectionEnabled=Kt.automaticDataCollectionEnabled,this._container=jt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_t){this.checkDestroyed(),this._automaticDataCollectionEnabled=_t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_t){this._isDeleted=_t}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}const Bn="9.6.0";function ei(Dt,_t={}){"object"!=typeof _t&&(_t={name:_t});const Kt=Object.assign({name:Zt,automaticDataCollectionEnabled:!1},_t),jt=Kt.name;if("string"!=typeof jt||!jt)throw Ir.create("bad-app-name",{appName:String(jt)});const qt=ut.get(jt);if(qt){if((0,ve.vZ)(Dt,qt.options)&&(0,ve.vZ)(Kt,qt.config))return qt;throw Ir.create("duplicate-app",{appName:jt})}const sn=new ne.H0(jt);for(const vt of nt.values())sn.addComponent(vt);const Qe=new gi(Dt,Kt,sn);return ut.set(jt,Qe),Qe}function Br(Dt=Zt){const _t=ut.get(Dt);if(!_t)throw Ir.create("no-app",{appName:Dt});return _t}function Ur(){return Array.from(ut.values())}function mr(Dt){return jr.apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(Dt){const _t=Dt.name;ut.has(_t)&&(ut.delete(_t),yield Promise.all(Dt.container.getProviders().map(Kt=>Kt.delete())),Dt.isDeleted=!0)})).apply(this,arguments)}function lt(Dt,_t,Kt){var jt;let qt=null!==(jt=He[Dt])&&void 0!==jt?jt:Dt;Kt&&(qt+=`-${Kt}`);const sn=qt.match(/\s|\//),Qe=_t.match(/\s|\//);if(sn||Qe){const vt=[`Unable to register library "${qt}" with version "${_t}":`];return sn&&vt.push(`library name "${qt}" contains illegal characters (whitespace or "/")`),sn&&Qe&&vt.push("and"),Qe&&vt.push(`version name "${_t}" contains illegal characters (whitespace or "/")`),void ce.warn(vt.join(" "))}qn(new ne.wA(`${qt}-version`,()=>({library:qt,version:_t}),"VERSION"))}function gn(Dt,_t){if(null!==Dt&&"function"!=typeof Dt)throw Ir.create("invalid-log-argument");(0,P.Am)(Dt,_t)}function zn(Dt){(0,P.Ub)(Dt)}qn(new ne.wA("platform-logger",_t=>new ue(_t),"PRIVATE")),lt(le,"0.7.10",""),lt(le,"0.7.10","esm2017"),lt("fire-js","")},1177:(et,De,M)=>{"use strict";M.d(De,{wA:()=>P,H0:()=>fe});var d=M(8239),ne=M(4213);class P{constructor(G,W,te){this.name=G,this.instanceFactory=W,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ve="[DEFAULT]";class ue{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const te=new ne.BH;if(this.instancesDeferred.set(W,te),this.isInitialized(W)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:W});Ge&&te.resolve(Ge)}catch(Ge){}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const te=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),Ge=null!==(W=null==G?void 0:G.optional)&&void 0!==W&&W;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Ce){if(Ge)return null;throw Ce}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if("EAGER"===G.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ve})}catch(W){}for(const[W,te]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(W);try{const Ce=this.getOrInitializeService({instanceIdentifier:Ge});te.resolve(Ce)}catch(Ce){}}}}clearInstance(G=ve){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,d.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...W.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ve){return this.instances.has(G)}getOptions(G=ve){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,te=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:te,options:W});for(const[Ce,Ye]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Ce)&&Ye.resolve(Ge);return Ge}onInit(G,W){var te;const Ge=this.normalizeInstanceIdentifier(W),Ce=null!==(te=this.onInitCallbacks.get(Ge))&&void 0!==te?te:new Set;Ce.add(G),this.onInitCallbacks.set(Ge,Ce);const Ye=this.instances.get(Ge);return Ye&&G(Ye,Ge),()=>{Ce.delete(G)}}invokeOnInitCallbacks(G,W){const te=this.onInitCallbacks.get(W);if(te)for(const Ge of te)try{Ge(G,W)}catch(Ce){}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let te=this.instances.get(G);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=G,ce===ve?void 0:ce),options:W}),this.instances.set(G,te),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(te,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,te)}catch(Ge){}var ce;return te||null}normalizeInstanceIdentifier(G=ve){return this.component?this.component.multipleInstances?G:ve:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new ue(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},8094:(et,De,M)=>{"use strict";var d=M(8239),ne=M(1572),P=M(1177),ve=M(4213),ue=M(4995);const be="@firebase/installations",ce="w:0.5.4",G="FIS_v2",Ve=new ve.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ae($){return $ instanceof ve.ZR&&$.code.includes("request-failed")}function ee({projectId:$}){return`https://firebaseinstallations.googleapis.com/v1/projects/${$}/installations`}function ye($){return{token:$.token,requestStatus:2,expiresIn:de($.expiresIn),creationTime:Date.now()}}function Ae($,pe){return me.apply(this,arguments)}function me(){return(me=(0,d.Z)(function*($,pe){const Te=(yield pe.json()).error;return Ve.create("request-failed",{requestName:$,serverCode:Te.code,serverMessage:Te.message,serverStatus:Te.status})})).apply(this,arguments)}function Be({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function xe($,{refreshToken:pe}){const ke=Be($);return ke.append("Authorization",function($){return`${G} ${$}`}(pe)),ke}function Ze($){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,d.Z)(function*($){const pe=yield $();return pe.status>=500&&pe.status<600?$():pe})).apply(this,arguments)}function de($){return Number($.replace("s","000"))}function L($,pe){return q.apply(this,arguments)}function q(){return(q=(0,d.Z)(function*($,{fid:pe}){const ke=ee($),en={method:"POST",headers:Be($),body:JSON.stringify({fid:pe,authVersion:G,appId:$.appId,sdkVersion:ce})},vn=yield Ze(()=>fetch(ke,en));if(vn.ok){const Sn=yield vn.json();return{fid:Sn.fid||pe,registrationStatus:2,refreshToken:Sn.refreshToken,authToken:ye(Sn.authToken)}}throw yield Ae("Create Installation",vn)})).apply(this,arguments)}function Y($){return new Promise(pe=>{setTimeout(pe,$)})}const Q=/^[cdef][\w-]{21}$/;function yt(){try{const $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;const ke=function($){return function($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}($).substr(0,22)}($);return Q.test(ke)?ke:""}catch($){return""}}function He($){return`${$.appName}!${$.appId}`}const ut=new Map;function nt($,pe){const ke=He($);qn(ke,pe),function($,pe){const ke=(!Gt&&"BroadcastChannel"in self&&(Gt=new BroadcastChannel("[Firebase] FID Change"),Gt.onmessage=$=>{qn($.data.key,$.data.fid)}),Gt);ke&&ke.postMessage({key:$,fid:pe}),0===ut.size&&Gt&&(Gt.close(),Gt=null)}(ke,pe)}function qn($,pe){const ke=ut.get($);if(ke)for(const Te of ke)Te(pe)}let Gt=null;const Bn="firebase-installations-store";let ei=null;function Br(){return ei||(ei=(0,ue.openDb)("firebase-installations-database",1,$=>{0===$.oldVersion&&$.createObjectStore(Bn)})),ei}function Ur($,pe){return mr.apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*($,pe){const ke=He($),In=(yield Br()).transaction(Bn,"readwrite"),en=In.objectStore(Bn),vn=yield en.get(ke);return yield en.put(pe,ke),yield In.complete,(!vn||vn.fid!==pe.fid)&&nt($,pe.fid),pe})).apply(this,arguments)}function jr($){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*($){const pe=He($),Te=(yield Br()).transaction(Bn,"readwrite");yield Te.objectStore(Bn).delete(pe),yield Te.complete})).apply(this,arguments)}function gn($,pe){return zn.apply(this,arguments)}function zn(){return(zn=(0,d.Z)(function*($,pe){const ke=He($),In=(yield Br()).transaction(Bn,"readwrite"),en=In.objectStore(Bn),vn=yield en.get(ke),Sn=pe(vn);return void 0===Sn?yield en.delete(ke):yield en.put(Sn,ke),yield In.complete,Sn&&(!vn||vn.fid!==Sn.fid)&&nt($,Sn.fid),Sn})).apply(this,arguments)}function ar($){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*($){let pe;const ke=yield gn($,Te=>{const In=_t(Te),en=Kt($,In);return pe=en.registrationPromise,en.installationEntry});return""===ke.fid?{installationEntry:yield pe}:{installationEntry:ke,registrationPromise:pe}})).apply(this,arguments)}function _t($){return Sr($||{fid:yt(),registrationStatus:0})}function Kt($,pe){if(0===pe.registrationStatus){if(!navigator.onLine)return{installationEntry:pe,registrationPromise:Promise.reject(Ve.create("app-offline"))};const ke={fid:pe.fid,registrationStatus:1,registrationTime:Date.now()},Te=function($,pe){return qt.apply(this,arguments)}($,ke);return{installationEntry:ke,registrationPromise:Te}}return 1===pe.registrationStatus?{installationEntry:pe,registrationPromise:sn($)}:{installationEntry:pe}}function qt(){return(qt=(0,d.Z)(function*($,pe){try{return Ur($,yield L($,pe))}catch(ke){throw ae(ke)&&409===ke.customData.serverCode?yield jr($):yield Ur($,{fid:pe.fid,registrationStatus:0}),ke}})).apply(this,arguments)}function sn($){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*($){let pe=yield vt($);for(;1===pe.registrationStatus;)yield Y(100),pe=yield vt($);if(0===pe.registrationStatus){const{installationEntry:ke,registrationPromise:Te}=yield ar($);return Te||ke}return pe})).apply(this,arguments)}function vt($){return gn($,pe=>{if(!pe)throw Ve.create("installation-not-found");return Sr(pe)})}function Sr($){return function($){return 1===$.registrationStatus&&$.registrationTime+1e4<Date.now()}($)?{fid:$.fid,registrationStatus:0}:$}function Mr($,pe){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*({appConfig:$,platformLoggerProvider:pe},ke){const Te=_r($,ke),In=xe($,ke),en=pe.getImmediate({optional:!0});en&&In.append("x-firebase-client",en.getPlatformInfoString());const Sn={method:"POST",headers:In,body:JSON.stringify({installation:{sdkVersion:ce}})},Zn=yield Ze(()=>fetch(Te,Sn));if(Zn.ok)return ye(yield Zn.json());throw yield Ae("Generate Auth Token",Zn)})).apply(this,arguments)}function _r($,{fid:pe}){return`${ee($)}/${pe}/authTokens:generate`}function ni($){return z.apply(this,arguments)}function z(){return(z=(0,d.Z)(function*($,pe=!1){let ke;const Te=yield gn($.appConfig,en=>{if(!ft(en))throw Ve.create("not-registered");const vn=en.authToken;if(!pe&&zt(vn))return en;if(1===vn.requestStatus)return ke=U($,pe),en;{if(!navigator.onLine)throw Ve.create("app-offline");const Sn=dn(en);return ke=oe($,Sn),Sn}});return ke?yield ke:Te.authToken})).apply(this,arguments)}function U($,pe){return Z.apply(this,arguments)}function Z(){return(Z=(0,d.Z)(function*($,pe){let ke=yield Ne($.appConfig);for(;1===ke.authToken.requestStatus;)yield Y(100),ke=yield Ne($.appConfig);const Te=ke.authToken;return 0===Te.requestStatus?ni($,pe):Te})).apply(this,arguments)}function Ne($){return gn($,pe=>{if(!ft(pe))throw Ve.create("not-registered");return function($){return 1===$.requestStatus&&$.requestTime+1e4<Date.now()}(pe.authToken)?Object.assign(Object.assign({},pe),{authToken:{requestStatus:0}}):pe})}function oe($,pe){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*($,pe){try{const ke=yield Mr($,pe),Te=Object.assign(Object.assign({},pe),{authToken:ke});return yield Ur($.appConfig,Te),ke}catch(ke){if(!ae(ke)||401!==ke.customData.serverCode&&404!==ke.customData.serverCode){const Te=Object.assign(Object.assign({},pe),{authToken:{requestStatus:0}});yield Ur($.appConfig,Te)}else yield jr($.appConfig);throw ke}})).apply(this,arguments)}function ft($){return void 0!==$&&2===$.registrationStatus}function zt($){return 2===$.requestStatus&&!function($){const pe=Date.now();return pe<$.creationTime||$.creationTime+$.expiresIn<pe+36e5}($)}function dn($){const pe={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:pe})}function Cn(){return(Cn=(0,d.Z)(function*($){const pe=$,{installationEntry:ke,registrationPromise:Te}=yield ar(pe.appConfig);return Te?Te.catch(console.error):ni(pe).catch(console.error),ke.fid})).apply(this,arguments)}function Mi(){return(Mi=(0,d.Z)(function*($,pe=!1){const ke=$;return yield Fo(ke.appConfig),(yield ni(ke,pe)).token})).apply(this,arguments)}function Fo($){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*($){const{registrationPromise:pe}=yield ar($);pe&&(yield pe)})).apply(this,arguments)}function At($){return Ve.create("missing-app-config-values",{valueName:$})}const K="installations";(0,ne._registerComponent)(new P.wA(K,$=>{const pe=$.getProvider("app").getImmediate(),ke=function($){if(!$||!$.options)throw At("App Configuration");if(!$.name)throw At("App Name");const pe=["projectId","apiKey","appId"];for(const ke of pe)if(!$.options[ke])throw At(ke);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}(pe);return{app:pe,appConfig:ke,platformLoggerProvider:(0,ne._getProvider)(pe,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ne._registerComponent)(new P.wA("installations-internal",$=>{const pe=$.getProvider("app").getImmediate(),ke=(0,ne._getProvider)(pe,K).getImmediate();return{getId:()=>function($){return Cn.apply(this,arguments)}(ke),getToken:In=>function($){return Mi.apply(this,arguments)}(ke,In)}},"PRIVATE")),(0,ne.registerVersion)(be,"0.5.4"),(0,ne.registerVersion)(be,"0.5.4","esm2017")},3855:(et,De,M)=>{"use strict";M.d(De,{in:()=>ne,Yd:()=>le,Ub:()=>fe,Am:()=>ce});const d=[];var ne=(()=>{return(G=ne||(ne={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ne;var G})();const P={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ve=ne.INFO,ue={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},be=(G,W,...te)=>{if(W<G.logLevel)return;const Ge=(new Date).toISOString(),Ce=ue[W];if(!Ce)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Ce](`[${Ge}]  ${G.name}:`,...te)};class le{constructor(W){this.name=W,this._logLevel=ve,this._logHandler=be,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in ne))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?P[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...W),this._logHandler(this,ne.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...W),this._logHandler(this,ne.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...W),this._logHandler(this,ne.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...W),this._logHandler(this,ne.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...W),this._logHandler(this,ne.ERROR,...W)}}function fe(G){d.forEach(W=>{W.setLogLevel(G)})}function ce(G,W){for(const te of d){let Ge=null;W&&W.level&&(Ge=P[W.level]),te.userLogHandler=null===G?null:(Ce,Ye,...Ve)=>{const ae=Ve.map(ee=>{if(null==ee)return null;if("string"==typeof ee)return ee;if("number"==typeof ee||"boolean"==typeof ee)return ee.toString();if(ee instanceof Error)return ee.message;try{return JSON.stringify(ee)}catch(ye){return null}}).filter(ee=>ee).join(" ");Ye>=(null!=Ge?Ge:Ce.logLevel)&&G({level:ne[Ye].toLowerCase(),message:ae,args:Ve,type:Ce.name})}}}},7835:(et,De,M)=>{"use strict";M.d(De,{pQ:()=>Je,LP:()=>ln,Gb:()=>Hi,ps:()=>At});var d=M(8239),P=(M(8094),M(1177)),ve=M(4995),ue=M(4213),be=M(1572);const le="/firebase-messaging-sw.js",fe="/firebase-cloud-messaging-push-scope",ce="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",W="google.c.a.c_id",te="google.c.a.c_l",Ge="google.c.a.ts",Ce="google.c.a.e";var Ve=(()=>{return(K=Ve||(Ve={})).PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",Ve;var K})();function ae(K){const he=new Uint8Array(K);return btoa(String.fromCharCode(...he)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ee(K){const $e=(K+"=".repeat((4-K.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),qe=atob($e),ct=new Uint8Array(qe.length);for(let $=0;$<qe.length;++$)ct[$]=qe.charCodeAt($);return ct}const ye="fcm_token_details_db",me="fcm_token_object_Store";function Be(K){return xe.apply(this,arguments)}function xe(){return xe=(0,d.Z)(function*(K){if("databases"in indexedDB&&!(yield indexedDB.databases()).map($=>$.name).includes(ye))return null;let he=null;return(yield(0,ve.openDb)(ye,5,function(){var qe=(0,d.Z)(function*(ct){var $;if(ct.oldVersion<2||!ct.objectStoreNames.contains(me))return;const pe=ct.transaction.objectStore(me),ke=yield pe.index("fcmSenderId").get(K);if(yield pe.clear(),ke)if(2===ct.oldVersion){const Te=ke;if(!Te.auth||!Te.p256dh||!Te.endpoint)return;he={token:Te.fcmToken,createTime:null!==($=Te.createTime)&&void 0!==$?$:Date.now(),subscriptionOptions:{auth:Te.auth,p256dh:Te.p256dh,endpoint:Te.endpoint,swScope:Te.swScope,vapidKey:"string"==typeof Te.vapidKey?Te.vapidKey:ae(Te.vapidKey)}}}else if(3===ct.oldVersion){const Te=ke;he={token:Te.fcmToken,createTime:Te.createTime,subscriptionOptions:{auth:ae(Te.auth),p256dh:ae(Te.p256dh),endpoint:Te.endpoint,swScope:Te.swScope,vapidKey:ae(Te.vapidKey)}}}else if(4===ct.oldVersion){const Te=ke;he={token:Te.fcmToken,createTime:Te.createTime,subscriptionOptions:{auth:ae(Te.auth),p256dh:ae(Te.p256dh),endpoint:Te.endpoint,swScope:Te.swScope,vapidKey:ae(Te.vapidKey)}}}});return function(ct){return qe.apply(this,arguments)}}())).close(),yield(0,ve.deleteDb)(ye),yield(0,ve.deleteDb)("fcm_vapid_details_db"),yield(0,ve.deleteDb)("undefined"),Ze(he)?he:null}),xe.apply(this,arguments)}function Ze(K){if(!K||!K.subscriptionOptions)return!1;const{subscriptionOptions:he}=K;return"number"==typeof K.createTime&&K.createTime>0&&"string"==typeof K.token&&K.token.length>0&&"string"==typeof he.auth&&he.auth.length>0&&"string"==typeof he.p256dh&&he.p256dh.length>0&&"string"==typeof he.endpoint&&he.endpoint.length>0&&"string"==typeof he.swScope&&he.swScope.length>0&&"string"==typeof he.vapidKey&&he.vapidKey.length>0}const O="firebase-messaging-store";let L=null;function q(){return L||(L=(0,ve.openDb)("firebase-messaging-database",1,K=>{0===K.oldVersion&&K.createObjectStore(O)})),L}function Y(K){return se.apply(this,arguments)}function se(){return(se=(0,d.Z)(function*(K){const he=He(K),qe=yield(yield q()).transaction(O).objectStore(O).get(he);if(qe)return qe;{const ct=yield Be(K.appConfig.senderId);if(ct)return yield Q(K,ct),ct}})).apply(this,arguments)}function Q(K,he){return je.apply(this,arguments)}function je(){return(je=(0,d.Z)(function*(K,he){const $e=He(K),ct=(yield q()).transaction(O,"readwrite");return yield ct.objectStore(O).put(he,$e),yield ct.complete,he})).apply(this,arguments)}function yt(K){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,d.Z)(function*(K){const he=He(K),qe=(yield q()).transaction(O,"readwrite");yield qe.objectStore(O).delete(he),yield qe.complete})).apply(this,arguments)}function He({appConfig:K}){return K.appId}const nt=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Vt(K,he){return kn.apply(this,arguments)}function kn(){return(kn=(0,d.Z)(function*(K,he){const $e=yield Ir(K),qe=Bn(he),ct={method:"POST",headers:$e,body:JSON.stringify(qe)};let $;try{$=yield(yield fetch(Vn(K.appConfig),ct)).json()}catch(pe){throw nt.create("token-subscribe-failed",{errorInfo:pe})}if($.error)throw nt.create("token-subscribe-failed",{errorInfo:$.error.message});if(!$.token)throw nt.create("token-subscribe-no-token");return $.token})).apply(this,arguments)}function qn(K,he){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(K,he){const $e=yield Ir(K),qe=Bn(he.subscriptionOptions),ct={method:"PATCH",headers:$e,body:JSON.stringify(qe)};let $;try{$=yield(yield fetch(`${Vn(K.appConfig)}/${he.token}`,ct)).json()}catch(pe){throw nt.create("token-update-failed",{errorInfo:pe})}if($.error)throw nt.create("token-update-failed",{errorInfo:$.error.message});if(!$.token)throw nt.create("token-update-no-token");return $.token})).apply(this,arguments)}function Gt(K,he){return It.apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(K,he){const qe={method:"DELETE",headers:yield Ir(K)};try{const $=yield(yield fetch(`${Vn(K.appConfig)}/${he}`,qe)).json();if($.error)throw nt.create("token-unsubscribe-failed",{errorInfo:$.error.message})}catch(ct){throw nt.create("token-unsubscribe-failed",{errorInfo:ct})}})).apply(this,arguments)}function Vn({projectId:K}){return`https://fcmregistrations.googleapis.com/v1/projects/${K}/registrations`}function Ir(K){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*({appConfig:K,installations:he}){const $e=yield he.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K.apiKey,"x-goog-firebase-installations-auth":`FIS ${$e}`})})).apply(this,arguments)}function Bn({p256dh:K,auth:he,endpoint:$e,vapidKey:qe}){const ct={web:{endpoint:$e,auth:he,p256dh:K}};return qe!==ce&&(ct.web.applicationPubKey=qe),ct}const ei=6048e5;function Br(K){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,d.Z)(function*(K){const he=yield Dt(K.swRegistration,K.vapidKey),$e={vapidKey:K.vapidKey,swScope:K.swRegistration.scope,endpoint:he.endpoint,auth:ae(he.getKey("auth")),p256dh:ae(he.getKey("p256dh"))},qe=yield Y(K.firebaseDependencies);if(qe){if(Kt(qe.subscriptionOptions,$e))return Date.now()>=qe.createTime+ei?lt(K,{token:qe.token,createTime:Date.now(),subscriptionOptions:$e}):qe.token;try{yield Gt(K.firebaseDependencies,qe.token)}catch(ct){console.warn(ct)}return zn(K.firebaseDependencies,$e)}return zn(K.firebaseDependencies,$e)})).apply(this,arguments)}function mr(K){return jr.apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(K){const he=yield Y(K.firebaseDependencies);he&&(yield Gt(K.firebaseDependencies,he.token),yield yt(K.firebaseDependencies));const $e=yield K.swRegistration.pushManager.getSubscription();return!$e||$e.unsubscribe()})).apply(this,arguments)}function lt(K,he){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(K,he){try{const $e=yield qn(K.firebaseDependencies,he),qe=Object.assign(Object.assign({},he),{token:$e,createTime:Date.now()});return yield Q(K.firebaseDependencies,qe),$e}catch($e){throw yield mr(K),$e}})).apply(this,arguments)}function zn(K,he){return ar.apply(this,arguments)}function ar(){return(ar=(0,d.Z)(function*(K,he){const qe={token:yield Vt(K,he),createTime:Date.now(),subscriptionOptions:he};return yield Q(K,qe),qe.token})).apply(this,arguments)}function Dt(K,he){return _t.apply(this,arguments)}function _t(){return(_t=(0,d.Z)(function*(K,he){return(yield K.pushManager.getSubscription())||K.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ee(he)})})).apply(this,arguments)}function Kt(K,he){return he.vapidKey===K.vapidKey&&he.endpoint===K.endpoint&&he.auth===K.auth&&he.p256dh===K.p256dh}function jt(K){const he={from:K.from,collapseKey:K.collapse_key,messageId:K.fcm_message_id};return function(K,he){if(!he.notification)return;K.notification={};const $e=he.notification.title;$e&&(K.notification.title=$e);const qe=he.notification.body;qe&&(K.notification.body=qe);const ct=he.notification.image;ct&&(K.notification.image=ct)}(he,K),function(K,he){!he.data||(K.data=he.data)}(he,K),function(K,he){if(!he.fcmOptions)return;K.fcmOptions={};const $e=he.fcmOptions.link;$e&&(K.fcmOptions.link=$e);const qe=he.fcmOptions.analytics_label;qe&&(K.fcmOptions.analyticsLabel=qe)}(he,K),he}function vt(K){return"object"==typeof K&&!!K&&W in K}function Sr(K,he){const $e=[];for(let qe=0;qe<K.length;qe++)$e.push(K.charAt(qe)),qe<he.length&&$e.push(he.charAt(qe));return $e.join("")}function Mr(K){return nt.create("missing-app-config-values",{valueName:K})}Sr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Sr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xt{constructor(he,$e,qe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ct=function(K){if(!K||!K.options)throw Mr("App Configuration Object");if(!K.name)throw Mr("App Name");const he=["projectId","apiKey","appId","messagingSenderId"],{options:$e}=K;for(const qe of he)if(!$e[qe])throw Mr(qe);return{appName:K.name,projectId:$e.projectId,apiKey:$e.apiKey,appId:$e.appId,senderId:$e.messagingSenderId}}(he);this.firebaseDependencies={app:he,appConfig:ct,installations:$e,analyticsProvider:qe}}_delete(){return Promise.resolve()}}function _r(K){return ni.apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(K){try{K.swRegistration=yield navigator.serviceWorker.register(le,{scope:fe}),K.swRegistration.update().catch(()=>{})}catch(he){throw nt.create("failed-service-worker-registration",{browserErrorMessage:he.message})}})).apply(this,arguments)}function z(K,he){return U.apply(this,arguments)}function U(){return(U=(0,d.Z)(function*(K,he){if(!he&&!K.swRegistration&&(yield _r(K)),he||!K.swRegistration){if(!(he instanceof ServiceWorkerRegistration))throw nt.create("invalid-sw-registration");K.swRegistration=he}})).apply(this,arguments)}function Z(K,he){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*(K,he){he?K.vapidKey=he:K.vapidKey||(K.vapidKey=ce)})).apply(this,arguments)}function oe(K,he){return it.apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(K,he){if(!navigator)throw nt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw nt.create("permission-blocked");return yield Z(K,null==he?void 0:he.vapidKey),yield z(K,null==he?void 0:he.serviceWorkerRegistration),Br(K)})).apply(this,arguments)}function ft(K,he,$e){return zt.apply(this,arguments)}function zt(){return(zt=(0,d.Z)(function*(K,he,$e){const qe=Rn(he);(yield K.firebaseDependencies.analyticsProvider.get()).logEvent(qe,{message_id:$e[W],message_name:$e[te],message_time:$e[Ge],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Rn(K){switch(K){case Ve.NOTIFICATION_CLICKED:return"notification_open";case Ve.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yr(){return(yr=(0,d.Z)(function*(K,he){const $e=he.data;if(!$e.isFirebaseMessaging)return;K.onMessageHandler&&$e.messageType===Ve.PUSH_RECEIVED&&("function"==typeof K.onMessageHandler?K.onMessageHandler(jt($e)):K.onMessageHandler.next(jt($e)));const qe=$e.data;vt(qe)&&"1"===qe[Ce]&&(yield ft(K,$e.messageType,qe))})).apply(this,arguments)}const Pt="@firebase/messaging";function Hi(){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,d.Z)(function*(){return"undefined"!=typeof window&&(0,ue.hl)()&&(yield(0,ue.eu)())&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(K){if(!navigator)throw nt.create("only-available-in-window");return K.swRegistration||(yield _r(K)),mr(K)})).apply(this,arguments)}function ln(K,he){return vr.apply(this,arguments)}function vr(){return(vr=(0,d.Z)(function*(K,he){return oe(K=(0,ue.m9)(K),he)})).apply(this,arguments)}function Je(K){return function(K){return Tn.apply(this,arguments)}(K=(0,ue.m9)(K))}function At(K,he){return function(K,he){if(!navigator)throw nt.create("only-available-in-window");return K.onMessageHandler=he,()=>{K.onMessageHandler=null}}(K=(0,ue.m9)(K),he)}(0,be._registerComponent)(new P.wA("messaging",K=>{const he=new Xt(K.getProvider("app").getImmediate(),K.getProvider("installations-internal").getImmediate(),K.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",$e=>function(K,he){return yr.apply(this,arguments)}(he,$e)),he},"PUBLIC")),(0,be._registerComponent)(new P.wA("messaging-internal",K=>{const he=K.getProvider("messaging").getImmediate();return{getToken:qe=>oe(he,qe)}},"PRIVATE")),(0,be.registerVersion)(Pt,"0.9.4"),(0,be.registerVersion)(Pt,"0.9.4","esm2017")},8239:(et,De,M)=>{"use strict";function d(P,ve,ue,be,le,fe,ce){try{var G=P[fe](ce),W=G.value}catch(te){return void ue(te)}G.done?ve(W):Promise.resolve(W).then(be,le)}function ne(P){return function(){var ve=this,ue=arguments;return new Promise(function(be,le){var fe=P.apply(ve,ue);function ce(W){d(fe,be,le,ce,G,"next",W)}function G(W){d(fe,be,le,ce,G,"throw",W)}ce(void 0)})}}M.d(De,{Z:()=>ne})}},et=>{et(et.s=6177)}]);